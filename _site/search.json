[
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "",
    "text": "Water is an important resource to mankind. Clean and accessible water is critical to human health. It provides a healthy environment, a sustainable economy, reduces poverty and ensures peace and security. Yet over 40% of the global population does not have access to sufficient clean water. By 2025, 1.8 billion people will be living in countries or regions with absolute water scarcity, according to UN-Water. The lack of water poses a major threat to several sectors, including food security. Agriculture uses about 70% of the world’s accessible freshwater.\nDeveloping countries are most affected by water shortages and poor water quality. Up to 80% of illnesses in the developing world are linked to inadequate water and sanitation. Despite technological advancement, providing clean water to the rural community is still a major development issues in many countries globally, especially countries in the Africa continent.\nTo address the issue of providing clean and sustainable water supply to the rural community, a global Water Point Data Exchange (WPdx) project has been initiated. The main aim of this initiative is to collect water point related data from rural areas at the water point or small water scheme level and share the data via WPdx Data Repository, a cloud-based data library. What is so special of this project is that data are collected based on WPDx Data Standard.\n\n\nGeospatial analytics hold tremendous potential to address complex problems facing society. In this study, you are tasked to apply appropriate spatial point patterns analysis methods to discover the geographical distribution of functional and non-function water points and their co-locations if any in Osun State, Nigeria.\n\n\n\nThe specific tasks of this take-home exercise are as follows:\n\n\n\nDerive kernel density maps of functional and non-functional water points. Using appropriate tmap functions,\nDisplay the kernel density maps on openstreetmap of Osub State, Nigeria.\nDescribe the spatial patterns revealed by the kernel density maps. Highlight the advantage of kernel density map over point map.\n\n\n\n\nWith reference to the spatial point patterns observed in ESDA:\n\nFormulate the null hypothesis and alternative hypothesis and select the confidence level.\nPerform the test by using appropriate Second order spatial point patterns analysis technique.\nWith reference to the analysis results, draw statistical conclusions.\n\n\n\n\nIn this section, you are required to confirm statistically if the spatial distribution of functional and non-functional water points are independent from each other.\n\nFormulate the null hypothesis and alternative hypothesis and select the confidence level.\nPerform the test by using appropriate Second order spatial point patterns analysis technique.\nWith reference to the analysis results, draw statistical conclusions.\n\n\n\n\n\n\n\nFor the purpose of this assignment, data from WPdx Global Data Repositories will be used. There are two versions of the data. They are: WPdx-Basic and WPdx+. You are required to use WPdx+ data set.\n\n\n\nThis study will focus of Osun State, Nigeria. The state boundary GIS data of Nigeria can be downloaded either from The Humanitarian Data Exchange portal or geoBoundaries."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#importing-of-packages",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#importing-of-packages",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "2.1 Importing of packages",
    "text": "2.1 Importing of packages\n\npacman::p_load(sf, sfdep, tidyverse, funModeling, spatstat, tmap, maptools, raster)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#handling-geospatial-data",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#handling-geospatial-data",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "2.2 Handling Geospatial Data",
    "text": "2.2 Handling Geospatial Data\n\n2.2.1 Importing Geospatial Data set\n\ngeoNGA <- st_read(\"data/geospatial/\",\n                  layer = \"geoBoundaries-NGA-ADM2\") %>% \n  st_transform(crs = 26392)\n\nReading layer `geoBoundaries-NGA-ADM2' from data source \n  `C:\\Users\\Daniel\\Desktop\\Github\\IS419\\IS415-GAA\\Take-Home_Ex\\Take-Home_Ex01\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 774 features and 6 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2.668534 ymin: 4.273007 xmax: 14.67882 ymax: 13.89442\nGeodetic CRS:  WGS 84\n\n\n\n\n2.2.2 Importing NGA Data set\n\nNGA <- st_read(\"data/geospatial/\",\n               layer = \"nga_admbnda_adm2_osgof_20190417\") %>%\n  st_transform(crs = 26392)\n\nReading layer `nga_admbnda_adm2_osgof_20190417' from data source \n  `C:\\Users\\Daniel\\Desktop\\Github\\IS419\\IS415-GAA\\Take-Home_Ex\\Take-Home_Ex01\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 774 features and 16 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2.668534 ymin: 4.273007 xmax: 14.67882 ymax: 13.89442\nGeodetic CRS:  WGS 84"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#handling-aspatial-data",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#handling-aspatial-data",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "2.3 Handling Aspatial Data",
    "text": "2.3 Handling Aspatial Data\n\n2.3.1 Importing Aspatial Data\nDownload dataset and remember to filter only to NGA\n\nwp_nga <- read_csv(\"data/aspatial/WPdx.csv\")\n\n\n\n2.3.2 Converting water point data into sf point features\n\nwp_nga$Geometry = st_as_sfc(wp_nga$`New Georeferenced Column`)\nwp_nga\n\n# A tibble: 97,478 × 75\n   row_id `#source`      #lat_…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷\n    <dbl> <chr>            <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 158721 Federal Minis…    5.07    6.62 02/19/… Yes     Boreho… Well    Mechan…\n 2 158892 Federal Minis…    5.09    7.09 02/06/… Yes     Boreho… Well    Hand P…\n 3 323117 Federal Minis…    5.91    8.77 08/31/… Yes     Boreho… Well    Hand P…\n 4 300176 Federal Minis…    5.23    7.32 05/17/… Yes     Boreho… Well    Mechan…\n 5 324346 Federal Minis…    6.88    3.36 08/17/… Yes     Boreho… Well    Mechan…\n 6 297273 Federal Minis…    6.59    3.29 05/26/… Yes     Boreho… Well    Mechan…\n 7 296853 Federal Minis…    6.60    3.26 06/02/… Yes     Boreho… Well    Mechan…\n 8 323866 Federal Minis…    6.20    6.73 09/18/… Yes     Boreho… Well    Mechan…\n 9 297044 Federal Minis…    6.61    3.30 05/26/… Yes     Boreho… Well    Mechan…\n10 324321 Federal Minis…    6.96    3.60 08/16/… Yes     Boreho… Well    Mechan…\n# … with 97,468 more rows, 66 more variables: `#water_tech_category` <chr>,\n#   `#facility_type` <chr>, `#clean_country_name` <chr>, `#clean_adm1` <chr>,\n#   `#clean_adm2` <chr>, `#clean_adm3` <lgl>, `#clean_adm4` <lgl>,\n#   `#install_year` <dbl>, `#installer` <lgl>, `#rehab_year` <lgl>,\n#   `#rehabilitator` <lgl>, `#management_clean` <chr>, `#status_clean` <chr>,\n#   `#pay` <chr>, `#fecal_coliform_presence` <lgl>,\n#   `#fecal_coliform_value` <lgl>, `#subjective_quality` <chr>, …\n\n\n\n\n2.3.3 Converting Tibble dataframe into sf object\n\nwp_sf <- st_sf(wp_nga, crs=4326)\nwp_sf\n\nSimple feature collection with 97478 features and 74 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 2.707441 ymin: 4.301812 xmax: 14.21828 ymax: 13.86568\nGeodetic CRS:  WGS 84\n# A tibble: 97,478 × 75\n   row_id `#source`      #lat_…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷\n *  <dbl> <chr>            <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 158721 Federal Minis…    5.07    6.62 02/19/… Yes     Boreho… Well    Mechan…\n 2 158892 Federal Minis…    5.09    7.09 02/06/… Yes     Boreho… Well    Hand P…\n 3 323117 Federal Minis…    5.91    8.77 08/31/… Yes     Boreho… Well    Hand P…\n 4 300176 Federal Minis…    5.23    7.32 05/17/… Yes     Boreho… Well    Mechan…\n 5 324346 Federal Minis…    6.88    3.36 08/17/… Yes     Boreho… Well    Mechan…\n 6 297273 Federal Minis…    6.59    3.29 05/26/… Yes     Boreho… Well    Mechan…\n 7 296853 Federal Minis…    6.60    3.26 06/02/… Yes     Boreho… Well    Mechan…\n 8 323866 Federal Minis…    6.20    6.73 09/18/… Yes     Boreho… Well    Mechan…\n 9 297044 Federal Minis…    6.61    3.30 05/26/… Yes     Boreho… Well    Mechan…\n10 324321 Federal Minis…    6.96    3.60 08/16/… Yes     Boreho… Well    Mechan…\n# … with 97,468 more rows, 66 more variables: `#water_tech_category` <chr>,\n#   `#facility_type` <chr>, `#clean_country_name` <chr>, `#clean_adm1` <chr>,\n#   `#clean_adm2` <chr>, `#clean_adm3` <lgl>, `#clean_adm4` <lgl>,\n#   `#install_year` <dbl>, `#installer` <lgl>, `#rehab_year` <lgl>,\n#   `#rehabilitator` <lgl>, `#management_clean` <chr>, `#status_clean` <chr>,\n#   `#pay` <chr>, `#fecal_coliform_presence` <lgl>,\n#   `#fecal_coliform_value` <lgl>, `#subjective_quality` <chr>, …\n\n\n\n\n2.3.4 Transform into Nigeria projected coordinate system\n\nwp_sf <- wp_sf %>%\n  st_transform(crs = 26392)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#excluding-redundant-fields",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#excluding-redundant-fields",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "3.1 Excluding redundant fields",
    "text": "3.1 Excluding redundant fields\n\nNGA <- NGA %>%\n  dplyr::select(c(3:4, 8:9))"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#checking-for-duplicate-names",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#checking-for-duplicate-names",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "3.2 Checking for duplicate names",
    "text": "3.2 Checking for duplicate names\n\nNGA$ADM2_EN[duplicated(NGA$ADM2_EN)==TRUE]\n\n[1] \"Bassa\"    \"Ifelodun\" \"Irepodun\" \"Nasarawa\" \"Obi\"      \"Surulere\""
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#replacing-duplicate-names",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#replacing-duplicate-names",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "3.2 Replacing duplicate names",
    "text": "3.2 Replacing duplicate names\n\nNGA$ADM2_EN[94] <- \"Bassa, Kogi\"\nNGA$ADM2_EN[95] <- \"Bassa, Plateau\"\nNGA$ADM2_EN[304] <- \"Ifelodun, Kwara\"\nNGA$ADM2_EN[305] <- \"Ifelodun, Osun\"\nNGA$ADM2_EN[355] <- \"Irepodun, Kwara\"\nNGA$ADM2_EN[356] <- \"Irepodun, Osun\"\nNGA$ADM2_EN[519] <- \"Nasarawa, Kano\"\nNGA$ADM2_EN[520] <- \"Nasarawa, Nasarawa\"\nNGA$ADM2_EN[546] <- \"Obi, Benue\"\nNGA$ADM2_EN[547] <- \"Obi, Nasarawa\"\nNGA$ADM2_EN[693] <- \"Surulere, Lagos\"\nNGA$ADM2_EN[694] <- \"Surulere, Oyo\""
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#confirming-that-duplicated-name-issue-been-addressed",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#confirming-that-duplicated-name-issue-been-addressed",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "3.3 Confirming that duplicated name issue been addressed",
    "text": "3.3 Confirming that duplicated name issue been addressed\n\nNGA$ADM2_EN[duplicated(NGA$ADM2_EN)==TRUE]\n\ncharacter(0)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualizing-water-point-data",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualizing-water-point-data",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "4.1 Visualizing Water Point Data",
    "text": "4.1 Visualizing Water Point Data\n\nosun_wp_sf <- subset(wp_sf, \"clean_adm2\" == \"Osun\")\n\nUnderstanding visually NGA’s water point\n\nfunModeling::freq(data = wp_sf,\n     input = '#status_clean')\n\n\n\n\n                      #status_clean frequency percentage cumulative_perc\n1                        Functional     47228      48.45           48.45\n2                    Non-Functional     30638      31.43           79.88\n3                              <NA>     10154      10.42           90.30\n4          Functional, needs repair      4792       4.92           95.22\n5               Non-Functional, dry      2473       2.54           97.76\n6            Functional, not in use      1775       1.82           99.58\n7          Abandoned/Decommissioned       321       0.33           99.91\n8         Functional but not in use        86       0.09          100.00\n9  Non-Functional due to dry season         7       0.01          100.01\n10      Functional but needs repair         4       0.00          100.00"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#renaming-of-columns",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#renaming-of-columns",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "4.2 Renaming of columns",
    "text": "4.2 Renaming of columns\n\nwp_sf_nga <- wp_sf %>% \n  rename(status_clean = '#status_clean') %>%\n  dplyr::select(status_clean) %>%\n  mutate(status_clean = replace_na(\n    status_clean, \"unknown\"))"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#extracting-water-point-data",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#extracting-water-point-data",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "4.3 Extracting Water Point Data",
    "text": "4.3 Extracting Water Point Data\n\n4.3.1 Functional Water Point\n\nwp_functional <- wp_sf_nga %>%\n  filter(status_clean %in%\n           c(\"Functional\",\n             \"Functional but not in use\",\n             \"Functional but needs repair\"))\n\n\n\n4.3.2 Non-functional Water Point\n\nwp_nonfunctional <- wp_sf_nga %>%\n  filter(status_clean %in%\n           c(\"Abandoned/Decommissioned\",\n             \"Abandoned\",\n             \"Non-Functional due to dry season\",\n             \"Non-Functional\",\n             \"Non functional due to dry season\"))\n\n\n\n4.3.3 Unknown Status Water Point\n\nwp_unknown <- wp_sf_nga %>%\n  filter(status_clean == \"unknown\")\n\n\n\n4.3.4 EDA on Derived sf data frames\n\n4.3.4.1 Filtering Functional Water Point\n\nwp_functional <- wp_sf_nga %>%\n  filter(status_clean %in%\n           c(\"Functional\",\n             \"Functional but not in use\",\n             \"Functional but needs repair\",\n             \"Functional, needs repair\",\n             \"Functional, not in use\"))\n\n\n\n4.3.4.2 Functional Status Clean\n\nfunModeling::freq(data = wp_functional,\n     input = 'status_clean')\n\n\n\n\n                 status_clean frequency percentage cumulative_perc\n1                  Functional     47228      87.65           87.65\n2    Functional, needs repair      4792       8.89           96.54\n3      Functional, not in use      1775       3.29           99.83\n4   Functional but not in use        86       0.16           99.99\n5 Functional but needs repair         4       0.01          100.00\n\n\n\n\n4.3.4.3 Non-Functional\n\nwp_nonfunctional <- wp_sf_nga %>%\n  filter(status_clean %in%\n           c(\"Abandoned/Decommissioned\",\n             \"Non-Functional due to dry season\",\n             \"Non-Functional\",\n             \"Non-functional, dry\"))\n\n\n\n4.3.4.4 Non-Functional Status Clean\n\nfunModeling::freq(data = wp_nonfunctional,\n     input = 'status_clean')\n\n\n\n\n                      status_clean frequency percentage cumulative_perc\n1                   Non-Functional     30638      98.94           98.94\n2         Abandoned/Decommissioned       321       1.04           99.98\n3 Non-Functional due to dry season         7       0.02          100.00\n\n\n\n\n4.3.4.5 Unknown\n\nwp_unknown <- wp_sf_nga %>%\n  filter(status_clean == \"unknown\")\n\n\n\n4.3.4.6 Unknown Status Clean\n\nfunModeling::freq(data = wp_unknown,\n     input = 'status_clean')\n\n\n\n\n  status_clean frequency percentage cumulative_perc\n1      unknown     10154        100             100"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#performing-point-in-polygon-count",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#performing-point-in-polygon-count",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "4.4 Performing Point-in-Polygon Count",
    "text": "4.4 Performing Point-in-Polygon Count\n\nNGA_wp <- NGA %>% \n  mutate(`total_wp` = lengths(\n    st_intersects(NGA, wp_sf_nga))) %>%\n  mutate(`wp_functional` = lengths(\n    st_intersects(NGA, wp_functional))) %>%\n  mutate(`wp_nonfunctional` = lengths(\n    st_intersects(NGA, wp_nonfunctional))) %>%\n  mutate(`wp_unknown` = lengths(\n    st_intersects(NGA, wp_unknown)))"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualizing-attributes-using-statistical-graphs",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualizing-attributes-using-statistical-graphs",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "4.5 Visualizing attributes using statistical graphs",
    "text": "4.5 Visualizing attributes using statistical graphs\n\nggplot(data = NGA_wp,\n       aes(x = total_wp)) + \n  geom_histogram(bins=20,\n                 color=\"black\",\n                 fill=\"light blue\") +\n  geom_vline(aes(xintercept=mean(\n    total_wp, na.rm=T)),\n             color=\"red\", \n             linetype=\"dashed\", \n             size=0.8) +\n  ggtitle(\"Distribution of total water points by LGA\") +\n  xlab(\"No. of water points\") +\n  ylab(\"No. of\\nLGAs\") +\n  theme(axis.title.y=element_text(angle = 0))"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#saving-analytical-data-in-rds-format",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#saving-analytical-data-in-rds-format",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "4.6 Saving Analytical Data in RDS Format",
    "text": "4.6 Saving Analytical Data in RDS Format\n\nwrite_rds(NGA_wp, \"data/rds/NGA_wp.rds\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#quick-choropleth-plotting-using-tmap",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#quick-choropleth-plotting-using-tmap",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "5.1 Quick Choropleth Plotting using tmap",
    "text": "5.1 Quick Choropleth Plotting using tmap\n\ntmap_mode(\"plot\")\nqtm(NGA_wp, \n    fill = \"wp_functional\", \"wp_nonfunctional\") +\n  tm_layout(main.title = \"Water Points\",\n            bg.color = \"lightblue\") +\n  tm_graticules()"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualising-distribution-of-non-functional-water-point",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualising-distribution-of-non-functional-water-point",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "5.2 Visualising distribution of non-functional water point",
    "text": "5.2 Visualising distribution of non-functional water point\n\np1 <- tm_shape(NGA_wp) +\n  tm_fill(\"wp_functional\",\n          n = 10,\n          style = \"equal\",\n          palette = \"Blues\") +\n  tm_borders(lwd = 0.1,\n             alpha = 1) +\n  tm_layout(main.title = \"Distribution of functional water point by LGAs\",\n            legend.outside = FALSE)\n\n\np2 <- tm_shape(NGA_wp) +\n  tm_fill(\"total_wp\",\n          n = 10,\n          style = \"equal\",\n          palette = \"Blues\") +\n  tm_borders(lwd = 0.1,\n             alpha = 1) +\n  tm_layout(main.title = \"Distribution of total  water point by LGAs\",\n            legend.outside = FALSE)\n\n\ntmap_arrange(p2, p1, nrow = 1)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#choropleth-map-for-rates",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#choropleth-map-for-rates",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "5.3 Choropleth Map for Rates",
    "text": "5.3 Choropleth Map for Rates\n\n5.3.1 Deriving Proportion of Functional and Non-Functional Water Points\n\nNGA_wp <- NGA_wp %>%\n  mutate(pct_functional = wp_functional/total_wp) %>%\n  mutate(pct_nonfunctional = wp_nonfunctional/total_wp)\n\n\n\n5.3.2 Plotting Map of Rate\n\ntm_shape(NGA_wp) +\n  tm_fill(\"pct_functional\",\n          n = 10,\n          style = \"equal\",\n          palette = \"Blues\",\n          legend.hist = TRUE) +\n  tm_borders(lwd = 0.1,\n             alpha = 1) +\n  tm_layout(main.title = \"Rate map of functional water point by LGAs\",\n            legend.outside = TRUE)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#highlighting-extreme-value-maps",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#highlighting-extreme-value-maps",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "5.4 Highlighting Extreme Value Maps",
    "text": "5.4 Highlighting Extreme Value Maps\nThe percentile map is a special type of quantile map with six specific categories: 0-1%,1-10%, 10-50%,50-90%,90-99%, and 99-100%.\n\n5.4.1 Data Prep\nStep 1: Exclude NA records\n\nNGA_wp <- NGA_wp %>%\n  drop_na()\n\nStep 2: Creating customised classification and extracting values\n\npercent <- c(0,.01,.1,.5,.9,.99,1)\nvar <- NGA_wp[\"pct_functional\"] %>%\n  st_set_geometry(NULL)\nquantile(var[,1], percent)\n\n        0%         1%        10%        50%        90%        99%       100% \n0.00000000 0.06837607 0.22727273 0.48404255 0.86206897 1.00000000 1.00000000 \n\n\n\n\n\n\n\n\nNote\n\n\n\nWhen variables are extracted from an sf data.frame, the geometry is extracted as well. For mapping and spatial manipulation, this is the expected behavior, but many base R functions cannot deal with the geometry. Specifically, the quantile() gives an error. As a result st_set_geomtry(NULL) is used to drop geomtry field.\n\n\n\n\n5.4.2 Creating get.var function\n\narguments:\n\nvname: variable name (as character, in quotes)\ndf: name of sf data frame\n\nreturns:\n\nv: vector with values (without a column name)\n\n\n\nget.var <- function(vname,df) {\n  v <- df[vname] %>% \n    st_set_geometry(NULL)\n  v <- unname(v[,1])\n  return(v)\n}\n\n\n\n5.4.3 Percentile Mapping Function\n\npercentmap <- function(vnam, df, legtitle=NA, mtitle=\"Percentile Map\"){\n  percent <- c(0,.01,.1,.5,.9,.99,1)\n  var <- get.var(vnam, df)\n  bperc <- quantile(var, percent)\n  tm_shape(df) +\n  tm_polygons() +\n  tm_shape(df) +\n     tm_fill(vnam,\n             title=legtitle,\n             breaks=bperc,\n             palette=\"Blues\",\n          labels=c(\"< 1%\", \"1% - 10%\", \"10% - 50%\", \"50% - 90%\", \"90% - 99%\", \"> 99%\"))  +\n  tm_borders() +\n  tm_layout(main.title = mtitle, \n            title.position = c(\"right\",\"bottom\"))\n}\n\n\n\n5.4.4 Testing Percentile Mapping Function\n\npercentmap(\"total_wp\", NGA_wp)\n\n\n\n\n\n\n5.4.5 Box Mapping\n\nggplot(data = NGA_wp,\n       aes(x = \"\",\n           y = wp_nonfunctional)) +\n  geom_boxplot()\n\n\n\n\n\n\n5.4.6 Creating boxbreaks Function\n\narguments:\n\nv: vector with observations\nmult: multiplier for IQR (default 1.5)\n\nreturns:\n\nbb: vector with 7 break points compute quartile and fences\n\n\n\nboxbreaks <- function(v,mult=1.5) {\n  qv <- unname(quantile(v))\n  iqr <- qv[4] - qv[2]\n  upfence <- qv[4] + mult * iqr\n  lofence <- qv[2] - mult * iqr\n  # initialize break points vector\n  bb <- vector(mode=\"numeric\",length=7)\n  # logic for lower and upper fences\n  if (lofence < qv[1]) {  # no lower outliers\n    bb[1] <- lofence\n    bb[2] <- floor(qv[1])\n  } else {\n    bb[2] <- lofence\n    bb[1] <- qv[1]\n  }\n  if (upfence > qv[5]) { # no upper outliers\n    bb[7] <- upfence\n    bb[6] <- ceiling(qv[5])\n  } else {\n    bb[6] <- upfence\n    bb[7] <- qv[5]\n  }\n  bb[3:5] <- qv[2:4]\n  return(bb)\n}\n\n\n\n5.4.7 Creating get.var Function\n\narguments:\n\nvname: variable name (as character, in quotes)\ndf: name of sf data frame\n\nreturns:\n\nv: vector with values (without a column name)\n\n\n\nget.var <- function(vname,df) {\n  v <- df[vname] %>% st_set_geometry(NULL)\n  v <- unname(v[,1])\n  return(v)\n}\n\n\n\n5.4.8 Testing boxbreaks Function\n\nvar <- get.var(\"wp_nonfunctional\", NGA_wp) \nboxbreaks(var)\n\n[1] -53.5   0.0  14.0  34.0  59.0 126.5 252.0\n\n\n\nboxmap <- function(vnam, df, \n                   legtitle=NA,\n                   mtitle=\"Box Map\",\n                   mult=1.5){\n  var <- get.var(vnam,df)\n  bb <- boxbreaks(var)\n  tm_shape(df) +\n    tm_polygons() +\n  tm_shape(df) +\n     tm_fill(vnam,title=legtitle,\n             breaks=bb,\n             palette=\"Blues\",\n          labels = c(\"lower outlier\", \n                     \"< 25%\", \n                     \"25% - 50%\", \n                     \"50% - 75%\",\n                     \"> 75%\", \n                     \"upper outlier\"))  +\n  tm_borders() +\n  tm_layout(main.title = mtitle, \n            title.position = c(\"left\",\n                               \"top\"))\n}\n\n\ntmap_mode(\"plot\")\nboxmap(\"wp_nonfunctional\", NGA_wp)\n\n\n\n\n\n\n5.4.9 Recode Zero\nRecode LGAs with zero total water point into NA.\n\nNGA_wp <- NGA_wp %>%\n  mutate(wp_functional = na_if(\n    total_wp, total_wp < 0))\n\n\n\n5.4.10 Filter Data to Osun State\n\nosun_data <- subset(NGA_wp, ADM1_EN == \"Osun\")\n\nChecking out the data\n\nhead(osun_data)\n\nSimple feature collection with 6 features and 10 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 189625.6 ymin: 338755.8 xmax: 272238.5 ymax: 447175.5\nProjected CRS: Minna / Nigeria Mid Belt\n           ADM2_EN ADM2_PCODE ADM1_EN ADM1_PCODE total_wp wp_functional\n27        Aiyedade   NG030001    Osun      NG030      406           406\n28        Aiyedire   NG030002    Osun      NG030      179           179\n69  Atakumosa East   NG030003    Osun      NG030      228           228\n70  Atakumosa West   NG030004    Osun      NG030      267           267\n118     Boluwaduro   NG030005    Osun      NG030      131           131\n122         Boripe   NG030006    Osun      NG030      179           179\n    wp_nonfunctional wp_unknown pct_functional pct_nonfunctional\n27               141         78      0.4088670         0.3472906\n28                51         29      0.5083799         0.2849162\n69                93         33      0.4385965         0.4078947\n70               104         32      0.4531835         0.3895131\n118               49         15      0.4961832         0.3740458\n122               82         13      0.4636872         0.4581006\n                          geometry\n27  MULTIPOLYGON (((213526.6 34...\n28  MULTIPOLYGON (((212542.6 40...\n69  MULTIPOLYGON (((265746.8 37...\n70  MULTIPOLYGON (((248871.4 40...\n118 MULTIPOLYGON (((266092.2 43...\n122 MULTIPOLYGON (((255072.5 43...\n\n\n\n\n5.4.11 Osun’s Functional Water Points\n\ntm_shape(osun_data) +\n  tm_fill(\"wp_functional\",\n          n = 10,\n          style = \"equal\",\n          palette = \"Blues\")\n\n\n\n\n\n5.4.11.1 Osun’s Functional Water Points (Percentile Mapping)\n\npercentmap(\"wp_functional\", osun_data)\n\n\n\n\n\n\n5.4.11.2 Osun’s Functional Water Points (Box Mapping)\n\nboxmap(\"wp_functional\", osun_data)\n\n\n\n\n\n\n\n5.4.12 Osun’s Non-Functional Water Points\n\ntm_shape(osun_data) +\n  tm_fill(\"wp_nonfunctional\",\n          n = 10,\n          style = \"equal\",\n          palette = \"Blues\")\n\n\n\n\n\n5.4.12.1 Osun’s Non-Functional Water Points (Percentile Mapping)\n\npercentmap(\"wp_nonfunctional\", osun_data)\n\n\n\n\n\n\n5.4.12.2 Osun’s Non-Functional Water Points (Box Mapping)\n\nboxmap(\"wp_nonfunctional\", osun_data)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#converting-sf-data-frames-to-sps-spatial-class",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#converting-sf-data-frames-to-sps-spatial-class",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "6.1 Converting sf data frames to sp’s Spatial class",
    "text": "6.1 Converting sf data frames to sp’s Spatial class\n\nosun <- as_Spatial(osun_data)\nfunctional <- as_Spatial(wp_functional)\nnonfunctional <- as_Spatial(wp_nonfunctional)\n\nChecking the data\n\nosun\n\nclass       : SpatialPolygonsDataFrame \nfeatures    : 30 \nextent      : 176503.2, 291043.8, 331434.7, 454520.1  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 10\nnames       :  ADM2_EN, ADM2_PCODE, ADM1_EN, ADM1_PCODE, total_wp, wp_functional, wp_nonfunctional, wp_unknown,    pct_functional, pct_nonfunctional \nmin values  : Aiyedade,   NG030001,    Osun,      NG030,       89,            89,               17,          4,  0.33587786259542, 0.107594936708861 \nmax values  :   Osogbo,   NG030030,    Osun,      NG030,      495,           495,              141,         78, 0.662162162162162, 0.603053435114504 \n\n\n\nfunctional\n\nclass       : SpatialPointsDataFrame \nfeatures    : 53885 \nextent      : 29322.63, 1293137, 33758.37, 1092629  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 1\nnames       :           status_clean \nmin values  :             Functional \nmax values  : Functional, not in use \n\n\n\nnonfunctional\n\nclass       : SpatialPointsDataFrame \nfeatures    : 30966 \nextent      : 28907.91, 1293293, 33736.93, 1092883  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 1\nnames       :                     status_clean \nmin values  :         Abandoned/Decommissioned \nmax values  : Non-Functional due to dry season"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#converting-spatial-class-to-generic-sp-format",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#converting-spatial-class-to-generic-sp-format",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "6.2 Converting Spatial Class to Generic sp Format",
    "text": "6.2 Converting Spatial Class to Generic sp Format\n\nosun_sp <- as(osun, \"SpatialPolygons\")\nfunctional_sp <- as(functional, \"SpatialPoints\")\nnonfunctional_sp <- as(nonfunctional, \"SpatialPoints\")\n\nChecking Data\n\nosun_sp\n\nclass       : SpatialPolygons \nfeatures    : 30 \nextent      : 176503.2, 291043.8, 331434.7, 454520.1  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \n\n\n\nfunctional_sp\n\nclass       : SpatialPoints \nfeatures    : 53885 \nextent      : 29322.63, 1293137, 33758.37, 1092629  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \n\n\n\nnonfunctional_sp\n\nclass       : SpatialPoints \nfeatures    : 30966 \nextent      : 28907.91, 1293293, 33736.93, 1092883  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#converting-generic-sp-format-into-spatstats-ppp-format",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#converting-generic-sp-format-into-spatstats-ppp-format",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "6.3 Converting Generic sp Format into Spatstat’s ppp Format",
    "text": "6.3 Converting Generic sp Format into Spatstat’s ppp Format\n\nfunctional_ppp <- as(functional_sp, \"ppp\")\nfunctional_ppp\n\nPlanar point pattern: 53885 points\nwindow: rectangle = [29322.6, 1293137] x [33758.4, 1092628.9] units\n\n\n\nnonfunctional_ppp <- as(nonfunctional_sp, \"ppp\")\nnonfunctional_sp\n\nclass       : SpatialPoints \nfeatures    : 30966 \nextent      : 28907.91, 1293293, 33736.93, 1092883  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \n\n\n\n6.3.1 Plotting functional_ppp and summary\n\nplot(functional_ppp)\n\n\n\n\n\nsummary(functional_ppp)\n\nPlanar point pattern:  53885 points\nAverage intensity 4.02663e-08 points per square unit\n\nCoordinates are given to 2 decimal places\ni.e. rounded to the nearest multiple of 0.01 units\n\nWindow: rectangle = [29322.6, 1293137] x [33758.4, 1092628.9] units\n                    (1264000 x 1059000 units)\nWindow area = 1.33822e+12 square units\n\n\n\n\n6.3.2 Plotting nonfunctional_ppp and summary\n\nplot(nonfunctional_ppp)\n\n\n\n\n\nsummary(nonfunctional_ppp)\n\nPlanar point pattern:  30966 points\nAverage intensity 2.312332e-08 points per square unit\n\nCoordinates are given to 2 decimal places\ni.e. rounded to the nearest multiple of 0.01 units\n\nWindow: rectangle = [28907.9, 1293292.9] x [33736.9, 1092882.6] units\n                    (1264000 x 1059000 units)\nWindow area = 1.33917e+12 square units"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#handing-duplicated-points-example",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#handing-duplicated-points-example",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "6.4 Handing Duplicated Points (Example)",
    "text": "6.4 Handing Duplicated Points (Example)\nFor our case, based on the summary, there is no warnings about duplicated data\n\nany(duplicated(functional_ppp))\n\n[1] FALSE\n\n\n\nany(duplicated(nonfunctional_ppp))\n\n[1] FALSE\n\n\n\n6.4.1 Checking using another method (jittering)\nWe will not be using the _jit files below as this is just another method of checking duplicates and replacing them.\n\nfunctional_ppp_jit <- rjitter(functional_ppp,\n                              retry=TRUE,\n                              nsim=1,\n                              drop=TRUE)\n\n\nnonfunctional_ppp_jit <- rjitter(nonfunctional_ppp,\n                              retry=TRUE,\n                              nsim=1,\n                              drop=TRUE)\n\n\nany(duplicated(functional_ppp_jit))\n\n[1] FALSE\n\n\n\nany(duplicated(nonfunctional_ppp_jit))\n\n[1] FALSE"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#creating-owin-object",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#creating-owin-object",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "6.5 Creating owin Object",
    "text": "6.5 Creating owin Object\n\nosun_owin <- as(osun_sp, \"owin\")\n\nPlotting\n\nplot(osun_owin)\n\n\n\n\nSummary\n\nsummary(osun_owin)\n\nWindow: polygonal boundary\n30 separate polygons (no holes)\n            vertices      area relative.area\npolygon 1        204 766084000       0.08870\npolygon 2         81 304399000       0.03520\npolygon 3         97 465688000       0.05390\npolygon 4        124 373051000       0.04320\npolygon 5         60 149473000       0.01730\npolygon 6         84 144820000       0.01680\npolygon 7         50 102243000       0.01180\npolygon 8         72 216002000       0.02500\npolygon 9        112 269897000       0.03130\npolygon 10       125 365142000       0.04230\npolygon 11        83 111191000       0.01290\npolygon 12       126 192557000       0.02230\npolygon 13       219 904397000       0.10500\npolygon 14       174 741131000       0.08580\npolygon 15        81 138742000       0.01610\npolygon 16        65 119452000       0.01380\npolygon 17        90 280205000       0.03240\npolygon 18        69  69814600       0.00808\npolygon 19        69  42727500       0.00495\npolygon 20        49  30458800       0.00353\npolygon 21        62 263505000       0.03050\npolygon 22        93 438930000       0.05080\npolygon 23        87 274127000       0.03170\npolygon 24       105 509979000       0.05910\npolygon 25        98 292058000       0.03380\npolygon 26        64 327765000       0.03800\npolygon 27       133 108945000       0.01260\npolygon 28       122 462169000       0.05350\npolygon 29        94 109715000       0.01270\npolygon 30        95  61239800       0.00709\nenclosing rectangle: [176503.22, 291043.82] x [331434.7, 454520.1] units\n                     (114500 x 123100 units)\nWindow area = 8635910000 square units\nFraction of frame area: 0.613"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#combining-point-events-object-and-owin-object",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#combining-point-events-object-and-owin-object",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "6.6 Combining Point Events Object and owin Object",
    "text": "6.6 Combining Point Events Object and owin Object\n\nfunctionalOsun_ppp = functional_ppp[osun_owin]\nnonfunctionalOsun_ppp = nonfunctional_ppp[osun_owin]\n\nFunctional\n\nsummary(functionalOsun_ppp)\n\nPlanar point pattern:  2740 points\nAverage intensity 3.1728e-07 points per square unit\n\nCoordinates are given to 2 decimal places\ni.e. rounded to the nearest multiple of 0.01 units\n\nWindow: polygonal boundary\n30 separate polygons (no holes)\n            vertices      area relative.area\npolygon 1        204 766084000       0.08870\npolygon 2         81 304399000       0.03520\npolygon 3         97 465688000       0.05390\npolygon 4        124 373051000       0.04320\npolygon 5         60 149473000       0.01730\npolygon 6         84 144820000       0.01680\npolygon 7         50 102243000       0.01180\npolygon 8         72 216002000       0.02500\npolygon 9        112 269897000       0.03130\npolygon 10       125 365142000       0.04230\npolygon 11        83 111191000       0.01290\npolygon 12       126 192557000       0.02230\npolygon 13       219 904397000       0.10500\npolygon 14       174 741131000       0.08580\npolygon 15        81 138742000       0.01610\npolygon 16        65 119452000       0.01380\npolygon 17        90 280205000       0.03240\npolygon 18        69  69814600       0.00808\npolygon 19        69  42727500       0.00495\npolygon 20        49  30458800       0.00353\npolygon 21        62 263505000       0.03050\npolygon 22        93 438930000       0.05080\npolygon 23        87 274127000       0.03170\npolygon 24       105 509979000       0.05910\npolygon 25        98 292058000       0.03380\npolygon 26        64 327765000       0.03800\npolygon 27       133 108945000       0.01260\npolygon 28       122 462169000       0.05350\npolygon 29        94 109715000       0.01270\npolygon 30        95  61239800       0.00709\nenclosing rectangle: [176503.22, 291043.82] x [331434.7, 454520.1] units\n                     (114500 x 123100 units)\nWindow area = 8635910000 square units\nFraction of frame area: 0.613\n\n\n\nplot(functionalOsun_ppp)\n\n\n\n\nNon-Functional\n\nsummary(nonfunctionalOsun_ppp)\n\nPlanar point pattern:  2032 points\nAverage intensity 2.352967e-07 points per square unit\n\nCoordinates are given to 2 decimal places\ni.e. rounded to the nearest multiple of 0.01 units\n\nWindow: polygonal boundary\n30 separate polygons (no holes)\n            vertices      area relative.area\npolygon 1        204 766084000       0.08870\npolygon 2         81 304399000       0.03520\npolygon 3         97 465688000       0.05390\npolygon 4        124 373051000       0.04320\npolygon 5         60 149473000       0.01730\npolygon 6         84 144820000       0.01680\npolygon 7         50 102243000       0.01180\npolygon 8         72 216002000       0.02500\npolygon 9        112 269897000       0.03130\npolygon 10       125 365142000       0.04230\npolygon 11        83 111191000       0.01290\npolygon 12       126 192557000       0.02230\npolygon 13       219 904397000       0.10500\npolygon 14       174 741131000       0.08580\npolygon 15        81 138742000       0.01610\npolygon 16        65 119452000       0.01380\npolygon 17        90 280205000       0.03240\npolygon 18        69  69814600       0.00808\npolygon 19        69  42727500       0.00495\npolygon 20        49  30458800       0.00353\npolygon 21        62 263505000       0.03050\npolygon 22        93 438930000       0.05080\npolygon 23        87 274127000       0.03170\npolygon 24       105 509979000       0.05910\npolygon 25        98 292058000       0.03380\npolygon 26        64 327765000       0.03800\npolygon 27       133 108945000       0.01260\npolygon 28       122 462169000       0.05350\npolygon 29        94 109715000       0.01270\npolygon 30        95  61239800       0.00709\nenclosing rectangle: [176503.22, 291043.82] x [331434.7, 454520.1] units\n                     (114500 x 123100 units)\nWindow area = 8635910000 square units\nFraction of frame area: 0.613\n\n\n\nplot(nonfunctionalOsun_ppp)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#rescalling-kde-values",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#rescalling-kde-values",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "7.1 Rescalling KDE Values",
    "text": "7.1 Rescalling KDE Values\nMaking sure all is in KM\n\nfunctionalOsun_ppp.km <- rescale(functionalOsun_ppp, 1000, \"km\")\nnonfunctionalOsun_ppp.km <- rescale(nonfunctionalOsun_ppp, 1000, \"km\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#kernel-density-estimation",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#kernel-density-estimation",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "7.2 Kernel Density Estimation",
    "text": "7.2 Kernel Density Estimation\nChecking sigma value\n\nbw <- bw.diggle(functionalOsun_ppp)\nbw\n\n   sigma \n252.1687 \n\n\nValue is too small, thus we shall change it to use bw.CvL, automatic bandwidth calcuation\n\nbw.CvL(functionalOsun_ppp.km)\n\n   sigma \n4.758547 \n\n\n\n7.2.1 Functional\n\nkde_functionalOsun_bw <- density(functionalOsun_ppp.km,\n                                 sigma=bw.CvL,\n                                 edge=TRUE,\n                                 kernel=\"gaussian\")\n\nPlotting\n\nplot(kde_functionalOsun_bw)\n\n\n\n\n\n\n7.2.2 Non-Functional\n\nkde_nonfunctionalOsun_bw <- density(nonfunctionalOsun_ppp.km,\n                                 sigma=bw.CvL,\n                                 edge=TRUE,\n                                 kernel=\"gaussian\")\n\nPlotting\n\nplot(kde_nonfunctionalOsun_bw)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#converting-kde-output-into-grid-object",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#converting-kde-output-into-grid-object",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "7.3 Converting KDE Output into Grid Object",
    "text": "7.3 Converting KDE Output into Grid Object"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#functional-1",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#functional-1",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "7.3.1 Functional",
    "text": "7.3.1 Functional\n\ngridded_kde_functionalOsun_bw <- as.SpatialGridDataFrame.im(kde_functionalOsun_bw)\nspplot(gridded_kde_functionalOsun_bw)\n\n\n\n\n\n7.3.2 Non-Functional\n\ngridded_kde_nonfunctionalOsun_bw <- as.SpatialGridDataFrame.im(kde_nonfunctionalOsun_bw)\nspplot(gridded_kde_nonfunctionalOsun_bw)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#converting-grid-output-into-raster",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#converting-grid-output-into-raster",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "7.4 Converting Grid Output into Raster",
    "text": "7.4 Converting Grid Output into Raster\n\n7.4.2 Non-Functional\n\nkde_nonfunctionalOsun_bw_raster <- raster(gridded_kde_nonfunctionalOsun_bw)\n\n\nkde_nonfunctionalOsun_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : NA \nsource     : memory\nnames      : v \nvalues     : 0.005208353, 0.5528269  (min, max)\n\n\nAssigning Projection System\n\nprojection(kde_nonfunctionalOsun_bw_raster) <- CRS(\"+init=EPSG:26392 +datum=WGS84 +units=km\")\nkde_nonfunctionalOsun_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : +init=EPSG:26392 +datum=WGS84 +units=km \nsource     : memory\nnames      : v \nvalues     : 0.005208353, 0.5528269  (min, max)\n\n\n\n\n7.4.2 Functional\n\nkde_functionalOsun_bw_raster <- raster(gridded_kde_functionalOsun_bw)\n\n\nkde_functionalOsun_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : NA \nsource     : memory\nnames      : v \nvalues     : 8.734437e-05, 2.073193  (min, max)\n\n\nAssigning Projection System\n\nprojection(kde_functionalOsun_bw_raster) <- CRS(\"+init=EPSG:26392 +datum=WGS84 +units=km\")\nkde_functionalOsun_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : +init=EPSG:26392 +datum=WGS84 +units=km \nsource     : memory\nnames      : v \nvalues     : 8.734437e-05, 2.073193  (min, max)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualising-in-tmap",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#visualising-in-tmap",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "7.5 Visualising in tmap",
    "text": "7.5 Visualising in tmap\n\n7.5.1 Functional\n\ntmap_mode(\"view\") +\n  tm_shape(kde_functionalOsun_bw_raster) + \n  tm_basemap(\"OpenStreetMap\") +\n  tm_raster(\"v\") +\n  tm_layout(legend.position = c(\"right\", \"bottom\"), frame = FALSE)\n\n\n\n\n\n\n\n7.5.2 Non-Functional\n\ntmap_mode(\"view\") +\n  tm_shape(kde_nonfunctionalOsun_bw_raster) + \n  tm_basemap(\"OpenStreetMap\") +\n  tm_raster(\"v\") +\n  tm_layout(legend.position = c(\"right\", \"bottom\"), frame = FALSE)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#point-map",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#point-map",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "7.6 Point Map",
    "text": "7.6 Point Map\n\n7.6.1 Importing Data for Point Map\n\nwp_nga_filter <- read_csv(\"data/aspatial/WPdx.csv\")\n\n\n\n7.6.2 Filtering for Point Map\n\nwp_nga_filter <- wp_nga_filter %>% \n  rename(clean_adm1 = '#clean_adm1')\n\n\nwp_nga_filter <- wp_nga_filter %>% \n  rename(status_clean = '#status_clean')\n\n\nwp_nga_filter <- subset(wp_nga_filter, clean_adm1 == \"Osun\")\n\n\nwp_nga_filter$Geometry = st_as_sfc(wp_nga_filter$`New Georeferenced Column`)\nwp_nga_filter\n\n# A tibble: 5,745 × 75\n   row_id `#source`      #lat_…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷\n    <dbl> <chr>            <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 225950 Federal Minis…    7.43    4.26 05/05/… Yes     Boreho… Well    Hand P…\n 2 225524 Federal Minis…    7.78    4.56 04/22/… Yes     Protec… Well    Hand P…\n 3 197014 Federal Minis…    7.49    4.53 04/30/… Yes     Boreho… Well    Mechan…\n 4 225173 Federal Minis…    7.93    4.73 05/02/… Yes     Boreho… Well    Hand P…\n 5 225843 Federal Minis…    7.74    4.44 05/08/… Yes     Boreho… Well    Hand P…\n 6 235508 Federal Minis…    7.15    4.64 04/27/… Yes     Protec… Well    Hand P…\n 7 197708 Federal Minis…    7.87    4.72 05/13/… Yes     Boreho… Well    Mechan…\n 8 195041 Federal Minis…    7.73    4.45 06/17/… Yes     Protec… Spring  <NA>   \n 9 225222 Federal Minis…    7.81    4.15 05/14/… Yes     Protec… Spring  Mechan…\n10 460770 GRID3             7.4     4.33 06/13/… Unknown Boreho… Well    <NA>   \n# … with 5,735 more rows, 66 more variables: `#water_tech_category` <chr>,\n#   `#facility_type` <chr>, `#clean_country_name` <chr>, clean_adm1 <chr>,\n#   `#clean_adm2` <chr>, `#clean_adm3` <lgl>, `#clean_adm4` <lgl>,\n#   `#install_year` <dbl>, `#installer` <lgl>, `#rehab_year` <lgl>,\n#   `#rehabilitator` <lgl>, `#management_clean` <chr>, status_clean <chr>,\n#   `#pay` <chr>, `#fecal_coliform_presence` <lgl>,\n#   `#fecal_coliform_value` <lgl>, `#subjective_quality` <chr>, …\n\n\n\nwp_nga_filter <- st_sf(wp_nga_filter, crs=4326)\nwp_nga_filter\n\nSimple feature collection with 5745 features and 74 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 4.032004 ymin: 7.060309 xmax: 5.06 ymax: 8.061898\nGeodetic CRS:  WGS 84\n# A tibble: 5,745 × 75\n   row_id `#source`      #lat_…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷\n *  <dbl> <chr>            <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 225950 Federal Minis…    7.43    4.26 05/05/… Yes     Boreho… Well    Hand P…\n 2 225524 Federal Minis…    7.78    4.56 04/22/… Yes     Protec… Well    Hand P…\n 3 197014 Federal Minis…    7.49    4.53 04/30/… Yes     Boreho… Well    Mechan…\n 4 225173 Federal Minis…    7.93    4.73 05/02/… Yes     Boreho… Well    Hand P…\n 5 225843 Federal Minis…    7.74    4.44 05/08/… Yes     Boreho… Well    Hand P…\n 6 235508 Federal Minis…    7.15    4.64 04/27/… Yes     Protec… Well    Hand P…\n 7 197708 Federal Minis…    7.87    4.72 05/13/… Yes     Boreho… Well    Mechan…\n 8 195041 Federal Minis…    7.73    4.45 06/17/… Yes     Protec… Spring  <NA>   \n 9 225222 Federal Minis…    7.81    4.15 05/14/… Yes     Protec… Spring  Mechan…\n10 460770 GRID3             7.4     4.33 06/13/… Unknown Boreho… Well    <NA>   \n# … with 5,735 more rows, 66 more variables: `#water_tech_category` <chr>,\n#   `#facility_type` <chr>, `#clean_country_name` <chr>, clean_adm1 <chr>,\n#   `#clean_adm2` <chr>, `#clean_adm3` <lgl>, `#clean_adm4` <lgl>,\n#   `#install_year` <dbl>, `#installer` <lgl>, `#rehab_year` <lgl>,\n#   `#rehabilitator` <lgl>, `#management_clean` <chr>, status_clean <chr>,\n#   `#pay` <chr>, `#fecal_coliform_presence` <lgl>,\n#   `#fecal_coliform_value` <lgl>, `#subjective_quality` <chr>, …\n\n\n\nwp_nga_filter <- wp_nga_filter %>%\n  st_transform(crs = 26392)\n\n\nwp_nga_filterpoint <- wp_nga_filter %>%\n  filter(status_clean == \"Functional\" | status_clean == \"Functional but not in use\" | status_clean == \"Functional but needs repair\" | status_clean == \"Functional, needs repair\" | status_clean == \"Functional, not in use\")\n\n\n\n7.4 Plotting of Point Map\n\nwp_nga_filter_point <- tmap_mode(\"view\")\n  tm_shape(wp_nga_filterpoint) +\n  tm_dots(col = \"status_clean\",\n             size = 0.01,\n             border.col = \"black\",\n             border.lwd = 0.5) +\n  tm_view(set.zoom.limits = c(9,11))"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#analysing-spatial-point-patterns-using-g-function",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#analysing-spatial-point-patterns-using-g-function",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "8.1 Analysing Spatial Point Patterns Using G Function",
    "text": "8.1 Analysing Spatial Point Patterns Using G Function\n\n8.1.1 Functional\n\nG_Functional = Gest(functionalOsun_ppp, correction = \"border\")\nplot(G_Functional, xlim=c(0,500))\n\n\n\n\n\n8.1.1.1 Performing Complete Spatial Randomness Test\nTo confirm the observed spatial patterns above, a hypothesis test will be conducted. The hypothesis and test are as follows:\nHo = The distribution of functional water points at Osun State, Nigeria, are randomly distributed.\nH1= The distribution of functional water points at Osun State, Nigeria are not randomly distributed.\nThe null hypothesis will be rejected if p-value is smaller than alpha value of 0.001.\nMonte Carlo test with G-function\n\nG_Functional.csr <- envelope(functionalOsun_ppp, Gest, nsim = 999)\n\nGenerating 999 simulations of CSR  ...\n1, 2, 3, ......10.........20.........30.........40.........50.........60........\n.70.........80.........90.........100.........110.........120.........130......\n...140.........150.........160.........170.........180.........190.........200....\n.....210.........220.........230.........240.........250.........260.........270..\n.......280.........290.........300.........310.........320.........330.........340\n.........350.........360.........370.........380.........390.........400........\n.410.........420.........430.........440.........450.........460.........470......\n...480.........490.........500.........510.........520.........530.........540....\n.....550.........560.........570.........580.........590.........600.........610..\n.......620.........630.........640.........650.........660.........670.........680\n.........690.........700.........710.........720.........730.........740........\n.750.........760.........770.........780.........790.........800.........810......\n...820.........830.........840.........850.........860.........870.........880....\n.....890.........900.........910.........920.........930.........940.........950..\n.......960.........970.........980.........990........ 999.\n\nDone.\n\n\n\nplot(G_Functional.csr)\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nIt can be seen that G(r) is above envelope which indicates that the functional water points are clustered. Hence we reject the null hypothesis that functional water points in Osun are randomly distributed.\n\n\n\n\n\n8.1.2 Non-Functional\n\nG_Functional = Gest(functionalOsun_ppp, correction = \"border\")\nplot(G_Functional, xlim=c(0,500))\n\n\n\n\n\n8.1.2.1 Performing Complete Spatial Randomness Test\n\nG_NonFunctional.csr <- envelope(nonfunctionalOsun_ppp, Gest, nsim = 999)\n\nGenerating 999 simulations of CSR  ...\n1, 2, 3, ......10.........20.........30.........40.........50.........60........\n.70.........80.........90.........100.........110.........120.........130......\n...140.........150.........160.........170.........180.........190.........200....\n.....210.........220.........230.........240.........250.........260.........270..\n.......280.........290.........300.........310.........320.........330.........340\n.........350.........360.........370.........380.........390.........400........\n.410.........420.........430.........440.........450.........460.........470......\n...480.........490.........500.........510.........520.........530.........540....\n.....550.........560.........570.........580.........590.........600.........610..\n.......620.........630.........640.........650.........660.........670.........680\n.........690.........700.........710.........720.........730.........740........\n.750.........760.........770.........780.........790.........800.........810......\n...820.........830.........840.........850.........860.........870.........880....\n.....890.........900.........910.........920.........930.........940.........950..\n.......960.........970.........980.........990........ 999.\n\nDone.\n\n\n\nplot(G_NonFunctional.csr)\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nSimilar to function water points, we can be seen that G(r) is above envelope which indicates that the non-functional water points are clustered. Hence we reject the null hypothesis that non-functional water points in Osun are randomly distributed."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#analysing-spatial-point-patterns-using-l-function",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#analysing-spatial-point-patterns-using-l-function",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "8.2 Analysing Spatial Point Patterns Using L Function",
    "text": "8.2 Analysing Spatial Point Patterns Using L Function\n\n8.2.1 Functional\n{r}\nL_fun = Lest(functionalOsun_ppp, correction = \"Ripley\")\nplot(L_fun, . -r ~ r, \n     ylab= \"L(d)-r\", xlab = \"d(m)\")\n\n{r}\nL_fun.csr <- envelope(functionalOsun_ppp, Lest, nsim = 39, rank = 1, glocal=TRUE)\nplot(L_fun.csr, . - r ~ r, xlab=\"d\", ylab=\"L(d)-r\")\n\n\n\n\n\n\n\nNote\n\n\n\nIt can be seen that L(d)-r is above the envelope which indicates that the functional water points are clustered. Hence we reject the null hypothesis that functional water points in Osun are randomly distributed.\n\n\n\n\n8.2.2 Non-Functional\n{r}\nL_nonfun = Lest(nonfunctionalOsun_ppp, correction = \"Ripley\")\nplot(L_nonfun, . -r ~ r, \n     ylab= \"L(d)-r\", xlab = \"d(m)\")\n\n{r}\nL_nonfun.csr <- envelope(nonfunctionalOsun_ppp, Lest, nsim = 39, rank = 1, glocal=TRUE)\nplot(L_nonfun.csr, . - r ~ r, xlab=\"d\", ylab=\"L(d)-r\")\n\n\n\n\n\n\n\nNote\n\n\n\nSimilar to functional, it can be seen that L(d)-r is above the envelope which indicates that the non-functional water points are clustered. Hence we reject the null hypothesis that non-functional water points in Osun are randomly distributed."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#prepping-nearest-neighbor-data",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#prepping-nearest-neighbor-data",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "9.1 Prepping Nearest Neighbor Data",
    "text": "9.1 Prepping Nearest Neighbor Data\n\nwp_sf_osun <- wp_sf %>% \n  rename(status_clean = '#status_clean') %>%\n  rename(lat = '#lat_deg') %>%\n  rename(lng = '#lon_deg') %>%\n  rename(clean_adm1 = '#clean_adm1') %>%\n  mutate(status_clean = replace_na(\n    status_clean, \"unknown\"))\n\n\nwp_sf_osun_filter <- subset(wp_sf_osun, clean_adm1 == \"Osun\")\n\n\nwp_sf_osun_filter <- wp_sf_osun_filter %>%\n  dplyr::select(status_clean, lat, lng)\n\n\nnb <- include_self(\n  st_knn(st_geometry(wp_sf_osun_filter), 6))"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#computing-kernel-weights",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#computing-kernel-weights",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "9.2 Computing Kernel Weights",
    "text": "9.2 Computing Kernel Weights\n\nwt <- st_kernel_weights(nb, \n                        wp_sf_osun_filter, \n                        \"gaussian\", \n                        adaptive = TRUE)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#preparing-vector-list",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#preparing-vector-list",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "9.3 Preparing Vector List",
    "text": "9.3 Preparing Vector List\n\nfunctional_Wp <- wp_sf_osun_filter %>%\n  filter(status_clean %in%\n           c(\"Functional\",\n             \"Functional but not in use\",\n             \"Functional but needs repair\",\n             \"Functional, needs repair\",\n             \"Functional, not in use\"))\nA <- functional_Wp$status_clean\n\n\nnonfunctional_Wp <- wp_sf_osun_filter %>%\n  filter(status_clean %in%\n           c(\"Abandoned/Decommissioned\",\n             \"Non-Functional due to dry season\",\n             \"Non-Functional\",\n             \"Non-functional, dry\"))\nB <- nonfunctional_Wp$status_clean"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#computing-lclq",
    "href": "Take-Home_Ex/Take-Home_Ex01/Take-Home_Ex01.html#computing-lclq",
    "title": "Take Home Exercise 1: Application of Spatial Point Patterns Analysis to discover the geographical distribution of functional and non-function water points in Osun State, Nigeria",
    "section": "9.4 Computing LCLQ",
    "text": "9.4 Computing LCLQ\n\nLCLQ <- local_colocation(A, B, nb, wt, 39)\n\nJoining of output table\n\nLCLQ_WP <- cbind(wp_sf_osun_filter, LCLQ)\n\nPlotting of chart\n\ntmap_mode(\"view\")\ntm_shape(LCLQ_WP)+ \n  tm_dots(col = \"Non.Functional\",\n             size = 0.01,\n             border.col = \"black\",\n             border.lwd = 0.5) +\n  tm_view(set.zoom.limits = c(9, 16))\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nSo with the LCQ of 1.007, it is more than 1. Thus, features of functional water points are more likely to have features of non-functional water point within the neighborhood itself."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "",
    "text": "Since late December 2019, an outbreak of a novel coronavirus disease (COVID-19; previously known as 2019-nCoV) was reported in Wuhan, China, which had subsequently affected 210 countries worldwide. In general, COVID-19 is an acute resolved disease but it can also be deadly, with a 2% case fatality rate.\nThe COVID-19 vaccination in Indonesia is an ongoing mass immunisation in response to the COVID-19 pandemic in Indonesia. On 13 January 2021, the program commenced when President Joko Widodo was vaccinated at the presidential palace. In terms of total doses given, Indonesia ranks third in Asia and fifth in the world.\nAccording to wikipedia, as of 5 February 2023 at 18:00 WIB (UTC+7), 204,266,655 people had received the first dose of the vaccine and 175,131,893 people had been fully vaccinated; 69,597,474 of them had been inoculated with the booster or the third dose, while 1,585,164 had received the fourth dose. Jakarta has the highest percentage of population fully vaccinated with 103.46%, followed by Bali and Special Region of Yogyakarta with 85.45% and 83.02% respectively.\nDespite its compactness, the cumulative vaccination rate are not evenly distributed within DKI Jakarta. The question is where are the sub-districts with relatively higher number of vaccination rate and how they changed over time.\n\n\nExploratory Spatial Data Analysis (ESDA) hold tremendous potential to address complex problems facing society. In this study, you are tasked to apply appropriate Local Indicators of Spatial Association (LISA) and Emerging Hot Spot Analysis (EHSA) to undercover the spatio-temporal trends of COVID-19 vaccination in DKI Jakarta.\n\n\n\n\n\n\nCompute the monthly vaccination rate from July 2021 to June 2022 at sub-district (also known as kelurahan in Bahasa Indonesia) level,\nPrepare the monthly vaccination rate maps by using appropriate tmap functions,\nDescribe the spatial patterns revealed by the choropleth maps (not more than 200 words).\n\n\n\n\nWith reference to the vaccination rate maps prepared in ESDA:\n\nCompute local Gi* values of the monthly vaccination rate,\nDisplay the Gi* maps of the monthly vaccination rate. The maps should only display the significant (i.e. p-value < 0.05)\nWith reference to the analysis results, draw statistical conclusions (not more than 250 words).\n\n\n\n\nWith reference to the local Gi* values of the vaccination rate maps prepared in the previous section:\n\nPerform Mann-Kendall Test by using the spatio-temporal local Gi* values,\nSelect three sub-districts and describe the temporal trends revealed (not more than 250 words), and\nPrepared a EHSA map of the Gi* values of vaccination rate. The maps should only display the significant (i.e. p-value < 0.05).\nWith reference to the EHSA map prepared, describe the spatial patterns revelaed. (not more than 250 words).\n\n\n\n\n\n\n\nFor the purpose of this assignment, data from Riwayat File Vaksinasi DKI Jakarta will be used. Daily vaccination data are provides. You are only required to download either the first day of the month or last day of the month of the study period.\n\n\n\nFor the purpose of this study, DKI Jakarta administration boundary 2019 will be used. The data set can be downloaded at Indonesia Geospatial portal, specifically at this page.\n\n\n\n\n\n\nNote\n\n\n\n\nThe national Projected Coordinates Systems of Indonesia is DGN95 / Indonesia TM-3 zone 54.1.\nExclude all the outer islands from the DKI Jakarta sf data frame, and\nRetain the first nine fields in the DKI Jakarta sf data frame. The ninth field JUMLAH_PEN = Total Population."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#importing-of-packages",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#importing-of-packages",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "2.1 Importing of Packages",
    "text": "2.1 Importing of Packages\n\npacman::p_load(sf, tmap, tidyverse, sfdep, readxl, Kendall, plotly, plyr, zoo)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#handling-geospatial-data",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#handling-geospatial-data",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "2.2 Handling Geospatial Data",
    "text": "2.2 Handling Geospatial Data\n\n2.2.1 Importing Geospatial Data set\n\ngeoJAR <- st_read(dsn = \"data/geospatial/\",\n                  layer = \"BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA\") %>%\n  st_transform(crs=26392)\n\nReading layer `BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA' from data source \n  `C:\\Users\\Daniel\\Desktop\\Github\\IS419\\IS415-GAA\\Take-Home_Ex\\Take-Home_Ex02\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 269 features and 161 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 106.3831 ymin: -6.370815 xmax: 106.9728 ymax: -5.184322\nGeodetic CRS:  WGS 84\n\n\n\n\n2.2.2 Checking for Missing Values\n\nsum(is.na(geoJAR))\n\n[1] 14\n\nsapply(geoJAR, function(x) sum(is.na(x)))\n\n OBJECT_ID  KODE_DESA       DESA       KODE   PROVINSI   KAB_KOTA  KECAMATAN \n         0          0          0          0          0          2          2 \nDESA_KELUR JUMLAH_PEN  JUMLAH_KK LUAS_WILAY  KEPADATAN PERPINDAHA JUMLAH_MEN \n         2          0          0          0          0          0          0 \n PERUBAHAN  WAJIB_KTP      SILAM    KRISTEN   KHATOLIK      HINDU      BUDHA \n         0          0          0          0          0          0          0 \n  KONGHUCU KEPERCAYAA       PRIA     WANITA BELUM_KAWI      KAWIN CERAI_HIDU \n         0          0          0          0          0          0          0 \nCERAI_MATI         U0         U5        U10        U15        U20        U25 \n         0          0          0          0          0          0          0 \n       U30        U35        U40        U45        U50        U55        U60 \n         0          0          0          0          0          0          0 \n       U65        U70        U75 TIDAK_BELU BELUM_TAMA   TAMAT_SD       SLTP \n         0          0          0          0          0          0          0 \n      SLTA  DIPLOMA_I DIPLOMA_II DIPLOMA_IV  STRATA_II STRATA_III BELUM_TIDA \n         0          0          0          0          0          0          0 \nAPARATUR_P TENAGA_PEN WIRASWASTA  PERTANIAN    NELAYAN  AGAMA_DAN PELAJAR_MA \n         0          0          0          0          0          0          0 \nTENAGA_KES  PENSIUNAN    LAINNYA  GENERATED KODE_DES_1     BELUM_    MENGUR_ \n         0          0          0          2          2          0          0 \n  PELAJAR_ PENSIUNA_1   PEGAWAI_    TENTARA KEPOLISIAN    PERDAG_     PETANI \n         0          0          0          0          0          0          0 \n   PETERN_  NELAYAN_1   INDUSTR_    KONSTR_    TRANSP_    KARYAW_    KARYAW1 \n         0          0          0          0          0          0          0 \n KARYAW1_1 KARYAW1_12      BURUH     BURUH_     BURUH1   BURUH1_1   PEMBANT_ \n         0          0          0          0          0          0          0 \n    TUKANG   TUKANG_1  TUKANG_12 TUKANG__13 TUKANG__14 TUKANG__15 TUKANG__16 \n         0          0          0          0          0          0          0 \nTUKANG__17     PENATA    PENATA_  PENATA1_1    MEKANIK   SENIMAN_      TABIB \n         0          0          0          0          0          0          0 \n   PARAJI_   PERANCA_    PENTER_     IMAM_M    PENDETA     PASTOR   WARTAWAN \n         0          0          0          0          0          0          0 \n    USTADZ     JURU_M     PROMOT   ANGGOTA_   ANGGOTA1 ANGGOTA1_1   PRESIDEN \n         0          0          0          0          0          0          0 \nWAKIL_PRES ANGGOTA1_2 ANGGOTA1_3     DUTA_B   GUBERNUR WAKIL_GUBE     BUPATI \n         0          0          0          0          0          0          0 \nWAKIL_BUPA   WALIKOTA WAKIL_WALI ANGGOTA1_4 ANGGOTA1_5      DOSEN       GURU \n         0          0          0          0          0          0          0 \n     PILOT PENGACARA_    NOTARIS    ARSITEK    AKUNTA_    KONSUL_     DOKTER \n         0          0          0          0          0          0          0 \n     BIDAN    PERAWAT    APOTEK_  PSIKIATER    PENYIA_    PENYIA1     PELAUT \n         0          0          0          0          0          0          0 \n  PENELITI      SOPIR     PIALAN PARANORMAL    PEDAGA_    PERANG_    KEPALA_ \n         0          0          0          0          0          0          0 \n   BIARAW_ WIRASWAST_ LAINNYA_12  LUAS_DESA KODE_DES_3 DESA_KEL_1    KODE_12 \n         0          0          0          0          2          2          0 \n  geometry \n         0 \n\n\n\n\n2.2.3 Removing Missing Values\n\ngeoJAR[rowSums(is.na(geoJAR))!=0,]\n\nSimple feature collection with 2 features and 161 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 16026250 ymin: -16069470 xmax: 16036970 ymax: -16060460\nProjected CRS: Minna / Nigeria Mid Belt\n    OBJECT_ID KODE_DESA             DESA   KODE    PROVINSI KAB_KOTA KECAMATAN\n243     25645  31888888     DANAU SUNTER 318888 DKI JAKARTA     <NA>      <NA>\n244     25646  31888888 DANAU SUNTER DLL 318888 DKI JAKARTA     <NA>      <NA>\n    DESA_KELUR JUMLAH_PEN JUMLAH_KK LUAS_WILAY KEPADATAN PERPINDAHA JUMLAH_MEN\n243       <NA>          0         0          0         0          0          0\n244       <NA>          0         0          0         0          0          0\n    PERUBAHAN WAJIB_KTP SILAM KRISTEN KHATOLIK HINDU BUDHA KONGHUCU KEPERCAYAA\n243         0         0     0       0        0     0     0        0          0\n244         0         0     0       0        0     0     0        0          0\n    PRIA WANITA BELUM_KAWI KAWIN CERAI_HIDU CERAI_MATI U0 U5 U10 U15 U20 U25\n243    0      0          0     0          0          0  0  0   0   0   0   0\n244    0      0          0     0          0          0  0  0   0   0   0   0\n    U30 U35 U40 U45 U50 U55 U60 U65 U70 U75 TIDAK_BELU BELUM_TAMA TAMAT_SD SLTP\n243   0   0   0   0   0   0   0   0   0   0          0          0        0    0\n244   0   0   0   0   0   0   0   0   0   0          0          0        0    0\n    SLTA DIPLOMA_I DIPLOMA_II DIPLOMA_IV STRATA_II STRATA_III BELUM_TIDA\n243    0         0          0          0         0          0          0\n244    0         0          0          0         0          0          0\n    APARATUR_P TENAGA_PEN WIRASWASTA PERTANIAN NELAYAN AGAMA_DAN PELAJAR_MA\n243          0          0          0         0       0         0          0\n244          0          0          0         0       0         0          0\n    TENAGA_KES PENSIUNAN LAINNYA GENERATED KODE_DES_1 BELUM_ MENGUR_ PELAJAR_\n243          0         0       0      <NA>       <NA>      0       0        0\n244          0         0       0      <NA>       <NA>      0       0        0\n    PENSIUNA_1 PEGAWAI_ TENTARA KEPOLISIAN PERDAG_ PETANI PETERN_ NELAYAN_1\n243          0        0       0          0       0      0       0         0\n244          0        0       0          0       0      0       0         0\n    INDUSTR_ KONSTR_ TRANSP_ KARYAW_ KARYAW1 KARYAW1_1 KARYAW1_12 BURUH BURUH_\n243        0       0       0       0       0         0          0     0      0\n244        0       0       0       0       0         0          0     0      0\n    BURUH1 BURUH1_1 PEMBANT_ TUKANG TUKANG_1 TUKANG_12 TUKANG__13 TUKANG__14\n243      0        0        0      0        0         0          0          0\n244      0        0        0      0        0         0          0          0\n    TUKANG__15 TUKANG__16 TUKANG__17 PENATA PENATA_ PENATA1_1 MEKANIK SENIMAN_\n243          0          0          0      0       0         0       0        0\n244          0          0          0      0       0         0       0        0\n    TABIB PARAJI_ PERANCA_ PENTER_ IMAM_M PENDETA PASTOR WARTAWAN USTADZ JURU_M\n243     0       0        0       0      0       0      0        0      0      0\n244     0       0        0       0      0       0      0        0      0      0\n    PROMOT ANGGOTA_ ANGGOTA1 ANGGOTA1_1 PRESIDEN WAKIL_PRES ANGGOTA1_2\n243      0        0        0          0        0          0          0\n244      0        0        0          0        0          0          0\n    ANGGOTA1_3 DUTA_B GUBERNUR WAKIL_GUBE BUPATI WAKIL_BUPA WALIKOTA WAKIL_WALI\n243          0      0        0          0      0          0        0          0\n244          0      0        0          0      0          0        0          0\n    ANGGOTA1_4 ANGGOTA1_5 DOSEN GURU PILOT PENGACARA_ NOTARIS ARSITEK AKUNTA_\n243          0          0     0    0     0          0       0       0       0\n244          0          0     0    0     0          0       0       0       0\n    KONSUL_ DOKTER BIDAN PERAWAT APOTEK_ PSIKIATER PENYIA_ PENYIA1 PELAUT\n243       0      0     0       0       0         0       0       0      0\n244       0      0     0       0       0         0       0       0      0\n    PENELITI SOPIR PIALAN PARANORMAL PEDAGA_ PERANG_ KEPALA_ BIARAW_ WIRASWAST_\n243        0     0      0          0       0       0       0       0          0\n244        0     0      0          0       0       0       0       0          0\n    LAINNYA_12 LUAS_DESA KODE_DES_3 DESA_KEL_1 KODE_12\n243          0         0       <NA>       <NA>       0\n244          0         0       <NA>       <NA>       0\n                          geometry\n243 MULTIPOLYGON (((16026561 -1...\n244 MULTIPOLYGON (((16030782 -1...\n\n\n\n\n2.2.4 Checking and Transforming Coordinate System\nChecking\n\nst_crs(geoJAR)\n\nCoordinate Reference System:\n  User input: EPSG:26392 \n  wkt:\nPROJCRS[\"Minna / Nigeria Mid Belt\",\n    BASEGEOGCRS[\"Minna\",\n        DATUM[\"Minna\",\n            ELLIPSOID[\"Clarke 1880 (RGS)\",6378249.145,293.465,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4263]],\n    CONVERSION[\"Nigeria Mid Belt\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",4,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",8.5,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.99975,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",670553.98,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"Nigeria between 6°30'E and 10°30'E, onshore and offshore shelf.\"],\n        BBOX[3.57,6.5,13.53,10.51]],\n    ID[\"EPSG\",26392]]\n\n\nTransforming\n\ngeoJARCOR23845 <- st_transform(geoJAR, 23845)\nst_crs(geoJARCOR23845)\n\nCoordinate Reference System:\n  User input: EPSG:23845 \n  wkt:\nPROJCRS[\"DGN95 / Indonesia TM-3 zone 54.1\",\n    BASEGEOGCRS[\"DGN95\",\n        DATUM[\"Datum Geodesi Nasional 1995\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4755]],\n    CONVERSION[\"Indonesia TM-3 zone 54.1\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",139.5,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9999,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",200000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",1500000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"easting (X)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"northing (Y)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre.\"],\n        AREA[\"Indonesia - onshore east of 138°E.\"],\n        BBOX[-9.19,138,-1.49,141.01]],\n    ID[\"EPSG\",23845]]\n\n\n\n\n2.2.5 Data Visualization\n\nplot(st_geometry(geoJARCOR23845))\n\n\n\n\n\n2.2.5.1 Removing Columns not used\n\ngeoJARCOR23845 <- geoJARCOR23845 %>%\n  dplyr::select(c(1:9))\n\n\n\n2.2.5.2 Removing Outer Islands\n\njarMain <- geoJARCOR23845 %>%\n  filter(KAB_KOTA %in%\n           c(\"JAKARTA BARAT\",\n             \"JAKARTA PUSAT\",\n             \"JAKARTA UTARA\",\n             \"JAKARTA SELATAN\",\n             \"JAKARTA TIMUR\"))\n\n\n\n2.2.5.3 Renaming Columns for Readabilty\n\njarMain <- jarMain %>%\n  dplyr::rename(\n    Object_Id = OBJECT_ID,\n    Province = PROVINSI,\n    City = KAB_KOTA,\n    District = KECAMATAN,\n    Village_Code = KODE_DESA,\n    Village = DESA,\n    Sub_District = DESA_KELUR,\n    Code = KODE,\n    Total_Population = JUMLAH_PEN\n  )\nglimpse(jarMain)\n\nRows: 261\nColumns: 10\n$ Object_Id        <dbl> 25477, 25478, 25397, 25400, 25390, 25391, 25394, 2538…\n$ Village_Code     <chr> \"3173031006\", \"3173031007\", \"3171031003\", \"3171031006…\n$ Village          <chr> \"KEAGUNGAN\", \"GLODOK\", \"HARAPAN MULIA\", \"CEMPAKA BARU…\n$ Code             <dbl> 317303, 317303, 317103, 317103, 317102, 317102, 31710…\n$ Province         <chr> \"DKI JAKARTA\", \"DKI JAKARTA\", \"DKI JAKARTA\", \"DKI JAK…\n$ City             <chr> \"JAKARTA BARAT\", \"JAKARTA BARAT\", \"JAKARTA PUSAT\", \"J…\n$ District         <chr> \"TAMAN SARI\", \"TAMAN SARI\", \"KEMAYORAN\", \"KEMAYORAN\",…\n$ Sub_District     <chr> \"KEAGUNGAN\", \"GLODOK\", \"HARAPAN MULIA\", \"CEMPAKA BARU…\n$ Total_Population <dbl> 21609, 9069, 29085, 41913, 15793, 33383, 35906, 21828…\n$ geometry         <MULTIPOLYGON [m]> MULTIPOLYGON (((-3627004 69..., MULTIPOL…\n\n\n\n\n2.2.5.4 Visualizing Map\n\ntm_shape(jarMain) + \n  tm_polygons(\"City\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#handling-aspatial-data",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#handling-aspatial-data",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "2.3 Handling Aspatial Data",
    "text": "2.3 Handling Aspatial Data\n\n2.3.1 Importing Aspatial Data\nJuly 21 - Jun 22\n\njul2021 <- readxl::read_xlsx(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Juli 2021).xlsx\")\naug2021 <- readxl::read_xlsx(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Agustus 2021).xlsx\")\nsep2021 <- readxl::read_xlsx(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (30 September 2021).xlsx\")\noct2021 <- readxl::read_xlsx(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Oktober 2021).xlsx\")\nnov2021 <- readxl::read_xlsx(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (30 November 2021).xlsx\")\ndec2021 <- readxl::read_xlsx(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Desember 2021).xlsx\")\njan2022 <- readxl::read_xlsx(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Januari 2022).xlsx\")\nfeb2022 <- readxl::read_xlsx(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (27 Februari 2022).xlsx\")\nmar2022 <- readxl::read_xlsx(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Maret 2022).xlsx\")\napr2022 <- readxl::read_xlsx(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (30 April 2022).xlsx\")\nmay2022 <- readxl::read_xlsx(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (31 Mei 2022).xlsx\")\njun2022 <- readxl::read_xlsx(\"data/aspatial/Data Vaksinasi Berbasis Kelurahan (30 Juni 2022).xlsx\")\n\n\n\n2.3.2 Function Creation\n\nReads files\nRemove header row\nSearch for “kelurahan” and save in startpoint\nSave “date, kobe kelurahan, kelurahan, sasaran, belum vaksin”\n\n\npreprocessingFun <- function(files){\n  result <- read_xlsx(files)[-1,]\n  \n  startpoint <- gregexpr(pattern=\"Kelurahan\", files)[[1]] + 11\n  \n  result$Date <- substr(files, startpoint, nchar(files)-6)\n  \n  result <- result %>% \n    select(\"Date\", \n           \"KODE KELURAHAN\", \n           \"KELURAHAN\", \n           \"SASARAN\", \n           \"BELUM VAKSIN\")\n  return(result)\n}\n\n\n\n2.3.3 Applying Functions to Data Files\n\nlistFiles <-list.files(path = \"data/aspatial\", pattern = \"*.xlsx\", full.names=TRUE)\n\ndf_listFiles <- lapply(seq_along(listFiles), function(x) preprocessingFun(listFiles[x]))\n\n\nvaccJak <- ldply(df_listFiles, data.frame)\n\n\nglimpse(vaccJak)\n\nRows: 3,204\nColumns: 5\n$ Date           <chr> \"27 Februari 2022\", \"27 Februari 2022\", \"27 Februari 20…\n$ KODE.KELURAHAN <chr> \"3172051003\", \"3173041007\", \"3175041005\", \"3175031003\",…\n$ KELURAHAN      <chr> \"ANCOL\", \"ANGKE\", \"BALE KAMBANG\", \"BALI MESTER\", \"BAMBU…\n$ SASARAN        <dbl> 23947, 29381, 29074, 9752, 26285, 21566, 23886, 47898, …\n$ BELUM.VAKSIN   <dbl> 4592, 5319, 5903, 1649, 4030, 3950, 3344, 9382, 3772, 7…\n\n\n\n\n2.3.4 Renaming Columns\n\nvaccJak <- vaccJak %>% \n  dplyr::rename(\n    Date = Date,\n    Sub_District_Code = KODE.KELURAHAN,\n    Sub_District = KELURAHAN, \n    Target = SASARAN, \n    Not_Yet_Vaccinated = BELUM.VAKSIN\n    )\n\n\n\n2.3.5 Changing Locale Date for File Reading\n\n2.3.5.1 Changing for Windows\n\nSys.setlocale(locale=\"ind\")\n\n[1] \"LC_COLLATE=Indonesian_Indonesia.1252;LC_CTYPE=Indonesian_Indonesia.1252;LC_MONETARY=Indonesian_Indonesia.1252;LC_NUMERIC=C;LC_TIME=Indonesian_Indonesia.1252\"\n\n#Sys.setlocale(\"LC_TIME\", \"id_ID.UTF-8\")\n#default_locale()\n\n\n\n2.3.5.2 Changing for Mac - Still solving\n{r}\nlocale(\n  date_names = \"id\",\n  date_format =\"%d %B %Y\",\n  tz = \"UTC\",\n  encoding = \"UTF-8\"\n)\n\n\n\n2.3.6 Formating Data\n\nvaccJak$Date <- c(vaccJak$Date) %>% \n  as.Date(vaccJak$Date, format =\"%d %B %Y\")\n\nglimpse(vaccJak)\n\nRows: 3,204\nColumns: 5\n$ Date               <date> 2022-02-27, 2022-02-27, 2022-02-27, 2022-02-27, 20~\n$ Sub_District_Code  <chr> \"3172051003\", \"3173041007\", \"3175041005\", \"31750310~\n$ Sub_District       <chr> \"ANCOL\", \"ANGKE\", \"BALE KAMBANG\", \"BALI MESTER\", \"B~\n$ Target             <dbl> 23947, 29381, 29074, 9752, 26285, 21566, 23886, 478~\n$ Not_Yet_Vaccinated <dbl> 4592, 5319, 5903, 1649, 4030, 3950, 3344, 9382, 377~\n\n\n\n\n2.3.7 Checking for Missing Values\n\nsum(is.na(vaccJak))\n\n[1] 0\n\nsapply(vaccJak, function(x) sum(is.na(x)))\n\n              Date  Sub_District_Code       Sub_District             Target \n                 0                  0                  0                  0 \nNot_Yet_Vaccinated \n                 0"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#visualizing-combined-jakarta",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#visualizing-combined-jakarta",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "3.1 Visualizing Combined Jakarta",
    "text": "3.1 Visualizing Combined Jakarta\n\ntmap_mode(\"plot\")\ntotalPop = tm_shape(comJak)+\n  tm_fill(\"Total_Population\") +\n  tm_layout(main.title = \"Total Population Count\",\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45,\n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_compass(type=\"8star\", size = 2) + \n  tm_scale_bar() +\n  tm_grid(alpha = 0.2)\n\ntarget = tm_shape(comJak)+\n  tm_fill(\"Target\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title=\"Target Count\",\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45,\n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_compass(type=\"8star\", size = 2) + \n  tm_scale_bar() +\n  tm_grid(alpha = 0.2)\n\nnoVac = tm_shape(comJak)+\n  tm_fill(\"Not_Yet_Vaccinated\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title=\"Not Yet Vaccinated Count\",\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45,\n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_compass(type=\"8star\", size = 2) + \n  tm_scale_bar() +\n  tm_grid(alpha = 0.2)\n\n\n3.1.1 Total Population Count\n\ntotalPop\n\n\n\n\n\n\n3.1.2 Target Count\n\ntarget\n\n\n\n\n\n\n3.1.3 Not Yet Vaccinated Count\n\nnoVac"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#finding-reason-for-missing-legend",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#finding-reason-for-missing-legend",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "3.2 Finding Reason for “Missing” Legend",
    "text": "3.2 Finding Reason for “Missing” Legend\n\n3.2.1 Double Checking for Missing Value\n\nsum(is.na(jarMain))\n\n[1] 0\n\nsapply(jarMain, function(x) sum(is.na(x)))\n\n       Object_Id     Village_Code          Village             Code \n               0                0                0                0 \n        Province             City         District     Sub_District \n               0                0                0                0 \nTotal_Population         geometry \n               0                0 \n\nsum(is.na(vaccJak))\n\n[1] 0\n\nsapply(vaccJak, function(x) sum(is.na(x)))\n\n              Date  Sub_District_Code       Sub_District             Target \n                 0                  0                  0                  0 \nNot_Yet_Vaccinated \n                 0 \n\n\n\n\n3.2.2 Checking Join Mismatch\n\njakartaSD <- c(jarMain$Sub_District)\nvaccinationSD <- c(vaccJak$Sub_District)\n\n\n\n3.2.2.1 Checking for Unique SD\n\nunique(jakartaSD[!(jakartaSD %in% vaccinationSD)])\n\n[1] \"KRENDANG\"             \"RAWAJATI\"             \"TENGAH\"              \n[4] \"BALEKAMBANG\"          \"PINANGRANTI\"          \"JATIPULO\"            \n[7] \"PALMERIAM\"            \"KRAMATJATI\"           \"HALIM PERDANA KUSUMA\"\n\n\n\nunique(vaccinationSD[!(vaccinationSD %in% jakartaSD)])\n\n [1] \"BALE KAMBANG\"          \"HALIM PERDANA KUSUMAH\" \"JATI PULO\"            \n [4] \"KAMPUNG TENGAH\"        \"KERENDANG\"             \"KRAMAT JATI\"          \n [7] \"PAL MERIAM\"            \"PINANG RANTI\"          \"PULAU HARAPAN\"        \n[10] \"PULAU KELAPA\"          \"PULAU PANGGANG\"        \"PULAU PARI\"           \n[13] \"PULAU TIDUNG\"          \"PULAU UNTUNG JAWA\"     \"RAWA JATI\"            \n\n\n\n3.2.2.2 Fixing Naming Issue\n\njarMain$Sub_District[jarMain$Sub_District == 'BALEKAMBANG'] <- 'BALE KAMBANG'\njarMain$Sub_District[jarMain$Sub_District == 'HALIM PERDANA KUSUMA'] <- 'HALIM PERDANA KUSUMAH'\njarMain$Sub_District[jarMain$Sub_District == 'JATIPULO'] <- 'JATI PULO'\njarMain$Sub_District[jarMain$Sub_District == 'KALI BARU'] <- 'KALIBARU'\njarMain$Sub_District[jarMain$Sub_District == 'TENGAH'] <- 'KAMPUNG TENGAH'\njarMain$Sub_District[jarMain$Sub_District == 'KRAMATJATI'] <- 'KRAMAT JATI'\njarMain$Sub_District[jarMain$Sub_District == 'KRENDANG'] <- 'KERENDANG'\njarMain$Sub_District[jarMain$Sub_District == 'PALMERIAM'] <- 'PAL MERIAM'\njarMain$Sub_District[jarMain$Sub_District == 'PINANGRANTI'] <- 'PINANG RANTI'\njarMain$Sub_District[jarMain$Sub_District == 'RAWAJATI'] <- 'RAWA JATI'\n\n\n\n3.2.2.3 Removing Mismatched SD\n\nvaccJak <- vaccJak[!(vaccJak$Sub_District==\"PULAU HARAPAN\" \n                     | vaccJak$Sub_District==\"PULAU KELAPA\" \n                     | vaccJak$Sub_District==\"PULAU PANGGANG\" \n                     | vaccJak$Sub_District==\"PULAU PARI\" \n                     | vaccJak$Sub_District==\"PULAU TIDUNG\" \n                     | vaccJak$Sub_District==\"PULAU UNTUNG JAWA\"), \n                   ]"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#rejoining-data-after-fix",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#rejoining-data-after-fix",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "3.3 Rejoining Data after Fix",
    "text": "3.3 Rejoining Data after Fix\n\ncomJak <- left_join(jarMain, vaccJak,\n                    by=c(\n                      \"Village_Code\"=\"Sub_District_Code\", \n                      \"Sub_District\"=\"Sub_District\")\n                    )"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#visualizing-combined-jakarta-again",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#visualizing-combined-jakarta-again",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "3.4 Visualizing Combined Jakarta Again",
    "text": "3.4 Visualizing Combined Jakarta Again\n\ntmap_mode(\"plot\")\ntotalPop = tm_shape(comJak)+\n  tm_fill(\"Total_Population\") +\n  tm_layout(main.title = \"Total Population Count\",\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45,\n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_compass(type=\"8star\", size = 2) + \n  tm_scale_bar() +\n  tm_grid(alpha = 0.2)\n\ntarget = tm_shape(comJak)+\n  tm_fill(\"Target\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title=\"Target Count\",\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45,\n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_compass(type=\"8star\", size = 2) + \n  tm_scale_bar() +\n  tm_grid(alpha = 0.2)\n\nnoVac = tm_shape(comJak)+\n  tm_fill(\"Not_Yet_Vaccinated\") +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title=\"Not Yet Vaccinated Count\",\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45,\n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_compass(type=\"8star\", size = 2) + \n  tm_scale_bar() +\n  tm_grid(alpha = 0.2)\n\n\n3.2.1 Total Population Count\n\ntotalPop\n\n\n\n\n\n\n3.2.2 Target Count\n\ntarget\n\n\n\n\n\n\n3.2.3 Not Yet Vaccinated\n\nnoVac"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#vaccination-rate",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#vaccination-rate",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "3.5 Vaccination Rate",
    "text": "3.5 Vaccination Rate\n\n3.5.1 Calculation of Rate\nCalculating and pivoting vac rate by sub district and date\n\nvaccRate <- vaccJak %>%\n  inner_join(jarMain, by=c(\"Sub_District\" = \"Sub_District\")) %>%\n  group_by(Sub_District, Date) %>%\n  dplyr::summarise(`vaccRate` = ((Target - Not_Yet_Vaccinated) / Target)*100) %>%\n  ungroup() %>% pivot_wider(names_from = Date,\n                            values_from = vaccRate)\n\n\nvaccRate\n\n# A tibble: 261 x 13\n   Sub_District  2021-~1 2021-~2 2021-~3 2021-~4 2021-~5 2021-~6 2022-~7 2022-~8\n   <chr>           <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n 1 ANCOL            48.5    61.6    72.1    75.0    76.9    78.9    80.6    80.8\n 2 ANGKE            52.8    64.6    74.2    77.7    79.6    80.9    81.7    81.9\n 3 BALE KAMBANG     37.0    57.0    70.0    73.9    76.6    78.2    79.5    79.7\n 4 BALI MESTER      47.0    62.0    74.2    78.2    80.3    81.7    82.8    83.1\n 5 BAMBU APUS       47.6    64.2    76.2    80.9    82.5    83.4    84.5    84.7\n 6 BANGKA           51.6    61.3    73.2    78.0    79.8    80.7    81.5    81.7\n 7 BARU             57.9    67.6    79.5    82.9    84.2    85.0    85.8    86.0\n 8 BATU AMPAR       39.8    58.4    70.6    74.5    77.1    78.8    80.1    80.4\n 9 BENDUNGAN HI~    53.6    62.6    75.6    79.1    80.5    81.4    82.3    82.5\n10 BIDARA CINA      40.6    57.6    71.0    75.2    77.0    78.2    79.2    79.5\n# ... with 251 more rows, 4 more variables: `2022-03-31` <dbl>,\n#   `2022-04-30` <dbl>, `2022-05-31` <dbl>, `2022-06-30` <dbl>, and abbreviated\n#   variable names 1: `2021-07-31`, 2: `2021-08-31`, 3: `2021-09-30`,\n#   4: `2021-10-31`, 5: `2021-11-30`, 6: `2021-12-31`, 7: `2022-01-31`,\n#   8: `2022-02-27`\n\n\n\n\n3.5.2 Converting to SF Objects\n\ncomJak <- st_as_sf(comJak)\nvaccRate <- vaccRate%>% left_join(jarMain, by=c(\"Sub_District\"=\"Sub_District\"))\nvaccRate <- st_as_sf(vaccRate)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#function-creation-for-choropleth-map-w-jenks",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#function-creation-for-choropleth-map-w-jenks",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "4.1 Function Creation for Choropleth Map (w Jenks)",
    "text": "4.1 Function Creation for Choropleth Map (w Jenks)\n\nchoroFun <- function(df, date) {\n  tm_shape(vaccRate) +\n    tm_polygons() +\n  tm_shape(df) +\n    tm_fill(date, \n            n= 5,\n            style = \"jenks\",\n            title = \"Vaccination Rate\") +\n    tm_layout(main.title = date,\n              main.title.size = 1,\n              main.title.position = \"center\") +\n    tm_borders(alpha = 0.5)\n}"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#visualizing-vac-rate-per-month",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#visualizing-vac-rate-per-month",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "4.2 Visualizing Vac Rate Per Month",
    "text": "4.2 Visualizing Vac Rate Per Month\n\n4.2.1 Vac Rate from July to Oct 2021\n\ntmap_mode(\"plot\")\ntmap_arrange(choroFun(vaccRate, \"2021-07-31\"),\n             choroFun(vaccRate, \"2021-08-31\"),\n             choroFun(vaccRate, \"2021-09-30\"),\n             choroFun(vaccRate, \"2021-10-31\"),\n             ncol = 2\n)\n\n\n\n\n\n\n4.2.2 Vac Rate from Nov 2021 to Feb 2022\n\ntmap_mode(\"plot\")\ntmap_arrange(choroFun(vaccRate, \"2021-11-30\"),\n             choroFun(vaccRate, \"2021-12-31\"),\n             choroFun(vaccRate, \"2022-01-31\"),\n             choroFun(vaccRate, \"2022-02-27\"),\n             ncol = 2\n)\n\n\n\n\n\n\n4.2.3 Vac Rate from Mar to Jun 2022\n\ntmap_mode(\"plot\")\ntmap_arrange(choroFun(vaccRate, \"2022-03-31\"),\n             choroFun(vaccRate, \"2022-04-30\"),\n             choroFun(vaccRate, \"2022-05-31\"),\n             choroFun(vaccRate, \"2022-06-30\"),\n             ncol = 2\n)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#custom-breaks",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#custom-breaks",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "4.3 Custom Breaks",
    "text": "4.3 Custom Breaks\nCreating custom breaks help us better visualize the map\n\n4.3.1 Determining Breaks\n\nsummary(vaccRate$`2021-07-31`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  37.01   47.59   51.34   51.07   54.19   65.20 \n\nsummary(vaccRate$`2021-08-31`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  54.56   61.94   63.50   63.64   65.40   72.99 \n\nsummary(vaccRate$`2021-09-30`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  66.97   73.74   75.46   75.34   76.88   83.70 \n\nsummary(vaccRate$`2021-10-31`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  71.76   77.98   79.37   79.25   80.77   86.60 \n\nsummary(vaccRate$`2021-11-30`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  73.85   79.80   81.14   80.94   82.32   87.50 \n\nsummary(vaccRate$`2021-12-31`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  75.65   80.97   82.08   82.01   83.20   88.34 \n\nsummary(vaccRate$`2022-01-31`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  76.80   81.90   82.96   82.94   83.94   89.03 \n\nsummary(vaccRate$`2022-02-27`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  77.23   82.18   83.17   83.16   84.15   89.19 \n\nsummary(vaccRate$`2022-03-31`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  77.66   82.60   83.54   83.53   84.53   89.46 \n\nsummary(vaccRate$`2022-04-30`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  78.01   82.95   83.80   83.84   84.89   89.69 \n\nsummary(vaccRate$`2022-05-31`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  78.13   83.03   83.85   83.93   84.95   89.76 \n\nsummary(vaccRate$`2022-06-30`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  78.31   83.18   84.03   84.08   85.05   89.78 \n\n\n\n\n4.3.2 Refactor Function w Breaks\n\nchoroFunWBreak <- function(df, date) {\n  tm_shape(vaccRate) +\n    tm_polygons() +\n  tm_shape(df) +\n    tm_fill(date,\n            breaks = c(37, 48, 60, 70, 85, 90),\n            n= 5,\n            title = \"Vaccination Rate\") +\n    tm_layout(main.title = date,\n              main.title.size = 1,\n              main.title.position = \"center\") +\n    tm_borders(alpha = 0.5)\n}"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#visualizing-vac-rate-w-breaks",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#visualizing-vac-rate-w-breaks",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "4.4 Visualizing Vac Rate (w Breaks)",
    "text": "4.4 Visualizing Vac Rate (w Breaks)\n\n4.4.1 Vac Rate from July to Oct 2021\n\ntmap_mode(\"plot\")\ntmap_arrange(choroFunWBreak(vaccRate, \"2021-07-31\"),\n             choroFunWBreak(vaccRate, \"2021-08-31\"),\n             choroFunWBreak(vaccRate, \"2021-09-30\"),\n             choroFunWBreak(vaccRate, \"2021-10-31\"),\n             ncol = 2\n)\n\n\n\n\n\n\n4.4.2 Vac Rate from Nov 2021 to Feb 2022\n\ntmap_mode(\"plot\")\ntmap_arrange(choroFunWBreak(vaccRate, \"2021-11-30\"),\n             choroFunWBreak(vaccRate, \"2021-12-31\"),\n             choroFunWBreak(vaccRate, \"2022-01-31\"),\n             choroFunWBreak(vaccRate, \"2022-02-27\"),\n             ncol = 2\n)\n\n\n\n\n\n\n4.4.3 Vac Rate from Mar to Jun 2022\n\ntmap_mode(\"plot\")\ntmap_arrange(choroFunWBreak(vaccRate, \"2022-03-31\"),\n             choroFunWBreak(vaccRate, \"2022-04-30\"),\n             choroFunWBreak(vaccRate, \"2022-05-31\"),\n             choroFunWBreak(vaccRate, \"2022-06-30\"),\n             ncol = 2\n)\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nFrom the map shown above, we can see that within the month of 2021-07-31 to 2021-07-31, most of the sub districts vaccination rate is more than 60, and the following month increased to more than 70.\nWhen it reaches 2021-10-31, the rate increases to 70 while having 1 state at 85 and above.\nHowever, we can see that there is a slow down of vaccination rate from 70 - 85 range to 85 - 90 range. At 2022-06-30, we can see that those in the range of 85 - 90 is mainly located at the South side, with more states towards the Center and East side slowly catching up."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#creating-attribute-table",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#creating-attribute-table",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "5.1 Creating Attribute Table",
    "text": "5.1 Creating Attribute Table\n\nvaccAtt <- comJak %>%\n  select(10, 8, 11, 12) %>%\n  st_drop_geometry()\n\nvaccAtt$Vaccination_Rate <- ((vaccAtt$Target - vaccAtt$Not_Yet_Vaccinated) / vaccAtt$Target) * 100\n\nvaccAtt <- tibble(vaccAtt %>% select(1, 2, 5))\n\n\nvaccAtt\n\n# A tibble: 3,132 x 3\n   Date       Sub_District Vaccination_Rate\n   <date>     <chr>                   <dbl>\n 1 2022-02-27 KEAGUNGAN                84.2\n 2 2022-04-30 KEAGUNGAN                85.1\n 3 2022-06-30 KEAGUNGAN                85.3\n 4 2021-11-30 KEAGUNGAN                82.2\n 5 2021-09-30 KEAGUNGAN                75.8\n 6 2021-08-31 KEAGUNGAN                65.2\n 7 2021-12-31 KEAGUNGAN                83.2\n 8 2022-01-31 KEAGUNGAN                84.0\n 9 2021-07-31 KEAGUNGAN                53.3\n10 2022-03-31 KEAGUNGAN                84.6\n# ... with 3,122 more rows"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#creating-time-series-cube",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#creating-time-series-cube",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "5.2 Creating Time Series Cube",
    "text": "5.2 Creating Time Series Cube\n\nvaccRateST <- spacetime(vaccAtt, jarMain,\n                        .loc_col = \"Sub_District\",\n                        .time_col = \"Date\")\n\n\nis_spacetime_cube(vaccRateST)\n\n[1] TRUE"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#deriving-spatial-weights",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#deriving-spatial-weights",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "5.3 Deriving Spatial Weights",
    "text": "5.3 Deriving Spatial Weights\n\nvaccRateNB <- vaccRateST %>%\n  activate(\"geometry\") %>%\n  mutate(nb = include_self(st_contiguity(geometry)),\n         wt = st_inverse_distance(nb, geometry, scale = 1, alpha = 1),\n         .before = 1) %>%\n  set_nbs(\"nb\") %>%\n  set_wts(\"wt\")\n\n\nhead(vaccRateNB)\n\n# A tibble: 6 x 5\n  Date       Sub_District  Vaccination_Rate nb        wt       \n  <date>     <chr>                    <dbl> <list>    <list>   \n1 2021-07-31 KEAGUNGAN                 53.3 <int [6]> <dbl [6]>\n2 2021-07-31 GLODOK                    61.6 <int [7]> <dbl [7]>\n3 2021-07-31 HARAPAN MULIA             49.7 <int [6]> <dbl [6]>\n4 2021-07-31 CEMPAKA BARU              46.7 <int [7]> <dbl [7]>\n5 2021-07-31 PASAR BARU                59.3 <int [9]> <dbl [9]>\n6 2021-07-31 KARANG ANYAR              52.2 <int [7]> <dbl [7]>"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#computing-gi-value",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#computing-gi-value",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "5.4 Computing Gi* Value",
    "text": "5.4 Computing Gi* Value\n\n5.4.1 Setting Seed\n\nset.seed(1234)\n\n\n\n5.4.2 Computing Gi* Value\n\njakGi <- vaccRateNB %>%\n  group_by(Date) %>%\n  mutate(gi_star = local_gstar_perm(\n    Vaccination_Rate, nb, wt, nsim=99))%>%\n      unnest(gi_star)\n\n\njakGi\n\n# A tibble: 3,132 x 13\n# Groups:   Date [12]\n   Date       Sub_District Vacci~1 nb    wt    gi_star    e_gi   var_gi  p_value\n   <date>     <chr>          <dbl> <lis> <lis>   <dbl>   <dbl>    <dbl>    <dbl>\n 1 2021-07-31 KEAGUNGAN       53.3 <int> <dbl>   -5.13 3.17e-4 2.95e-10 2.83e- 7\n 2 2021-07-31 GLODOK          61.6 <int> <dbl>   -4.91 3.18e-4 2.81e-10 9.04e- 7\n 3 2021-07-31 HARAPAN MUL~    49.7 <int> <dbl>   -6.54 3.19e-4 2.69e-10 6.18e-11\n 4 2021-07-31 CEMPAKA BARU    46.7 <int> <dbl>   -7.88 3.21e-4 2.25e-10 3.23e-15\n 5 2021-07-31 PASAR BARU      59.3 <int> <dbl>   -6.98 3.20e-4 1.78e-10 3.04e-12\n 6 2021-07-31 KARANG ANYAR    52.2 <int> <dbl>   -7.22 3.20e-4 1.82e-10 5.30e-13\n 7 2021-07-31 MANGGA DUA ~    51.6 <int> <dbl>   -8.12 3.20e-4 1.50e-10 4.83e-16\n 8 2021-07-31 PETOJO UTARA    47.2 <int> <dbl>   -6.69 3.19e-4 2.77e-10 2.22e-11\n 9 2021-07-31 SENEN           54.4 <int> <dbl>   -7.75 3.19e-4 1.69e-10 9.44e-15\n10 2021-07-31 BUNGUR          52.8 <int> <dbl>   -7.79 3.20e-4 1.80e-10 6.86e-15\n# ... with 3,122 more rows, 4 more variables: p_sim <dbl>, p_folded_sim <dbl>,\n#   skewness <dbl>, kurtosis <dbl>, and abbreviated variable name\n#   1: Vaccination_Rate"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#combining-gi-value-with-com-jak",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#combining-gi-value-with-com-jak",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "5.5 Combining Gi* Value with Com Jak",
    "text": "5.5 Combining Gi* Value with Com Jak\n\ncomJakGi <- comJak %>%\n  left_join(jakGi)\n\n\ncomJakGi\n\nSimple feature collection with 3132 features and 23 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -3644407 ymin: 663658 xmax: -3606364 ymax: 701158.1\nProjected CRS: DGN95 / Indonesia TM-3 zone 54.1\nFirst 10 features:\n   Object_Id Village_Code   Village   Code    Province          City   District\n1      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI\n2      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI\n3      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI\n4      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI\n5      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI\n6      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI\n7      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI\n8      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI\n9      25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI\n10     25477   3173031006 KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT TAMAN SARI\n   Sub_District Total_Population       Date Target Not_Yet_Vaccinated\n1     KEAGUNGAN            21609 2022-02-27  17387               2755\n2     KEAGUNGAN            21609 2022-04-30  17387               2593\n3     KEAGUNGAN            21609 2022-06-30  17387               2553\n4     KEAGUNGAN            21609 2021-11-30  17387               3099\n5     KEAGUNGAN            21609 2021-09-30  17387               4203\n6     KEAGUNGAN            21609 2021-08-31  17387               6054\n7     KEAGUNGAN            21609 2021-12-31  17387               2924\n8     KEAGUNGAN            21609 2022-01-31  17387               2783\n9     KEAGUNGAN            21609 2021-07-31  17387               8126\n10    KEAGUNGAN            21609 2022-03-31  17387               2675\n   Vaccination_Rate                      nb\n1          84.15483 1, 2, 39, 152, 158, 166\n2          85.08656 1, 2, 39, 152, 158, 166\n3          85.31662 1, 2, 39, 152, 158, 166\n4          82.17634 1, 2, 39, 152, 158, 166\n5          75.82677 1, 2, 39, 152, 158, 166\n6          65.18088 1, 2, 39, 152, 158, 166\n7          83.18284 1, 2, 39, 152, 158, 166\n8          83.99379 1, 2, 39, 152, 158, 166\n9          53.26393 1, 2, 39, 152, 158, 166\n10         84.61494 1, 2, 39, 152, 158, 166\n                                                                             wt\n1  0.000000000, 0.001071741, 0.001039078, 0.001417547, 0.001110431, 0.001297072\n2  0.000000000, 0.001071741, 0.001039078, 0.001417547, 0.001110431, 0.001297072\n3  0.000000000, 0.001071741, 0.001039078, 0.001417547, 0.001110431, 0.001297072\n4  0.000000000, 0.001071741, 0.001039078, 0.001417547, 0.001110431, 0.001297072\n5  0.000000000, 0.001071741, 0.001039078, 0.001417547, 0.001110431, 0.001297072\n6  0.000000000, 0.001071741, 0.001039078, 0.001417547, 0.001110431, 0.001297072\n7  0.000000000, 0.001071741, 0.001039078, 0.001417547, 0.001110431, 0.001297072\n8  0.000000000, 0.001071741, 0.001039078, 0.001417547, 0.001110431, 0.001297072\n9  0.000000000, 0.001071741, 0.001039078, 0.001417547, 0.001110431, 0.001297072\n10 0.000000000, 0.001071741, 0.001039078, 0.001417547, 0.001110431, 0.001297072\n     gi_star         e_gi       var_gi      p_value p_sim p_folded_sim\n1  -4.148510 0.0003184021 2.953413e-10 3.346461e-05  0.02         0.01\n2  -4.730787 0.0003186086 2.249538e-10 2.236511e-06  0.02         0.01\n3  -5.112686 0.0003204174 2.017972e-10 3.176099e-07  0.02         0.01\n4  -4.660924 0.0003188878 2.448973e-10 3.147932e-06  0.02         0.01\n5  -5.791609 0.0003181470 1.718401e-10 6.971549e-09  0.02         0.01\n6  -4.940322 0.0003191377 2.832933e-10 7.799349e-07  0.02         0.01\n7  -4.270179 0.0003169345 2.717739e-10 1.953157e-05  0.02         0.01\n8  -5.200118 0.0003188126 1.906391e-10 1.991626e-07  0.02         0.01\n9  -5.134422 0.0003172134 2.951801e-10 2.830127e-07  0.02         0.01\n10 -5.684511 0.0003221341 1.729464e-10 1.311876e-08  0.02         0.01\n     skewness   kurtosis                       geometry\n1  -0.7361674 -0.1454841 MULTIPOLYGON (((-3627004 69...\n2  -0.3317697 -0.5930501 MULTIPOLYGON (((-3627004 69...\n3  -0.2461323 -0.8701698 MULTIPOLYGON (((-3627004 69...\n4  -0.9926916  1.5306415 MULTIPOLYGON (((-3627004 69...\n5  -0.1422052 -0.5629658 MULTIPOLYGON (((-3627004 69...\n6  -0.6632312 -0.4379797 MULTIPOLYGON (((-3627004 69...\n7  -0.7170277  0.2119119 MULTIPOLYGON (((-3627004 69...\n8  -0.2851140 -0.5277670 MULTIPOLYGON (((-3627004 69...\n9  -0.7029525 -0.1907527 MULTIPOLYGON (((-3627004 69...\n10 -0.6200221  0.4378114 MULTIPOLYGON (((-3627004 69..."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#visualizing-gi-value",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#visualizing-gi-value",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "5.6 Visualizing Gi* Value",
    "text": "5.6 Visualizing Gi* Value\n\n5.6.1 Function Creation for Gi* Value\n\nsummary(comJakGi$p_sim)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n0.02000 0.02000 0.02000 0.02018 0.02000 0.06000 \n\n\n\ngiPlotFun <- function(date) {\n  \n  GI = tm_shape(filter(comJakGi, Date == date)) +\n    tm_fill(\"gi_star\") +\n    tm_borders(alpha = 0.5) +\n    tm_layout(main.title = paste(\"Gi* of Vaccination Rate\", date), \n              main.title.size = 0.7)\n  \n  PVal = tm_shape(filter(comJakGi, Date == date)) +\n    tm_fill(\"p_sim\") +\n    tm_borders(alpha = 0.5) +\n    tm_layout(main.title = paste(\"P-value of Vaccination Rate\", date), \n              main.title.size = 0.7)\n  \n  tmap_arrange(GI, PVal)\n}\n\n\n\n5.6.2 Gi* and P-Value for July 21\n\ntmap_mode(\"plot\")\ngiPlotFun(\"2021-07-31\")\n\n\n\n\n\n\n5.6.3 Gi* and P-Value for Aug 21\n\ntmap_mode(\"plot\")\ngiPlotFun(\"2021-08-31\")\n\n\n\n\n\n\n5.6.4 Gi* and P-Value for Sep 21\n\ntmap_mode(\"plot\")\ngiPlotFun(\"2021-09-30\")\n\n\n\n\n\n\n5.6.5 Gi* and P-Value for Oct 21\n\ntmap_mode(\"plot\")\ngiPlotFun(\"2021-10-31\")\n\n\n\n\n\n\n5.6.6 Gi* and P-Value for Nov 21\n\ntmap_mode(\"plot\")\ngiPlotFun(\"2021-11-30\")\n\n\n\n\n\n\n5.6.7 Gi* and P-Value for Dec 21\n\ntmap_mode(\"plot\")\ngiPlotFun(\"2021-12-31\")\n\n\n\n\n\n\n5.6.8 Gi* and P-Value for Jan 22\n\ntmap_mode(\"plot\")\ngiPlotFun(\"2022-01-31\")\n\n\n\n\n\n\n5.6.9 Gi* and P-Value for Feb 22\n\ntmap_mode(\"plot\")\ngiPlotFun(\"2022-02-27\")\n\n\n\n\n\n\n5.6.10 Gi* and P-Value for Mar 22\n\ntmap_mode(\"plot\")\ngiPlotFun(\"2022-03-31\")\n\n\n\n\n\n\n5.6.11 Gi* and P-Value for Apr 22\n\ntmap_mode(\"plot\")\ngiPlotFun(\"2022-04-30\")\n\n\n\n\n\n\n5.6.12 Gi* and P-Value for May 22\n\ntmap_mode(\"plot\")\ngiPlotFun(\"2022-05-31\")\n\n\n\n\n\n\n5.6.13 Gi* and P-Value for Jun 22\n\ntmap_mode(\"plot\")\ngiPlotFun(\"2022-06-30\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#visualizing-p_sim-0.05",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#visualizing-p_sim-0.05",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "5.7 Visualizing p_sim < 0.05",
    "text": "5.7 Visualizing p_sim < 0.05\n\njakPFilter <- comJakGi %>%\n  filter(p_sim < 0.05)\n\ntmap_mode(\"plot\")\ntm_shape(comJakGi) +\n  tm_fill(\"p_sim\")+\n  tm_polygons() \n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nWe can see that most of Jakata’s p_sim value is < 0.05, which is less than the significance level, we can reject the null hypothesis and conclude that there is sufficient evidence that the vaccination rate is significant."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#mann-kendal-test",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#mann-kendal-test",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "6.1 Mann-Kendal Test",
    "text": "6.1 Mann-Kendal Test\n\n6.1.1 Sub-District 1 - TAMAN SARI\n\ncbg <- jakGi %>%\n  ungroup() %>%\n  filter(Sub_District == \"TAMAN SARI\") %>%\n  select(Sub_District, Date, gi_star)\n\n\np <- ggplot(data = cbg,\n       aes(x = Date,\n           y = gi_star)) +\n  geom_line() +\n  theme_light()\n\nggplotly(p)\n\n\n\n\n\n\ncbg %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>%\n  tidyr::unnest_wider(mk)\n\n# A tibble: 1 x 5\n    tau    sl     S     D  varS\n  <dbl> <dbl> <dbl> <dbl> <dbl>\n1 0.152 0.537    10  66.0  213.\n\n\n\n\n\n\n\n\nNote\n\n\n\nSince the P value of 0.53 is > 0.05, the p-value is not significant. Results show an overall upwards trend but is an insignificant trend.\n\n\n\n\n6.1.2 Sub-District 2 - GAMBIR\n\ncbg <- jakGi %>%\n  ungroup() %>%\n  filter(Sub_District == \"GAMBIR\") %>%\n  select(Sub_District, Date, gi_star)\n\n\np <- ggplot(data = cbg,\n       aes(x = Date,\n           y = gi_star)) +\n  geom_line() +\n  theme_light()\n\nggplotly(p)\n\n\n\n\n\n\ncbg %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>%\n  tidyr::unnest_wider(mk)\n\n# A tibble: 1 x 5\n      tau    sl     S     D  varS\n    <dbl> <dbl> <dbl> <dbl> <dbl>\n1 -0.0606 0.837    -4  66.0  213.\n\n\n\n\n\n\n\n\nNote\n\n\n\nSince the P value of 0.8 is > 0.05, the p-value is not significant. Results show an overall upwards trend but is an insignificant trend.\n\n\n\n\n6.1.3 Sub-District 2 - SENEN\n\ncbg <- jakGi %>%\n  ungroup() %>%\n  filter(Sub_District == \"SENEN\") %>%\n  select(Sub_District, Date, gi_star)\n\n\np <- ggplot(data = cbg,\n       aes(x = Date,\n           y = gi_star)) +\n  geom_line() +\n  theme_light()\n\nggplotly(p)\n\n\n\n\n\n\ncbg %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>%\n  tidyr::unnest_wider(mk)\n\n# A tibble: 1 x 5\n    tau    sl     S     D  varS\n  <dbl> <dbl> <dbl> <dbl> <dbl>\n1 0.121 0.631     8  66.0  213.\n\n\n\n\n\n\n\n\nNote\n\n\n\nSince the P value of 0.6 is > 0.05, the p-value is not significant. Results show an overall upwards trend at the start but is an insignificant trend."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#ehsa-map-of-gi-values-of-vaccination-rate",
    "href": "Take-Home_Ex/Take-Home_Ex02/Take-Home_Ex02.html#ehsa-map-of-gi-values-of-vaccination-rate",
    "title": "Take Home Exercise 2: Spatio-temporal Analysis of COVID-19 Vaccination Trends at the Sub-district Level, DKI Jakarta",
    "section": "6.2 EHSA map of Gi* Values of Vaccination Rate",
    "text": "6.2 EHSA map of Gi* Values of Vaccination Rate\n\nehsa <- jakGi %>%\n  group_by(Sub_District) %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>%\n  tidyr::unnest_wider(mk)\n\n\n6.2.1 Arrange to show Significant Emerging Hot/Cold Spots\n\nemerging <- ehsa %>%\n  arrange(sl, abs(tau)) %>%\n  slice(1:5)\n\n\n\n6.2.2 Performing Emerging Hotspot Analysis\n\nehsa <- emerging_hotspot_analysis(\n  x = vaccRateST, \n  .var = \"Vaccination_Rate\", \n  k = 1, \n  nsim = 99\n)\n\n\n\n6.2.3 Visualizing Distribution of EHSA Classes\n\nggplot(data = ehsa,\n       aes(x = classification, fill = classification)) +\n  geom_bar()\n\n\n\n\n\n\n6.2.4 Visualizing EHSA\n\njakEHSA <- comJak %>%\n  left_join(ehsa,\n            by = c(\"Sub_District\" = \"location\"))\n\n\n\n6.2.5 Plotting Categorical Choropleth Map\n\nehsaSIG <- jakEHSA %>%\n  filter(p_value < 0.05)\ntmap_mode(\"plot\")\ntm_shape(jakEHSA) +\n  tm_polygons() +\n  tm_borders(alpha = 0.5) +\ntm_shape(ehsaSIG) +\n  tm_fill(\"classification\") +\n  tm_borders(alpha = 0.4)\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nWe can see that the map is mostly Oscilating Hotspot compared to the rest. And Oscilating Coldspot being the least (Excluding no pattern detected).\n\nOscilating Hotspot\n\nFrom the map, it shows that it is spread out quite evenly\n\nOscilating Coldspot\n\nShows that is it spread out quite evenly but less on the north and east areas\n\nSporadic Coldspot\n\nShows that is it more concentrated to the center and lesser as it goes towards the outer areas\n\nNo pattern\n\nShows that it is located more towards the central area with non at the south area\n\n\nOverall, it seems like the center area seems to have more variety of patterns compared to the outer layers."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "IS415-GAA Daniel Chng",
    "section": "",
    "text": "Welcome to IS415 Geospatial Analyticvs and Applications.\nThis is the course website of IS415 I study this term. You will find my course work on this website."
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html",
    "href": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html",
    "title": "Hands On Exercise 9",
    "section": "",
    "text": "Link to tutorial: https://r4gdsa.netlify.app/chap13.html"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#update-crs",
    "href": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#update-crs",
    "title": "Hands On Exercise 9",
    "section": "Update CRS",
    "text": "Update CRS\n\nmpsz_svy21 <- st_transform(mpsz, 3414)\n\n\nst_crs(mpsz_svy21)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#reveal-extend",
    "href": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#reveal-extend",
    "title": "Hands On Exercise 9",
    "section": "Reveal extend",
    "text": "Reveal extend\n\nst_bbox(mpsz_svy21) #view extent\n\n     xmin      ymin      xmax      ymax \n 2667.538 15748.721 56396.440 50256.334"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#convert-aspatial-df-to-sf-object",
    "href": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#convert-aspatial-df-to-sf-object",
    "title": "Hands On Exercise 9",
    "section": "Convert aspatial df to sf object",
    "text": "Convert aspatial df to sf object\n\ncondo_resale.sf <- st_as_sf(condo_resale,\n                            coords = c(\"LONGITUDE\", \"LATITUDE\"),\n                            crs=4326) %>%\n  st_transform(crs=3414)\n\n\nhead(condo_resale.sf)\n\nSimple feature collection with 6 features and 21 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 22085.12 ymin: 29951.54 xmax: 41042.56 ymax: 34546.2\nProjected CRS: SVY21 / Singapore TM\n# A tibble: 6 × 22\n  POSTCODE SELLI…¹ AREA_…²   AGE PROX_…³ PROX_…⁴ PROX_…⁵ PROX_…⁶ PROX_…⁷ PROX_…⁸\n     <dbl>   <dbl>   <dbl> <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1   118635 3000000     309    30    7.94   0.166   2.52     6.62   1.77   0.0584\n2   288420 3880000     290    32    6.61   0.280   1.93     7.51   0.545  0.616 \n3   267833 3325000     248    33    6.90   0.429   0.502    6.46   0.378  0.141 \n4   258380 4250000     127     7    4.04   0.395   1.99     4.91   1.68   0.382 \n5   467169 1400000     145    28   11.8    0.119   1.12     6.41   0.565  0.461 \n6   466472 1320000     139    22   10.3    0.125   0.789    5.09   0.781  0.0994\n# … with 12 more variables: PROX_MRT <dbl>, PROX_PARK <dbl>,\n#   PROX_PRIMARY_SCH <dbl>, PROX_TOP_PRIMARY_SCH <dbl>,\n#   PROX_SHOPPING_MALL <dbl>, PROX_SUPERMARKET <dbl>, PROX_BUS_STOP <dbl>,\n#   NO_Of_UNITS <dbl>, FAMILY_FRIENDLY <dbl>, FREEHOLD <dbl>,\n#   LEASEHOLD_99YR <dbl>, geometry <POINT [m]>, and abbreviated variable names\n#   ¹​SELLING_PRICE, ²​AREA_SQM, ³​PROX_CBD, ⁴​PROX_CHILDCARE, ⁵​PROX_ELDERLYCARE,\n#   ⁶​PROX_URA_GROWTH_AREA, ⁷​PROX_HAWKER_MARKET, ⁸​PROX_KINDERGARTEN"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#using-statistical-graphic",
    "href": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#using-statistical-graphic",
    "title": "Hands On Exercise 9",
    "section": "Using statistical graphic",
    "text": "Using statistical graphic\n\nggplot(data=condo_resale.sf, aes(x=`SELLING_PRICE`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\n\n\n\n\ncondo_resale.sf <- condo_resale.sf %>%\n  mutate(`LOG_SELLING_PRICE` = log(SELLING_PRICE))\n\n\nggplot(data=condo_resale.sf, aes(x=`LOG_SELLING_PRICE`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#multiple-histogram-plots-distributions-of-variables",
    "href": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#multiple-histogram-plots-distributions-of-variables",
    "title": "Hands On Exercise 9",
    "section": "Multiple Histogram Plots distributions of variables",
    "text": "Multiple Histogram Plots distributions of variables\n\nAREA_SQM <- ggplot(data=condo_resale.sf, aes(x= `AREA_SQM`)) + \n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nAGE <- ggplot(data=condo_resale.sf, aes(x= `AGE`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_CBD <- ggplot(data=condo_resale.sf, aes(x= `PROX_CBD`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_CHILDCARE <- ggplot(data=condo_resale.sf, aes(x= `PROX_CHILDCARE`)) + \n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_ELDERLYCARE <- ggplot(data=condo_resale.sf, aes(x= `PROX_ELDERLYCARE`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_URA_GROWTH_AREA <- ggplot(data=condo_resale.sf, \n                               aes(x= `PROX_URA_GROWTH_AREA`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_HAWKER_MARKET <- ggplot(data=condo_resale.sf, aes(x= `PROX_HAWKER_MARKET`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_KINDERGARTEN <- ggplot(data=condo_resale.sf, aes(x= `PROX_KINDERGARTEN`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_MRT <- ggplot(data=condo_resale.sf, aes(x= `PROX_MRT`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_PARK <- ggplot(data=condo_resale.sf, aes(x= `PROX_PARK`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_PRIMARY_SCH <- ggplot(data=condo_resale.sf, aes(x= `PROX_PRIMARY_SCH`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_TOP_PRIMARY_SCH <- ggplot(data=condo_resale.sf, \n                               aes(x= `PROX_TOP_PRIMARY_SCH`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nggpubr::ggarrange(AREA_SQM, AGE, PROX_CBD, PROX_CHILDCARE, PROX_ELDERLYCARE, \n          PROX_URA_GROWTH_AREA, PROX_HAWKER_MARKET, PROX_KINDERGARTEN, PROX_MRT,\n          PROX_PARK, PROX_PRIMARY_SCH, PROX_TOP_PRIMARY_SCH,  \n          ncol = 3, nrow = 4)"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#draw-statistical-point-map",
    "href": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#draw-statistical-point-map",
    "title": "Hands On Exercise 9",
    "section": "Draw statistical Point Map",
    "text": "Draw statistical Point Map\n\ntmap_mode(\"view\")\n\n\ntmap_options(check.and.fix = TRUE)\ntm_shape(mpsz_svy21)+\n  tm_polygons() +\ntm_shape(condo_resale.sf) +  \n  tm_dots(col = \"SELLING_PRICE\",\n          alpha = 0.6,\n          style=\"quantile\") +\n  tm_view(set.zoom.limits = c(11,14))\n\n\n\n\n\n\n\ntmap_mode(\"plot\")"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#hedonic-pricing-modelling",
    "href": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#hedonic-pricing-modelling",
    "title": "Hands On Exercise 9",
    "section": "Hedonic Pricing Modelling",
    "text": "Hedonic Pricing Modelling\n\nSimple Linear Regression Method\n\ncondo.slr <- lm(formula=SELLING_PRICE ~ AREA_SQM, data = condo_resale.sf)\n\n\nsummary(condo.slr)\n\n\nCall:\nlm(formula = SELLING_PRICE ~ AREA_SQM, data = condo_resale.sf)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-3695815  -391764   -87517   258900 13503875 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept) -258121.1    63517.2  -4.064 5.09e-05 ***\nAREA_SQM      14719.0      428.1  34.381  < 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 942700 on 1434 degrees of freedom\nMultiple R-squared:  0.4518,    Adjusted R-squared:  0.4515 \nF-statistic:  1182 on 1 and 1434 DF,  p-value: < 2.2e-16\n\n\nThe output report reveals that the SELLING_PRICE can be explained by using the formula:\n      *y = -258121.1 + 14719x1*\nThe R-squared of 0.4518 reveals that the simple regression model built is able to explain about 45% of the resale prices.\nSince p-value is much smaller than 0.0001, we will reject the null hypothesis that mean is a good estimator of SELLING_PRICE. This will allow us to infer that simple linear regression model above is a good estimator of SELLING_PRICE.\nThe Coefficients: section of the report reveals that the p-values of both the estimates of the Intercept and ARA_SQM are smaller than 0.001. In view of this, the null hypothesis of the B0 and B1 are equal to 0 will be rejected. As a results, we will be able to infer that the B0 and B1 are good parameter estimates.\nTo visualise the best fit curve on a scatterplot, we can incorporate lm() as a method function in ggplot’s geometry as shown in the code chunk below.\n\nggplot(data=condo_resale.sf,  \n       aes(x=`AREA_SQM`, y=`SELLING_PRICE`)) +\n  geom_point() +\n  geom_smooth(method = lm)\n\n\n\n\n\n\nMultiple Linear Regression Method\n\ncorrplot(cor(condo_resale[, 5:23]), diag = FALSE, order = \"AOE\",\n         tl.pos = \"td\", tl.cex = 0.5, method = \"number\", type = \"upper\")\n\n\n\n\nMatrix reorder is very important for mining the hiden structure and patter in the matrix. There are four methods in corrplot (parameter order), named “AOE”, “FPC”, “hclust”, “alphabet”. In the code chunk above, AOE order is used. It orders the variables by using the angular order of the eigenvectors method suggested by Michael Friendly.\nFrom the scatterplot matrix, it is clear that Freehold is highly correlated to LEASE_99YEAR. In view of this, it is wiser to only include either one of them in the subsequent model building. As a result, LEASE_99YEAR is excluded in the subsequent model building.\n\n\nBuilding a Hedonic pricing model using multiple linear regression method\n\ncondo.mlr <- lm(formula = SELLING_PRICE ~ AREA_SQM + AGE    + \n                  PROX_CBD + PROX_CHILDCARE + PROX_ELDERLYCARE +\n                  PROX_URA_GROWTH_AREA + PROX_HAWKER_MARKET + PROX_KINDERGARTEN + \n                  PROX_MRT  + PROX_PARK + PROX_PRIMARY_SCH + \n                  PROX_TOP_PRIMARY_SCH + PROX_SHOPPING_MALL + PROX_SUPERMARKET + \n                  PROX_BUS_STOP + NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, \n                data=condo_resale.sf)\nsummary(condo.mlr)\n\n\nCall:\nlm(formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD + PROX_CHILDCARE + \n    PROX_ELDERLYCARE + PROX_URA_GROWTH_AREA + PROX_HAWKER_MARKET + \n    PROX_KINDERGARTEN + PROX_MRT + PROX_PARK + PROX_PRIMARY_SCH + \n    PROX_TOP_PRIMARY_SCH + PROX_SHOPPING_MALL + PROX_SUPERMARKET + \n    PROX_BUS_STOP + NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, \n    data = condo_resale.sf)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-3475964  -293923   -23069   241043 12260381 \n\nCoefficients:\n                       Estimate Std. Error t value Pr(>|t|)    \n(Intercept)           481728.40  121441.01   3.967 7.65e-05 ***\nAREA_SQM               12708.32     369.59  34.385  < 2e-16 ***\nAGE                   -24440.82    2763.16  -8.845  < 2e-16 ***\nPROX_CBD              -78669.78    6768.97 -11.622  < 2e-16 ***\nPROX_CHILDCARE       -351617.91  109467.25  -3.212  0.00135 ** \nPROX_ELDERLYCARE      171029.42   42110.51   4.061 5.14e-05 ***\nPROX_URA_GROWTH_AREA   38474.53   12523.57   3.072  0.00217 ** \nPROX_HAWKER_MARKET     23746.10   29299.76   0.810  0.41782    \nPROX_KINDERGARTEN     147468.99   82668.87   1.784  0.07466 .  \nPROX_MRT             -314599.68   57947.44  -5.429 6.66e-08 ***\nPROX_PARK             563280.50   66551.68   8.464  < 2e-16 ***\nPROX_PRIMARY_SCH      180186.08   65237.95   2.762  0.00582 ** \nPROX_TOP_PRIMARY_SCH    2280.04   20410.43   0.112  0.91107    \nPROX_SHOPPING_MALL   -206604.06   42840.60  -4.823 1.57e-06 ***\nPROX_SUPERMARKET      -44991.80   77082.64  -0.584  0.55953    \nPROX_BUS_STOP         683121.35  138353.28   4.938 8.85e-07 ***\nNO_Of_UNITS             -231.18      89.03  -2.597  0.00951 ** \nFAMILY_FRIENDLY       140340.77   47020.55   2.985  0.00289 ** \nFREEHOLD              359913.01   49220.22   7.312 4.38e-13 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 755800 on 1417 degrees of freedom\nMultiple R-squared:  0.6518,    Adjusted R-squared:  0.6474 \nF-statistic: 147.4 on 18 and 1417 DF,  p-value: < 2.2e-16\n\n\n\n\nPreparing publication quality table: olsrr method\n\ncondo.mlr1 <- lm(formula = SELLING_PRICE ~ AREA_SQM + AGE + \n                   PROX_CBD + PROX_CHILDCARE + PROX_ELDERLYCARE +\n                   PROX_URA_GROWTH_AREA + PROX_MRT  + PROX_PARK + \n                   PROX_PRIMARY_SCH + PROX_SHOPPING_MALL    + PROX_BUS_STOP + \n                   NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD,\n                 data=condo_resale.sf)\nols_regress(condo.mlr1)\n\n                             Model Summary                               \n------------------------------------------------------------------------\nR                       0.807       RMSE                     755957.289 \nR-Squared               0.651       Coef. Var                    43.168 \nAdj. R-Squared          0.647       MSE                571471422208.591 \nPred R-Squared          0.638       MAE                      414819.628 \n------------------------------------------------------------------------\n RMSE: Root Mean Square Error \n MSE: Mean Square Error \n MAE: Mean Absolute Error \n\n                                     ANOVA                                       \n--------------------------------------------------------------------------------\n                    Sum of                                                      \n                   Squares          DF         Mean Square       F         Sig. \n--------------------------------------------------------------------------------\nRegression    1.512586e+15          14        1.080418e+14    189.059    0.0000 \nResidual      8.120609e+14        1421    571471422208.591                      \nTotal         2.324647e+15        1435                                          \n--------------------------------------------------------------------------------\n\n                                               Parameter Estimates                                                \n-----------------------------------------------------------------------------------------------------------------\n               model           Beta    Std. Error    Std. Beta       t        Sig           lower          upper \n-----------------------------------------------------------------------------------------------------------------\n         (Intercept)     527633.222    108183.223                   4.877    0.000     315417.244     739849.200 \n            AREA_SQM      12777.523       367.479        0.584     34.771    0.000      12056.663      13498.382 \n                 AGE     -24687.739      2754.845       -0.167     -8.962    0.000     -30091.739     -19283.740 \n            PROX_CBD     -77131.323      5763.125       -0.263    -13.384    0.000     -88436.469     -65826.176 \n      PROX_CHILDCARE    -318472.751    107959.512       -0.084     -2.950    0.003    -530249.889    -106695.613 \n    PROX_ELDERLYCARE     185575.623     39901.864        0.090      4.651    0.000     107302.737     263848.510 \nPROX_URA_GROWTH_AREA      39163.254     11754.829        0.060      3.332    0.001      16104.571      62221.936 \n            PROX_MRT    -294745.107     56916.367       -0.112     -5.179    0.000    -406394.234    -183095.980 \n           PROX_PARK     570504.807     65507.029        0.150      8.709    0.000     442003.938     699005.677 \n    PROX_PRIMARY_SCH     159856.136     60234.599        0.062      2.654    0.008      41697.849     278014.424 \n  PROX_SHOPPING_MALL    -220947.251     36561.832       -0.115     -6.043    0.000    -292668.213    -149226.288 \n       PROX_BUS_STOP     682482.221    134513.243        0.134      5.074    0.000     418616.359     946348.082 \n         NO_Of_UNITS       -245.480        87.947       -0.053     -2.791    0.005       -418.000        -72.961 \n     FAMILY_FRIENDLY     146307.576     46893.021        0.057      3.120    0.002      54320.593     238294.560 \n            FREEHOLD     350599.812     48506.485        0.136      7.228    0.000     255447.802     445751.821 \n-----------------------------------------------------------------------------------------------------------------\n\n\n\n\nPreparing publication quality table: gtsummary method\n\ntbl_regression(condo.mlr1, intercept = TRUE)\n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Beta\n      95% CI1\n      p-value\n    \n  \n  \n    (Intercept)\n527,633\n315,417, 739,849\n<0.001\n    AREA_SQM\n12,778\n12,057, 13,498\n<0.001\n    AGE\n-24,688\n-30,092, -19,284\n<0.001\n    PROX_CBD\n-77,131\n-88,436, -65,826\n<0.001\n    PROX_CHILDCARE\n-318,473\n-530,250, -106,696\n0.003\n    PROX_ELDERLYCARE\n185,576\n107,303, 263,849\n<0.001\n    PROX_URA_GROWTH_AREA\n39,163\n16,105, 62,222\n<0.001\n    PROX_MRT\n-294,745\n-406,394, -183,096\n<0.001\n    PROX_PARK\n570,505\n442,004, 699,006\n<0.001\n    PROX_PRIMARY_SCH\n159,856\n41,698, 278,014\n0.008\n    PROX_SHOPPING_MALL\n-220,947\n-292,668, -149,226\n<0.001\n    PROX_BUS_STOP\n682,482\n418,616, 946,348\n<0.001\n    NO_Of_UNITS\n-245\n-418, -73\n0.005\n    FAMILY_FRIENDLY\n146,308\n54,321, 238,295\n0.002\n    FREEHOLD\n350,600\n255,448, 445,752\n<0.001\n  \n  \n  \n    \n      1 CI = Confidence Interval\n    \n  \n\n\n\n\nWith gtsummary package, model statistics can be included in the report by either appending them to the report table by using add_glance_table() or adding as a table source note by using add_glance_source_note() as shown in the code chunk below.\n\ntbl_regression(condo.mlr1, \n               intercept = TRUE) %>% \n  add_glance_source_note(\n    label = list(sigma ~ \"\\U03C3\"),\n    include = c(r.squared, adj.r.squared, \n                AIC, statistic,\n                p.value, sigma))\n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Beta\n      95% CI1\n      p-value\n    \n  \n  \n    (Intercept)\n527,633\n315,417, 739,849\n<0.001\n    AREA_SQM\n12,778\n12,057, 13,498\n<0.001\n    AGE\n-24,688\n-30,092, -19,284\n<0.001\n    PROX_CBD\n-77,131\n-88,436, -65,826\n<0.001\n    PROX_CHILDCARE\n-318,473\n-530,250, -106,696\n0.003\n    PROX_ELDERLYCARE\n185,576\n107,303, 263,849\n<0.001\n    PROX_URA_GROWTH_AREA\n39,163\n16,105, 62,222\n<0.001\n    PROX_MRT\n-294,745\n-406,394, -183,096\n<0.001\n    PROX_PARK\n570,505\n442,004, 699,006\n<0.001\n    PROX_PRIMARY_SCH\n159,856\n41,698, 278,014\n0.008\n    PROX_SHOPPING_MALL\n-220,947\n-292,668, -149,226\n<0.001\n    PROX_BUS_STOP\n682,482\n418,616, 946,348\n<0.001\n    NO_Of_UNITS\n-245\n-418, -73\n0.005\n    FAMILY_FRIENDLY\n146,308\n54,321, 238,295\n0.002\n    FREEHOLD\n350,600\n255,448, 445,752\n<0.001\n  \n  \n    \n      R² = 0.651; Adjusted R² = 0.647; AIC = 42,967; Statistic = 189; p-value = <0.001; σ = 755,957\n    \n  \n  \n    \n      1 CI = Confidence Interval\n    \n  \n\n\n\n\n\n\nChecking multicolinearity\nIn this section, we would like to introduce you a fantastic R package specially programmed for performing OLS regression. It is called olsrr. It provides a collection of very useful methods for building better multiple linear regression models:\n\ncomprehensive regression output\nresidual diagnostics\nmeasures of influence\nheteroskedasticity tests\ncollinearity diagnostics\nmodel fit assessment\nvariable contribution assessment\nvariable selection procedures\n\nIn the code chunk below, the ols_vif_tol() of olsrr package is used to test if there are sign of multicollinearity.\n\nols_vif_tol(condo.mlr1)\n\n              Variables Tolerance      VIF\n1              AREA_SQM 0.8728554 1.145665\n2                   AGE 0.7071275 1.414172\n3              PROX_CBD 0.6356147 1.573280\n4        PROX_CHILDCARE 0.3066019 3.261559\n5      PROX_ELDERLYCARE 0.6598479 1.515501\n6  PROX_URA_GROWTH_AREA 0.7510311 1.331503\n7              PROX_MRT 0.5236090 1.909822\n8             PROX_PARK 0.8279261 1.207837\n9      PROX_PRIMARY_SCH 0.4524628 2.210126\n10   PROX_SHOPPING_MALL 0.6738795 1.483945\n11        PROX_BUS_STOP 0.3514118 2.845664\n12          NO_Of_UNITS 0.6901036 1.449058\n13      FAMILY_FRIENDLY 0.7244157 1.380423\n14             FREEHOLD 0.6931163 1.442759\n\n\n\n\nTest for Non-Linearity\nIn multiple linear regression, it is important for us to test the assumption that linearity and additivity of the relationship between dependent and independent variables.\nIn the code chunk below, the ols_plot_resid_fit() of olsrr package is used to perform linearity assumption test.\n\nols_plot_resid_fit(condo.mlr1)\n\n\n\n\nThe figure above reveals that most of the data poitns are scattered around the 0 line, hence we can safely conclude that the relationships between the dependent variable and independent variables are linear.\n\n\nTest for Normality Assumption\n\nols_plot_resid_hist(condo.mlr1)\n\n\n\n\nThe figure reveals that the residual of the multiple linear regression model (i.e. condo.mlr1) is resemble normal distribution.\nIf you prefer formal statistical test methods, the ols_test_normality() of olsrr package can be used as shown in the code chun below.\n\nols_test_normality(condo.mlr1)\n\n-----------------------------------------------\n       Test             Statistic       pvalue  \n-----------------------------------------------\nShapiro-Wilk              0.6856         0.0000 \nKolmogorov-Smirnov        0.1366         0.0000 \nCramer-von Mises         121.0768        0.0000 \nAnderson-Darling         67.9551         0.0000 \n-----------------------------------------------\n\n\n\n\nTesting for Spatial Autocorrelation\n\nmlr.output <- as.data.frame(condo.mlr1$residuals)\n\n\ncondo_resale.res.sf <- cbind(condo_resale.sf, \n                        condo.mlr1$residuals) %>%\nrename(`MLR_RES` = `condo.mlr1.residuals`)\n\n\ncondo_resale.sp <- as_Spatial(condo_resale.res.sf)\ncondo_resale.sp\n\nclass       : SpatialPointsDataFrame \nfeatures    : 1436 \nextent      : 14940.85, 43352.45, 24765.67, 48382.81  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \nvariables   : 23\nnames       : POSTCODE, SELLING_PRICE, AREA_SQM, AGE,    PROX_CBD, PROX_CHILDCARE, PROX_ELDERLYCARE, PROX_URA_GROWTH_AREA, PROX_HAWKER_MARKET, PROX_KINDERGARTEN,    PROX_MRT,   PROX_PARK, PROX_PRIMARY_SCH, PROX_TOP_PRIMARY_SCH, PROX_SHOPPING_MALL, ... \nmin values  :    18965,        540000,       34,   0, 0.386916393,    0.004927023,      0.054508623,          0.214539508,        0.051817113,       0.004927023, 0.052779424, 0.029064164,      0.077106132,          0.077106132,                  0, ... \nmax values  :   828833,       1.8e+07,      619,  37, 19.18042832,     3.46572633,      3.949157205,           9.15540001,        5.374348075,       2.229045366,  3.48037319,  2.16104919,      3.928989144,          6.748192062,        3.477433767, ... \n\n\n\ntmap_mode(\"view\")\ntm_shape(mpsz_svy21)+\n  tmap_options(check.and.fix = TRUE) +\n  tm_polygons(alpha = 0.4) +\ntm_shape(condo_resale.res.sf) +  \n  tm_dots(col = \"MLR_RES\",\n          alpha = 0.6,\n          style=\"quantile\") +\n  tm_view(set.zoom.limits = c(11,14))\n\n\n\n\n\n\n\ntmap_mode(\"plot\")\n\n\nnb <- dnearneigh(coordinates(condo_resale.sp), 0, 1500, longlat = FALSE)\nsummary(nb)\n\nNeighbour list object:\nNumber of regions: 1436 \nNumber of nonzero links: 66266 \nPercentage nonzero weights: 3.213526 \nAverage number of links: 46.14624 \nLink number distribution:\n\n  1   3   5   7   9  10  11  12  13  14  15  16  17  18  19  20  21  22  23  24 \n  3   3   9   4   3  15  10  19  17  45  19   5  14  29  19   6  35  45  18  47 \n 25  26  27  28  29  30  31  32  33  34  35  36  37  38  39  40  41  42  43  44 \n 16  43  22  26  21  11   9  23  22  13  16  25  21  37  16  18   8  21   4  12 \n 45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60  61  62  63  64 \n  8  36  18  14  14  43  11  12   8  13  12  13   4   5   6  12  11  20  29  33 \n 65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84 \n 15  20  10  14  15  15  11  16  12  10   8  19  12  14   9   8   4  13  11   6 \n 85  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 101 102 103 104 \n  4   9   4   4   4   6   2  16   9   4   5   9   3   9   4   2   1   2   1   1 \n105 106 107 108 109 110 112 116 125 \n  1   5   9   2   1   3   1   1   1 \n3 least connected regions:\n193 194 277 with 1 link\n1 most connected region:\n285 with 125 links\n\n\nNext, nb2listw() of spdep packge will be used to convert the output neighbours lists (i.e. nb) into a spatial weights.\n\nnb_lw <- nb2listw(nb, style = 'W')\nsummary(nb_lw)\n\nCharacteristics of weights list object:\nNeighbour list object:\nNumber of regions: 1436 \nNumber of nonzero links: 66266 \nPercentage nonzero weights: 3.213526 \nAverage number of links: 46.14624 \nLink number distribution:\n\n  1   3   5   7   9  10  11  12  13  14  15  16  17  18  19  20  21  22  23  24 \n  3   3   9   4   3  15  10  19  17  45  19   5  14  29  19   6  35  45  18  47 \n 25  26  27  28  29  30  31  32  33  34  35  36  37  38  39  40  41  42  43  44 \n 16  43  22  26  21  11   9  23  22  13  16  25  21  37  16  18   8  21   4  12 \n 45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60  61  62  63  64 \n  8  36  18  14  14  43  11  12   8  13  12  13   4   5   6  12  11  20  29  33 \n 65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84 \n 15  20  10  14  15  15  11  16  12  10   8  19  12  14   9   8   4  13  11   6 \n 85  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 101 102 103 104 \n  4   9   4   4   4   6   2  16   9   4   5   9   3   9   4   2   1   2   1   1 \n105 106 107 108 109 110 112 116 125 \n  1   5   9   2   1   3   1   1   1 \n3 least connected regions:\n193 194 277 with 1 link\n1 most connected region:\n285 with 125 links\n\nWeights style: W \nWeights constants summary:\n     n      nn   S0       S1       S2\nW 1436 2062096 1436 94.81916 5798.341\n\n\nNext, lm.morantest() of spdep package will be used to perform Moran’s I test for residual spatial autocorrelation\n\nlm.morantest(condo.mlr1, nb_lw)\n\n\n    Global Moran I for regression residuals\n\ndata:  \nmodel: lm(formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD +\nPROX_CHILDCARE + PROX_ELDERLYCARE + PROX_URA_GROWTH_AREA + PROX_MRT +\nPROX_PARK + PROX_PRIMARY_SCH + PROX_SHOPPING_MALL + PROX_BUS_STOP +\nNO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, data = condo_resale.sf)\nweights: nb_lw\n\nMoran I statistic standard deviate = 24.366, p-value < 2.2e-16\nalternative hypothesis: greater\nsample estimates:\nObserved Moran I      Expectation         Variance \n    1.438876e-01    -5.487594e-03     3.758259e-05"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#building-fixed-bandwidth-gwr-model",
    "href": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#building-fixed-bandwidth-gwr-model",
    "title": "Hands On Exercise 9",
    "section": "Building fixed bandwidth GWR Model",
    "text": "Building fixed bandwidth GWR Model\n\nComputing fixed bandwidth\nIn the code chunk below bw.gwr() of GWModel package is used to determine the optimal fixed bandwidth to use in the model. Notice that the argument adaptive is set to FALSE indicates that we are interested to compute the fixed bandwidth.\nThere are two possible approaches can be uused to determine the stopping rule, they are: CV cross-validation approach and AIC corrected (AICc) approach. We define the stopping rule using approach argeement.\n\nbw.fixed <- bw.gwr(formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD + \n                     PROX_CHILDCARE + PROX_ELDERLYCARE  + PROX_URA_GROWTH_AREA + \n                     PROX_MRT   + PROX_PARK + PROX_PRIMARY_SCH + \n                     PROX_SHOPPING_MALL + PROX_BUS_STOP + NO_Of_UNITS + \n                     FAMILY_FRIENDLY + FREEHOLD, \n                   data=condo_resale.sp, \n                   approach=\"CV\", \n                   kernel=\"gaussian\", \n                   adaptive=FALSE, \n                   longlat=FALSE)\n\nFixed bandwidth: 17660.96 CV score: 8.259118e+14 \nFixed bandwidth: 10917.26 CV score: 7.970454e+14 \nFixed bandwidth: 6749.419 CV score: 7.273273e+14 \nFixed bandwidth: 4173.553 CV score: 6.300006e+14 \nFixed bandwidth: 2581.58 CV score: 5.404958e+14 \nFixed bandwidth: 1597.687 CV score: 4.857515e+14 \nFixed bandwidth: 989.6077 CV score: 4.722431e+14 \nFixed bandwidth: 613.7939 CV score: 1.37828e+16 \nFixed bandwidth: 1221.873 CV score: 4.778717e+14 \nFixed bandwidth: 846.0596 CV score: 4.791629e+14 \nFixed bandwidth: 1078.325 CV score: 4.751406e+14 \nFixed bandwidth: 934.7772 CV score: 4.72518e+14 \nFixed bandwidth: 1023.495 CV score: 4.730305e+14 \nFixed bandwidth: 968.6643 CV score: 4.721317e+14 \nFixed bandwidth: 955.7206 CV score: 4.722072e+14 \nFixed bandwidth: 976.6639 CV score: 4.721387e+14 \nFixed bandwidth: 963.7202 CV score: 4.721484e+14 \nFixed bandwidth: 971.7199 CV score: 4.721293e+14 \nFixed bandwidth: 973.6083 CV score: 4.721309e+14 \nFixed bandwidth: 970.5527 CV score: 4.721295e+14 \nFixed bandwidth: 972.4412 CV score: 4.721296e+14 \nFixed bandwidth: 971.2741 CV score: 4.721292e+14 \nFixed bandwidth: 970.9985 CV score: 4.721293e+14 \nFixed bandwidth: 971.4443 CV score: 4.721292e+14 \nFixed bandwidth: 971.5496 CV score: 4.721293e+14 \nFixed bandwidth: 971.3793 CV score: 4.721292e+14 \nFixed bandwidth: 971.3391 CV score: 4.721292e+14 \nFixed bandwidth: 971.3143 CV score: 4.721292e+14 \nFixed bandwidth: 971.3545 CV score: 4.721292e+14 \nFixed bandwidth: 971.3296 CV score: 4.721292e+14 \nFixed bandwidth: 971.345 CV score: 4.721292e+14 \nFixed bandwidth: 971.3355 CV score: 4.721292e+14 \nFixed bandwidth: 971.3413 CV score: 4.721292e+14 \nFixed bandwidth: 971.3377 CV score: 4.721292e+14 \nFixed bandwidth: 971.34 CV score: 4.721292e+14 \nFixed bandwidth: 971.3405 CV score: 4.721292e+14 \nFixed bandwidth: 971.3408 CV score: 4.721292e+14 \nFixed bandwidth: 971.341 CV score: 4.721292e+14 \nFixed bandwidth: 971.3407 CV score: 4.721292e+14 \nFixed bandwidth: 971.3409 CV score: 4.721292e+14 \nFixed bandwidth: 971.3408 CV score: 4.721292e+14 \nFixed bandwidth: 971.3408 CV score: 4.721292e+14 \n\n\nThe result shows that the recommended bandwidth is 971.3405 metres\n\n\nFWModel method - fixed bandwidth\n\ngwr.fixed <- gwr.basic(formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD + \n                         PROX_CHILDCARE + PROX_ELDERLYCARE  + PROX_URA_GROWTH_AREA + \n                         PROX_MRT   + PROX_PARK + PROX_PRIMARY_SCH + \n                         PROX_SHOPPING_MALL + PROX_BUS_STOP + NO_Of_UNITS + \n                         FAMILY_FRIENDLY + FREEHOLD, \n                       data=condo_resale.sp, \n                       bw=bw.fixed, \n                       kernel = 'gaussian', \n                       longlat = FALSE)\n\n\ngwr.fixed\n\n   ***********************************************************************\n   *                       Package   GWmodel                             *\n   ***********************************************************************\n   Program starts at: 2023-03-20 08:41:44 \n   Call:\n   gwr.basic(formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD + \n    PROX_CHILDCARE + PROX_ELDERLYCARE + PROX_URA_GROWTH_AREA + \n    PROX_MRT + PROX_PARK + PROX_PRIMARY_SCH + PROX_SHOPPING_MALL + \n    PROX_BUS_STOP + NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, \n    data = condo_resale.sp, bw = bw.fixed, kernel = \"gaussian\", \n    longlat = FALSE)\n\n   Dependent (y) variable:  SELLING_PRICE\n   Independent variables:  AREA_SQM AGE PROX_CBD PROX_CHILDCARE PROX_ELDERLYCARE PROX_URA_GROWTH_AREA PROX_MRT PROX_PARK PROX_PRIMARY_SCH PROX_SHOPPING_MALL PROX_BUS_STOP NO_Of_UNITS FAMILY_FRIENDLY FREEHOLD\n   Number of data points: 1436\n   ***********************************************************************\n   *                    Results of Global Regression                     *\n   ***********************************************************************\n\n   Call:\n    lm(formula = formula, data = data)\n\n   Residuals:\n     Min       1Q   Median       3Q      Max \n-3470778  -298119   -23481   248917 12234210 \n\n   Coefficients:\n                          Estimate Std. Error t value Pr(>|t|)    \n   (Intercept)           527633.22  108183.22   4.877 1.20e-06 ***\n   AREA_SQM               12777.52     367.48  34.771  < 2e-16 ***\n   AGE                   -24687.74    2754.84  -8.962  < 2e-16 ***\n   PROX_CBD              -77131.32    5763.12 -13.384  < 2e-16 ***\n   PROX_CHILDCARE       -318472.75  107959.51  -2.950 0.003231 ** \n   PROX_ELDERLYCARE      185575.62   39901.86   4.651 3.61e-06 ***\n   PROX_URA_GROWTH_AREA   39163.25   11754.83   3.332 0.000885 ***\n   PROX_MRT             -294745.11   56916.37  -5.179 2.56e-07 ***\n   PROX_PARK             570504.81   65507.03   8.709  < 2e-16 ***\n   PROX_PRIMARY_SCH      159856.14   60234.60   2.654 0.008046 ** \n   PROX_SHOPPING_MALL   -220947.25   36561.83  -6.043 1.93e-09 ***\n   PROX_BUS_STOP         682482.22  134513.24   5.074 4.42e-07 ***\n   NO_Of_UNITS             -245.48      87.95  -2.791 0.005321 ** \n   FAMILY_FRIENDLY       146307.58   46893.02   3.120 0.001845 ** \n   FREEHOLD              350599.81   48506.48   7.228 7.98e-13 ***\n\n   ---Significance stars\n   Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n   Residual standard error: 756000 on 1421 degrees of freedom\n   Multiple R-squared: 0.6507\n   Adjusted R-squared: 0.6472 \n   F-statistic: 189.1 on 14 and 1421 DF,  p-value: < 2.2e-16 \n   ***Extra Diagnostic information\n   Residual sum of squares: 8.120609e+14\n   Sigma(hat): 752522.9\n   AIC:  42966.76\n   AICc:  42967.14\n   BIC:  41731.39\n   ***********************************************************************\n   *          Results of Geographically Weighted Regression              *\n   ***********************************************************************\n\n   *********************Model calibration information*********************\n   Kernel function: gaussian \n   Fixed bandwidth: 971.3408 \n   Regression points: the same locations as observations are used.\n   Distance metric: Euclidean distance metric is used.\n\n   ****************Summary of GWR coefficient estimates:******************\n                               Min.     1st Qu.      Median     3rd Qu.\n   Intercept            -3.5988e+07 -5.1998e+05  7.6780e+05  1.7412e+06\n   AREA_SQM              1.0003e+03  5.2758e+03  7.4740e+03  1.2301e+04\n   AGE                  -1.3475e+05 -2.0813e+04 -8.6260e+03 -3.7784e+03\n   PROX_CBD             -7.7047e+07 -2.3608e+05 -8.3600e+04  3.4645e+04\n   PROX_CHILDCARE       -6.0097e+06 -3.3667e+05 -9.7425e+04  2.9008e+05\n   PROX_ELDERLYCARE     -3.5000e+06 -1.5970e+05  3.1971e+04  1.9577e+05\n   PROX_URA_GROWTH_AREA -3.0170e+06 -8.2013e+04  7.0749e+04  2.2612e+05\n   PROX_MRT             -3.5282e+06 -6.5836e+05 -1.8833e+05  3.6922e+04\n   PROX_PARK            -1.2062e+06 -2.1732e+05  3.5383e+04  4.1335e+05\n   PROX_PRIMARY_SCH     -2.2695e+07 -1.7066e+05  4.8472e+04  5.1555e+05\n   PROX_SHOPPING_MALL   -7.2585e+06 -1.6684e+05 -1.0517e+04  1.5923e+05\n   PROX_BUS_STOP        -1.4676e+06 -4.5206e+04  3.7601e+05  1.1664e+06\n   NO_Of_UNITS          -1.3170e+03 -2.4822e+02 -3.0846e+01  2.5496e+02\n   FAMILY_FRIENDLY      -2.2749e+06 -1.1140e+05  7.6214e+03  1.6107e+05\n   FREEHOLD             -9.2067e+06  3.8073e+04  1.5169e+05  3.7528e+05\n                             Max.\n   Intercept            112793007\n   AREA_SQM                 21575\n   AGE                     434200\n   PROX_CBD               2704591\n   PROX_CHILDCARE         1654088\n   PROX_ELDERLYCARE      38867786\n   PROX_URA_GROWTH_AREA  78515685\n   PROX_MRT               3124310\n   PROX_PARK             18122416\n   PROX_PRIMARY_SCH       4637495\n   PROX_SHOPPING_MALL     1529951\n   PROX_BUS_STOP         11342166\n   NO_Of_UNITS              12907\n   FAMILY_FRIENDLY        1720744\n   FREEHOLD               6073633\n   ************************Diagnostic information*************************\n   Number of data points: 1436 \n   Effective number of parameters (2trace(S) - trace(S'S)): 438.3803 \n   Effective degrees of freedom (n-2trace(S) + trace(S'S)): 997.6197 \n   AICc (GWR book, Fotheringham, et al. 2002, p. 61, eq 2.33): 42263.61 \n   AIC (GWR book, Fotheringham, et al. 2002,GWR p. 96, eq. 4.22): 41632.36 \n   BIC (GWR book, Fotheringham, et al. 2002,GWR p. 61, eq. 2.34): 42515.71 \n   Residual sum of squares: 2.534071e+14 \n   R-square value:  0.8909911 \n   Adjusted R-square value:  0.8430417 \n\n   ***********************************************************************\n   Program stops at: 2023-03-20 08:41:45 \n\n\n\n\nBuilding Adaptive Bandwidth GWR Model\n\nComputing Adaptive bandwidth\nSimilar to the earlier section, we will first use bw.gwr() to determine the recommended data point to use.\nThe code chunk used look very similar to the one used to compute the fixed bandwidth except the adaptive argument has changed to TRUE.\n\nbw.adaptive <- bw.gwr(formula = SELLING_PRICE ~ AREA_SQM + AGE  + \n                        PROX_CBD + PROX_CHILDCARE + PROX_ELDERLYCARE    + \n                        PROX_URA_GROWTH_AREA + PROX_MRT + PROX_PARK + \n                        PROX_PRIMARY_SCH + PROX_SHOPPING_MALL   + PROX_BUS_STOP + \n                        NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, \n                      data=condo_resale.sp, \n                      approach=\"CV\", \n                      kernel=\"gaussian\", \n                      adaptive=TRUE, \n                      longlat=FALSE)\n\nAdaptive bandwidth: 895 CV score: 7.952401e+14 \nAdaptive bandwidth: 561 CV score: 7.667364e+14 \nAdaptive bandwidth: 354 CV score: 6.953454e+14 \nAdaptive bandwidth: 226 CV score: 6.15223e+14 \nAdaptive bandwidth: 147 CV score: 5.674373e+14 \nAdaptive bandwidth: 98 CV score: 5.426745e+14 \nAdaptive bandwidth: 68 CV score: 5.168117e+14 \nAdaptive bandwidth: 49 CV score: 4.859631e+14 \nAdaptive bandwidth: 37 CV score: 4.646518e+14 \nAdaptive bandwidth: 30 CV score: 4.422088e+14 \nAdaptive bandwidth: 25 CV score: 4.430816e+14 \nAdaptive bandwidth: 32 CV score: 4.505602e+14 \nAdaptive bandwidth: 27 CV score: 4.462172e+14 \nAdaptive bandwidth: 30 CV score: 4.422088e+14 \n\n\n\n\nConstructing adaptive bandwidth gwr model\n\ngwr.adaptive <- gwr.basic(formula = SELLING_PRICE ~ AREA_SQM + AGE + \n                            PROX_CBD + PROX_CHILDCARE + PROX_ELDERLYCARE + \n                            PROX_URA_GROWTH_AREA + PROX_MRT + PROX_PARK + \n                            PROX_PRIMARY_SCH + PROX_SHOPPING_MALL + PROX_BUS_STOP + \n                            NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, \n                          data=condo_resale.sp, bw=bw.adaptive, \n                          kernel = 'gaussian', \n                          adaptive=TRUE, \n                          longlat = FALSE)\n\n\ngwr.adaptive\n\n   ***********************************************************************\n   *                       Package   GWmodel                             *\n   ***********************************************************************\n   Program starts at: 2023-03-20 08:41:58 \n   Call:\n   gwr.basic(formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD + \n    PROX_CHILDCARE + PROX_ELDERLYCARE + PROX_URA_GROWTH_AREA + \n    PROX_MRT + PROX_PARK + PROX_PRIMARY_SCH + PROX_SHOPPING_MALL + \n    PROX_BUS_STOP + NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, \n    data = condo_resale.sp, bw = bw.adaptive, kernel = \"gaussian\", \n    adaptive = TRUE, longlat = FALSE)\n\n   Dependent (y) variable:  SELLING_PRICE\n   Independent variables:  AREA_SQM AGE PROX_CBD PROX_CHILDCARE PROX_ELDERLYCARE PROX_URA_GROWTH_AREA PROX_MRT PROX_PARK PROX_PRIMARY_SCH PROX_SHOPPING_MALL PROX_BUS_STOP NO_Of_UNITS FAMILY_FRIENDLY FREEHOLD\n   Number of data points: 1436\n   ***********************************************************************\n   *                    Results of Global Regression                     *\n   ***********************************************************************\n\n   Call:\n    lm(formula = formula, data = data)\n\n   Residuals:\n     Min       1Q   Median       3Q      Max \n-3470778  -298119   -23481   248917 12234210 \n\n   Coefficients:\n                          Estimate Std. Error t value Pr(>|t|)    \n   (Intercept)           527633.22  108183.22   4.877 1.20e-06 ***\n   AREA_SQM               12777.52     367.48  34.771  < 2e-16 ***\n   AGE                   -24687.74    2754.84  -8.962  < 2e-16 ***\n   PROX_CBD              -77131.32    5763.12 -13.384  < 2e-16 ***\n   PROX_CHILDCARE       -318472.75  107959.51  -2.950 0.003231 ** \n   PROX_ELDERLYCARE      185575.62   39901.86   4.651 3.61e-06 ***\n   PROX_URA_GROWTH_AREA   39163.25   11754.83   3.332 0.000885 ***\n   PROX_MRT             -294745.11   56916.37  -5.179 2.56e-07 ***\n   PROX_PARK             570504.81   65507.03   8.709  < 2e-16 ***\n   PROX_PRIMARY_SCH      159856.14   60234.60   2.654 0.008046 ** \n   PROX_SHOPPING_MALL   -220947.25   36561.83  -6.043 1.93e-09 ***\n   PROX_BUS_STOP         682482.22  134513.24   5.074 4.42e-07 ***\n   NO_Of_UNITS             -245.48      87.95  -2.791 0.005321 ** \n   FAMILY_FRIENDLY       146307.58   46893.02   3.120 0.001845 ** \n   FREEHOLD              350599.81   48506.48   7.228 7.98e-13 ***\n\n   ---Significance stars\n   Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n   Residual standard error: 756000 on 1421 degrees of freedom\n   Multiple R-squared: 0.6507\n   Adjusted R-squared: 0.6472 \n   F-statistic: 189.1 on 14 and 1421 DF,  p-value: < 2.2e-16 \n   ***Extra Diagnostic information\n   Residual sum of squares: 8.120609e+14\n   Sigma(hat): 752522.9\n   AIC:  42966.76\n   AICc:  42967.14\n   BIC:  41731.39\n   ***********************************************************************\n   *          Results of Geographically Weighted Regression              *\n   ***********************************************************************\n\n   *********************Model calibration information*********************\n   Kernel function: gaussian \n   Adaptive bandwidth: 30 (number of nearest neighbours)\n   Regression points: the same locations as observations are used.\n   Distance metric: Euclidean distance metric is used.\n\n   ****************Summary of GWR coefficient estimates:******************\n                               Min.     1st Qu.      Median     3rd Qu.\n   Intercept            -1.3487e+08 -2.4669e+05  7.7928e+05  1.6194e+06\n   AREA_SQM              3.3188e+03  5.6285e+03  7.7825e+03  1.2738e+04\n   AGE                  -9.6746e+04 -2.9288e+04 -1.4043e+04 -5.6119e+03\n   PROX_CBD             -2.5330e+06 -1.6256e+05 -7.7242e+04  2.6624e+03\n   PROX_CHILDCARE       -1.2790e+06 -2.0175e+05  8.7158e+03  3.7778e+05\n   PROX_ELDERLYCARE     -1.6212e+06 -9.2050e+04  6.1029e+04  2.8184e+05\n   PROX_URA_GROWTH_AREA -7.2686e+06 -3.0350e+04  4.5869e+04  2.4613e+05\n   PROX_MRT             -4.3781e+07 -6.7282e+05 -2.2115e+05 -7.4593e+04\n   PROX_PARK            -2.9020e+06 -1.6782e+05  1.1601e+05  4.6572e+05\n   PROX_PRIMARY_SCH     -8.6418e+05 -1.6627e+05 -7.7853e+03  4.3222e+05\n   PROX_SHOPPING_MALL   -1.8272e+06 -1.3175e+05 -1.4049e+04  1.3799e+05\n   PROX_BUS_STOP        -2.0579e+06 -7.1461e+04  4.1104e+05  1.2071e+06\n   NO_Of_UNITS          -2.1993e+03 -2.3685e+02 -3.4699e+01  1.1657e+02\n   FAMILY_FRIENDLY      -5.9879e+05 -5.0927e+04  2.6173e+04  2.2481e+05\n   FREEHOLD             -1.6340e+05  4.0765e+04  1.9023e+05  3.7960e+05\n                            Max.\n   Intercept            18758355\n   AREA_SQM                23064\n   AGE                     13303\n   PROX_CBD             11346650\n   PROX_CHILDCARE        2892127\n   PROX_ELDERLYCARE      2465671\n   PROX_URA_GROWTH_AREA  7384059\n   PROX_MRT              1186242\n   PROX_PARK             2588497\n   PROX_PRIMARY_SCH      3381462\n   PROX_SHOPPING_MALL   38038564\n   PROX_BUS_STOP        12081592\n   NO_Of_UNITS              1010\n   FAMILY_FRIENDLY       2072414\n   FREEHOLD              1813995\n   ************************Diagnostic information*************************\n   Number of data points: 1436 \n   Effective number of parameters (2trace(S) - trace(S'S)): 350.3088 \n   Effective degrees of freedom (n-2trace(S) + trace(S'S)): 1085.691 \n   AICc (GWR book, Fotheringham, et al. 2002, p. 61, eq 2.33): 41982.22 \n   AIC (GWR book, Fotheringham, et al. 2002,GWR p. 96, eq. 4.22): 41546.74 \n   BIC (GWR book, Fotheringham, et al. 2002,GWR p. 61, eq. 2.34): 41914.08 \n   Residual sum of squares: 2.528227e+14 \n   R-square value:  0.8912425 \n   Adjusted R-square value:  0.8561185 \n\n   ***********************************************************************\n   Program stops at: 2023-03-20 08:42:00"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#visualizing-gwr-output",
    "href": "Hands-On_Ex/Hands-On_Ex09/Hands-On_Ex09.html#visualizing-gwr-output",
    "title": "Hands On Exercise 9",
    "section": "Visualizing GWR Output",
    "text": "Visualizing GWR Output\nIn addition to regression residuals, the output feature class table includes fields for observed and predicted y values, condition number (cond), Local R2, residuals, and explanatory variable coefficients and standard errors:\n\nCondition Number: this diagnostic evaluates local collinearity. In the presence of strong local collinearity, results become unstable. Results associated with condition numbers larger than 30, may be unreliable.\nLocal R2: these values range between 0.0 and 1.0 and indicate how well the local regression model fits observed y values. Very low values indicate the local model is performing poorly. Mapping the Local R2 values to see where GWR predicts well and where it predicts poorly may provide clues about important variables that may be missing from the regression model.\nPredicted: these are the estimated (or fitted) y values 3. computed by GWR.\nResiduals: to obtain the residual values, the fitted y values are subtracted from the observed y values. Standardized residuals have a mean of zero and a standard deviation of 1. A cold-to-hot rendered map of standardized residuals can be produce by using these values.\nCoefficient Standard Error: these values measure the reliability of each coefficient estimate. Confidence in those estimates are higher when standard errors are small in relation to the actual coefficient values. Large standard errors may indicate problems with local collinearity.\n\nThey are all stored in a SpatialPointsDataFrame or SpatialPolygonsDataFrame object integrated with fit.points, GWR coefficient estimates, y value, predicted values, coefficient standard errors and t-values in its “data” slot in an object called SDF of the output list.\n\nConverting SDF into sf data.frame\n\ncondo_resale.sf.adaptive <- st_as_sf(gwr.adaptive$SDF) %>%\n  st_transform(crs=3414)\n\n\ncondo_resale.sf.adaptive.svy21 <- st_transform(condo_resale.sf.adaptive, 3414)\ncondo_resale.sf.adaptive.svy21  \n\nSimple feature collection with 1436 features and 51 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 14940.85 ymin: 24765.67 xmax: 43352.45 ymax: 48382.81\nProjected CRS: SVY21 / Singapore TM\nFirst 10 features:\n    Intercept  AREA_SQM        AGE  PROX_CBD PROX_CHILDCARE PROX_ELDERLYCARE\n1   2050011.7  9561.892  -9514.634 -120681.9      319266.92       -393417.79\n2   1633128.2 16576.853 -58185.479 -149434.2      441102.18        325188.74\n3   3433608.2 13091.861 -26707.386 -259397.8     -120116.82        535855.81\n4    234358.9 20730.601 -93308.988 2426853.7      480825.28        314783.72\n5   2285804.9  6722.836 -17608.018 -316835.5       90764.78       -137384.61\n6  -3568877.4  6039.581 -26535.592  327306.1     -152531.19       -700392.85\n7  -2874842.4 16843.575 -59166.727 -983577.2     -177810.50       -122384.02\n8   2038086.0  6905.135 -17681.897 -285076.6       70259.40        -96012.78\n9   1718478.4  9580.703 -14401.128  105803.4     -657698.02       -123276.00\n10  3457054.0 14072.011 -31579.884 -234895.4       79961.45        548581.04\n   PROX_URA_GROWTH_AREA    PROX_MRT  PROX_PARK PROX_PRIMARY_SCH\n1            -159980.20  -299742.96 -172104.47        242668.03\n2            -142290.39 -2510522.23  523379.72       1106830.66\n3            -253621.21  -936853.28  209099.85        571462.33\n4           -2679297.89 -2039479.50 -759153.26       3127477.21\n5             303714.81   -44567.05  -10284.62         30413.56\n6             -28051.25   733566.47 1511488.92        320878.23\n7            1397676.38 -2745430.34  710114.74       1786570.95\n8             269368.71   -14552.99   73533.34         53359.73\n9            -361974.72  -476785.32 -132067.59        -40128.92\n10           -150024.38 -1503835.53  574155.47        108996.67\n   PROX_SHOPPING_MALL PROX_BUS_STOP  NO_Of_UNITS FAMILY_FRIENDLY  FREEHOLD\n1          300881.390     1210615.4  104.8290640       -9075.370  303955.6\n2          -87693.378     1843587.2 -288.3441183      310074.664  396221.3\n3         -126732.712     1411924.9   -9.5532945        5949.746  168821.7\n4          -29593.342     7225577.5 -161.3551620     1556178.531 1212515.6\n5           -7490.586      677577.0   42.2659674       58986.951  328175.2\n6          258583.881     1086012.6 -214.3671271      201992.641  471873.1\n7         -384251.210     5094060.5   -0.9212521      359659.512  408871.9\n8          -39634.902      735767.1   30.1741069       55602.506  347075.0\n9          276718.757     2815772.4  675.1615559      -30453.297  503872.8\n10        -454726.822     2123557.0  -21.3044311     -100935.586  213324.6\n         y    yhat    residual CV_Score Stud_residual Intercept_SE AREA_SQM_SE\n1  3000000 2886532   113468.16        0    0.38207013     516105.5    823.2860\n2  3880000 3466801   413198.52        0    1.01433140     488083.5    825.2380\n3  3325000 3616527  -291527.20        0   -0.83780678     963711.4    988.2240\n4  4250000 5435482 -1185481.63        0   -2.84614670     444185.5    617.4007\n5  1400000 1388166    11834.26        0    0.03404453    2119620.6   1376.2778\n6  1320000 1516702  -196701.94        0   -0.72065800   28572883.7   2348.0091\n7  3410000 3266881   143118.77        0    0.41291992     679546.6    893.5893\n8  1420000 1431955   -11955.27        0   -0.03033109    2217773.1   1415.2604\n9  2025000 1832799   192200.83        0    0.52018109     814281.8    943.8434\n10 2550000 2223364   326635.53        0    1.10559735    2410252.0   1271.4073\n      AGE_SE PROX_CBD_SE PROX_CHILDCARE_SE PROX_ELDERLYCARE_SE\n1   5889.782    37411.22          319111.1           120633.34\n2   6226.916    23615.06          299705.3            84546.69\n3   6510.236    56103.77          349128.5           129687.07\n4   6010.511   469337.41          304965.2           127150.69\n5   8180.361   410644.47          698720.6           327371.55\n6  14601.909  5272846.47         1141599.8          1653002.19\n7   8970.629   346164.20          530101.1           148598.71\n8   8661.309   438035.69          742532.8           399221.05\n9  11791.208    89148.35          704630.7           329683.30\n10  9941.980   173532.77          500976.2           281876.74\n   PROX_URA_GROWTH_AREA_SE PROX_MRT_SE PROX_PARK_SE PROX_PRIMARY_SCH_SE\n1                 56207.39    185181.3     205499.6            152400.7\n2                 76956.50    281133.9     229358.7            165150.7\n3                 95774.60    275483.7     314124.3            196662.6\n4                470762.12    279877.1     227249.4            240878.9\n5                474339.56    363830.0     364580.9            249087.7\n6               5496627.21    730453.2    1741712.0            683265.5\n7                371692.97    375511.9     297400.9            344602.8\n8                517977.91    423155.4     440984.4            261251.2\n9                153436.22    285325.4     304998.4            278258.5\n10               239182.57    571355.7     599131.8            331284.8\n   PROX_SHOPPING_MALL_SE PROX_BUS_STOP_SE NO_Of_UNITS_SE FAMILY_FRIENDLY_SE\n1               109268.8         600668.6       218.1258           131474.7\n2                98906.8         410222.1       208.9410           114989.1\n3               119913.3         464156.7       210.9828           146607.2\n4               177104.1         562810.8       361.7767           108726.6\n5               301032.9         740922.4       299.5034           160663.7\n6              2931208.6        1418333.3       602.5571           331727.0\n7               249969.5         821236.4       532.1978           129241.2\n8               351634.0         775038.4       338.6777           171895.1\n9               289872.7         850095.5       439.9037           220223.4\n10              265529.7         631399.2       259.0169           189125.5\n   FREEHOLD_SE Intercept_TV AREA_SQM_TV     AGE_TV PROX_CBD_TV\n1     115954.0    3.9720784   11.614302  -1.615447 -3.22582173\n2     130110.0    3.3460017   20.087361  -9.344188 -6.32792021\n3     141031.5    3.5629010   13.247868  -4.102368 -4.62353528\n4     138239.1    0.5276150   33.577223 -15.524302  5.17080808\n5     210641.1    1.0784029    4.884795  -2.152474 -0.77155660\n6     374347.3   -0.1249043    2.572214  -1.817269  0.06207388\n7     182216.9   -4.2305303   18.849348  -6.595605 -2.84136028\n8     216649.4    0.9189786    4.879056  -2.041481 -0.65080678\n9     220473.7    2.1104224   10.150733  -1.221345  1.18682383\n10    206346.2    1.4343123   11.068059  -3.176418 -1.35360852\n   PROX_CHILDCARE_TV PROX_ELDERLYCARE_TV PROX_URA_GROWTH_AREA_TV PROX_MRT_TV\n1         1.00048819          -3.2612693            -2.846248368 -1.61864578\n2         1.47178634           3.8462625            -1.848971738 -8.92998600\n3        -0.34404755           4.1319138            -2.648105057 -3.40075727\n4         1.57665606           2.4756745            -5.691404992 -7.28705261\n5         0.12990138          -0.4196596             0.640289855 -0.12249416\n6        -0.13361179          -0.4237096            -0.005103357  1.00426206\n7        -0.33542751          -0.8235874             3.760298131 -7.31116712\n8         0.09462126          -0.2405003             0.520038994 -0.03439159\n9        -0.93339393          -0.3739225            -2.359121712 -1.67102293\n10        0.15961128           1.9461735            -0.627237944 -2.63204802\n   PROX_PARK_TV PROX_PRIMARY_SCH_TV PROX_SHOPPING_MALL_TV PROX_BUS_STOP_TV\n1   -0.83749312           1.5923022            2.75358842        2.0154464\n2    2.28192684           6.7019454           -0.88662640        4.4941192\n3    0.66565951           2.9058009           -1.05686949        3.0419145\n4   -3.34061770          12.9836105           -0.16709578       12.8383775\n5   -0.02820944           0.1220998           -0.02488294        0.9145046\n6    0.86781794           0.4696245            0.08821750        0.7656963\n7    2.38773567           5.1844351           -1.53719231        6.2029165\n8    0.16674816           0.2042469           -0.11271635        0.9493299\n9   -0.43301073          -0.1442145            0.95462153        3.3123012\n10   0.95831249           0.3290120           -1.71252687        3.3632555\n   NO_Of_UNITS_TV FAMILY_FRIENDLY_TV FREEHOLD_TV  Local_R2\n1     0.480589953        -0.06902748    2.621347 0.8846744\n2    -1.380026395         2.69655779    3.045280 0.8899773\n3    -0.045279967         0.04058290    1.197050 0.8947007\n4    -0.446007570        14.31276425    8.771149 0.9073605\n5     0.141120178         0.36714544    1.557983 0.9510057\n6    -0.355762335         0.60891234    1.260522 0.9247586\n7    -0.001731033         2.78285441    2.243875 0.8310458\n8     0.089093858         0.32346758    1.602012 0.9463936\n9     1.534793921        -0.13828365    2.285410 0.8380365\n10   -0.082251138        -0.53369623    1.033819 0.9080753\n                    geometry\n1  POINT (22085.12 29951.54)\n2   POINT (25656.84 34546.2)\n3   POINT (23963.99 32890.8)\n4  POINT (27044.28 32319.77)\n5  POINT (41042.56 33743.64)\n6   POINT (39717.04 32943.1)\n7   POINT (28419.1 33513.37)\n8  POINT (40763.57 33879.61)\n9  POINT (23595.63 28884.78)\n10 POINT (24586.56 33194.31)\n\n\n\ngwr.adaptive.output <- as.data.frame(gwr.adaptive$SDF)\ncondo_resale.sf.adaptive <- cbind(condo_resale.res.sf, as.matrix(gwr.adaptive.output))\n\n\nglimpse(condo_resale.sf.adaptive)\n\nRows: 1,436\nColumns: 77\n$ POSTCODE                <dbl> 118635, 288420, 267833, 258380, 467169, 466472…\n$ SELLING_PRICE           <dbl> 3000000, 3880000, 3325000, 4250000, 1400000, 1…\n$ AREA_SQM                <dbl> 309, 290, 248, 127, 145, 139, 218, 141, 165, 1…\n$ AGE                     <dbl> 30, 32, 33, 7, 28, 22, 24, 24, 27, 31, 17, 22,…\n$ PROX_CBD                <dbl> 7.941259, 6.609797, 6.898000, 4.038861, 11.783…\n$ PROX_CHILDCARE          <dbl> 0.16597932, 0.28027246, 0.42922669, 0.39473543…\n$ PROX_ELDERLYCARE        <dbl> 2.5198118, 1.9333338, 0.5021395, 1.9910316, 1.…\n$ PROX_URA_GROWTH_AREA    <dbl> 6.618741, 7.505109, 6.463887, 4.906512, 6.4106…\n$ PROX_HAWKER_MARKET      <dbl> 1.76542207, 0.54507614, 0.37789301, 1.68259969…\n$ PROX_KINDERGARTEN       <dbl> 0.05835552, 0.61592412, 0.14120309, 0.38200076…\n$ PROX_MRT                <dbl> 0.5607188, 0.6584461, 0.3053433, 0.6910183, 0.…\n$ PROX_PARK               <dbl> 1.1710446, 0.1992269, 0.2779886, 0.9832843, 0.…\n$ PROX_PRIMARY_SCH        <dbl> 1.6340256, 0.9747834, 1.4715016, 1.4546324, 0.…\n$ PROX_TOP_PRIMARY_SCH    <dbl> 3.3273195, 0.9747834, 1.4715016, 2.3006394, 0.…\n$ PROX_SHOPPING_MALL      <dbl> 2.2102717, 2.9374279, 1.2256850, 0.3525671, 1.…\n$ PROX_SUPERMARKET        <dbl> 0.9103958, 0.5900617, 0.4135583, 0.4162219, 0.…\n$ PROX_BUS_STOP           <dbl> 0.10336166, 0.28673408, 0.28504777, 0.29872340…\n$ NO_Of_UNITS             <dbl> 18, 20, 27, 30, 30, 31, 32, 32, 32, 32, 34, 34…\n$ FAMILY_FRIENDLY         <dbl> 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0…\n$ FREEHOLD                <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1…\n$ LEASEHOLD_99YR          <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ LOG_SELLING_PRICE       <dbl> 14.91412, 15.17135, 15.01698, 15.26243, 14.151…\n$ MLR_RES                 <dbl> -1489099.55, 415494.57, 194129.69, 1088992.71,…\n$ Intercept               <dbl> 2050011.67, 1633128.24, 3433608.17, 234358.91,…\n$ AREA_SQM.1              <dbl> 9561.892, 16576.853, 13091.861, 20730.601, 672…\n$ AGE.1                   <dbl> -9514.634, -58185.479, -26707.386, -93308.988,…\n$ PROX_CBD.1              <dbl> -120681.94, -149434.22, -259397.77, 2426853.66…\n$ PROX_CHILDCARE.1        <dbl> 319266.925, 441102.177, -120116.816, 480825.28…\n$ PROX_ELDERLYCARE.1      <dbl> -393417.795, 325188.741, 535855.806, 314783.72…\n$ PROX_URA_GROWTH_AREA.1  <dbl> -159980.203, -142290.389, -253621.206, -267929…\n$ PROX_MRT.1              <dbl> -299742.96, -2510522.23, -936853.28, -2039479.…\n$ PROX_PARK.1             <dbl> -172104.47, 523379.72, 209099.85, -759153.26, …\n$ PROX_PRIMARY_SCH.1      <dbl> 242668.03, 1106830.66, 571462.33, 3127477.21, …\n$ PROX_SHOPPING_MALL.1    <dbl> 300881.390, -87693.378, -126732.712, -29593.34…\n$ PROX_BUS_STOP.1         <dbl> 1210615.44, 1843587.22, 1411924.90, 7225577.51…\n$ NO_Of_UNITS.1           <dbl> 104.8290640, -288.3441183, -9.5532945, -161.35…\n$ FAMILY_FRIENDLY.1       <dbl> -9075.370, 310074.664, 5949.746, 1556178.531, …\n$ FREEHOLD.1              <dbl> 303955.61, 396221.27, 168821.75, 1212515.58, 3…\n$ y                       <dbl> 3000000, 3880000, 3325000, 4250000, 1400000, 1…\n$ yhat                    <dbl> 2886531.8, 3466801.5, 3616527.2, 5435481.6, 13…\n$ residual                <dbl> 113468.16, 413198.52, -291527.20, -1185481.63,…\n$ CV_Score                <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ Stud_residual           <dbl> 0.38207013, 1.01433140, -0.83780678, -2.846146…\n$ Intercept_SE            <dbl> 516105.5, 488083.5, 963711.4, 444185.5, 211962…\n$ AREA_SQM_SE             <dbl> 823.2860, 825.2380, 988.2240, 617.4007, 1376.2…\n$ AGE_SE                  <dbl> 5889.782, 6226.916, 6510.236, 6010.511, 8180.3…\n$ PROX_CBD_SE             <dbl> 37411.22, 23615.06, 56103.77, 469337.41, 41064…\n$ PROX_CHILDCARE_SE       <dbl> 319111.1, 299705.3, 349128.5, 304965.2, 698720…\n$ PROX_ELDERLYCARE_SE     <dbl> 120633.34, 84546.69, 129687.07, 127150.69, 327…\n$ PROX_URA_GROWTH_AREA_SE <dbl> 56207.39, 76956.50, 95774.60, 470762.12, 47433…\n$ PROX_MRT_SE             <dbl> 185181.3, 281133.9, 275483.7, 279877.1, 363830…\n$ PROX_PARK_SE            <dbl> 205499.6, 229358.7, 314124.3, 227249.4, 364580…\n$ PROX_PRIMARY_SCH_SE     <dbl> 152400.7, 165150.7, 196662.6, 240878.9, 249087…\n$ PROX_SHOPPING_MALL_SE   <dbl> 109268.8, 98906.8, 119913.3, 177104.1, 301032.…\n$ PROX_BUS_STOP_SE        <dbl> 600668.6, 410222.1, 464156.7, 562810.8, 740922…\n$ NO_Of_UNITS_SE          <dbl> 218.1258, 208.9410, 210.9828, 361.7767, 299.50…\n$ FAMILY_FRIENDLY_SE      <dbl> 131474.73, 114989.07, 146607.22, 108726.62, 16…\n$ FREEHOLD_SE             <dbl> 115954.0, 130110.0, 141031.5, 138239.1, 210641…\n$ Intercept_TV            <dbl> 3.9720784, 3.3460017, 3.5629010, 0.5276150, 1.…\n$ AREA_SQM_TV             <dbl> 11.614302, 20.087361, 13.247868, 33.577223, 4.…\n$ AGE_TV                  <dbl> -1.6154474, -9.3441881, -4.1023685, -15.524301…\n$ PROX_CBD_TV             <dbl> -3.22582173, -6.32792021, -4.62353528, 5.17080…\n$ PROX_CHILDCARE_TV       <dbl> 1.000488185, 1.471786337, -0.344047555, 1.5766…\n$ PROX_ELDERLYCARE_TV     <dbl> -3.26126929, 3.84626245, 4.13191383, 2.4756745…\n$ PROX_URA_GROWTH_AREA_TV <dbl> -2.846248368, -1.848971738, -2.648105057, -5.6…\n$ PROX_MRT_TV             <dbl> -1.61864578, -8.92998600, -3.40075727, -7.2870…\n$ PROX_PARK_TV            <dbl> -0.83749312, 2.28192684, 0.66565951, -3.340617…\n$ PROX_PRIMARY_SCH_TV     <dbl> 1.59230221, 6.70194543, 2.90580089, 12.9836104…\n$ PROX_SHOPPING_MALL_TV   <dbl> 2.753588422, -0.886626400, -1.056869486, -0.16…\n$ PROX_BUS_STOP_TV        <dbl> 2.0154464, 4.4941192, 3.0419145, 12.8383775, 0…\n$ NO_Of_UNITS_TV          <dbl> 0.480589953, -1.380026395, -0.045279967, -0.44…\n$ FAMILY_FRIENDLY_TV      <dbl> -0.06902748, 2.69655779, 0.04058290, 14.312764…\n$ FREEHOLD_TV             <dbl> 2.6213469, 3.0452799, 1.1970499, 8.7711485, 1.…\n$ Local_R2                <dbl> 0.8846744, 0.8899773, 0.8947007, 0.9073605, 0.…\n$ coords.x1               <dbl> 22085.12, 25656.84, 23963.99, 27044.28, 41042.…\n$ coords.x2               <dbl> 29951.54, 34546.20, 32890.80, 32319.77, 33743.…\n$ geometry                <POINT [m]> POINT (22085.12 29951.54), POINT (25656.…\n\n\n\nsummary(gwr.adaptive$SDF$yhat)\n\n    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. \n  171347  1102001  1385528  1751842  1982307 13887901 \n\n\n\n\nVisualizing local R2\n\ntmap_mode(\"view\")\ntm_shape(mpsz_svy21)+\n  tm_polygons(alpha = 0.1) +\ntm_shape(condo_resale.sf.adaptive) +  \n  tm_dots(col = \"Local_R2\",\n          border.col = \"gray60\",\n          border.lwd = 1) +\n  tm_view(set.zoom.limits = c(11,14))\n\n\n\n\n\n\n\ntmap_mode(\"plot\")\n\n\n\nVisualizing coefficient estimates\n\ntmap_mode(\"view\")\nAREA_SQM_SE <- tm_shape(mpsz_svy21)+\n  tm_polygons(alpha = 0.1) +\ntm_shape(condo_resale.sf.adaptive) +  \n  tm_dots(col = \"AREA_SQM_SE\",\n          border.col = \"gray60\",\n          border.lwd = 1) +\n  tm_view(set.zoom.limits = c(11,14))\n\nAREA_SQM_TV <- tm_shape(mpsz_svy21)+\n  tm_polygons(alpha = 0.1) +\ntm_shape(condo_resale.sf.adaptive) +  \n  tm_dots(col = \"AREA_SQM_TV\",\n          border.col = \"gray60\",\n          border.lwd = 1) +\n  tm_view(set.zoom.limits = c(11,14))\n\ntmap_arrange(AREA_SQM_SE, AREA_SQM_TV, \n             asp=1, ncol=2,\n             sync = TRUE)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nby URA planning region\n\ntm_shape(mpsz_svy21[mpsz_svy21$REGION_N==\"CENTRAL REGION\", ])+\n  tm_polygons()+\ntm_shape(condo_resale.sf.adaptive) + \n  tm_bubbles(col = \"Local_R2\",\n           size = 0.15,\n           border.col = \"gray60\",\n           border.lwd = 1)"
  },
  {
    "objectID": "In-Class_Ex/In-Class_Ex07/In-Class_Ex07-EHSA.html",
    "href": "In-Class_Ex/In-Class_Ex07/In-Class_Ex07-EHSA.html",
    "title": "In Class Exercise 7 - Emerging Hot Spot Analysis: sfdep methods",
    "section": "",
    "text": "pacman::p_load(sf, sfdep, tmap, plotly, tidyverse, zoo, Kendall)"
  },
  {
    "objectID": "In-Class_Ex/In-Class_Ex07/In-Class_Ex07-EHSA.html#deriving-spatial-weights",
    "href": "In-Class_Ex/In-Class_Ex07/In-Class_Ex07-EHSA.html#deriving-spatial-weights",
    "title": "In Class Exercise 7 - Emerging Hot Spot Analysis: sfdep methods",
    "section": "Deriving spatial weights",
    "text": "Deriving spatial weights\n\nGDPPC_nb <- GDPPC_st %>%\n  activate(\"geometry\") %>%\n  mutate(nb = include_self(st_contiguity(geometry)),\n         wt = st_inverse_distance(nb, geometry,\n                                  scale = 1,\n                                  alpha = 1),\n         .before = 1) %>%\n  set_nbs(\"nb\") %>%\n  set_wts(\"wt\")\n\n\n\n\n\n\n\nNote\n\n\n\n\nactivate() of dplyr package is used to activate the geometry context\nmutate() of dplyr package is used to create two new columns nb and wt.\nThen we will activate the data context again and copy over the nb and wt columns to each time-slice using set_nbs() and set_wts()\n\nrow order is very important so do not rearrange the observations after using set_nbs() or set_wts().\n\n\n\n\n\nhead(GDPPC_nb)\n\n# A tibble: 6 × 5\n   Year County  GDPPC nb        wt       \n  <dbl> <chr>   <dbl> <list>    <list>   \n1  2005 Anxiang  8184 <int [6]> <dbl [6]>\n2  2005 Hanshou  6560 <int [6]> <dbl [6]>\n3  2005 Jinshi   9956 <int [5]> <dbl [5]>\n4  2005 Li       8394 <int [5]> <dbl [5]>\n5  2005 Linli    8850 <int [5]> <dbl [5]>\n6  2005 Shimen   9244 <int [6]> <dbl [6]>"
  },
  {
    "objectID": "In-Class_Ex/In-Class_Ex09/In-Class_Ex09.html",
    "href": "In-Class_Ex/In-Class_Ex09/In-Class_Ex09.html",
    "title": "In Class Exercise 9",
    "section": "",
    "text": "pacman::p_load(sf, spdep, GWmodel, SpatialML, tidyverse, tmap, ggpubr, olsrr, devtools, tidymodels)\n\npackage 'warp' successfully unpacked and MD5 sums checked\npackage 'lhs' successfully unpacked and MD5 sums checked\npackage 'DiceDesign' successfully unpacked and MD5 sums checked\npackage 'patchwork' successfully unpacked and MD5 sums checked\npackage 'slider' successfully unpacked and MD5 sums checked\npackage 'GPfit' successfully unpacked and MD5 sums checked\npackage 'modelenv' successfully unpacked and MD5 sums checked\npackage 'dials' successfully unpacked and MD5 sums checked\npackage 'infer' successfully unpacked and MD5 sums checked\npackage 'modeldata' successfully unpacked and MD5 sums checked\npackage 'parsnip' successfully unpacked and MD5 sums checked\npackage 'rsample' successfully unpacked and MD5 sums checked\npackage 'tune' successfully unpacked and MD5 sums checked\npackage 'workflows' successfully unpacked and MD5 sums checked\npackage 'workflowsets' successfully unpacked and MD5 sums checked\npackage 'yardstick' successfully unpacked and MD5 sums checked\npackage 'tidymodels' successfully unpacked and MD5 sums checked\n\nThe downloaded binary packages are in\n    C:\\Users\\Daniel\\AppData\\Local\\Temp\\RtmpiITocP\\downloaded_packages\n\n\nolsrr - Model diagnostic\ntinymodel - Advance way to display models\nggpubr - Data visualisation and analysis\n\n\n\n\nReading the input data sets. It is in simple feature data frame.\n\nmdata <- read_rds(\"data/aspatial/mdata.rds\")\n\n\n\n\nThe entire data are split into training and test data sets with 65% training and 35% test data\n\n\n\n\n\n\nNote\n\n\n\nRemember to set seed for all functions that always get different result\n\n\n\nset.seed(1234)\nresale_split <- initial_split(mdata,\n                             prop = 6.5/10,)\ntrain_data <-training(resale_split)\ntest_data <- testing(resale_split)\n\n\n\n\n\n\n\nNote\n\n\n\nIf error initial_split(), remove tidymodels in packages and use rsample insteadeval\n\n\n\n# Save the file\nwrite_rds(train_data, \"data/model/train_data_rds\")\nwrite_rds(test_data, \"data/model/test_data_rds\")\n\n\n\n\n\n\nprice_mlr <- lm(resale_price ~ floor_area_sqm +\n                  storey_order + remaining_lease_mths +\n                  PROX_CBD + PROX_ELDERLYCARE + PROX_HAWKER +\n                  PROX_MRT + PROX_PARK + PROX_MALL +\n                  PROX_SUPERMARKET + WITHIN_350M_KINDERGARTEN +\n                  WITHIN_350M_CHILDCARE + WITHIN_350M_BUS +\n                  WITHIN_1KM_PRISCH,\n                data = train_data)\nsummary(price_mlr)\n\n\nCall:\nlm(formula = resale_price ~ floor_area_sqm + storey_order + remaining_lease_mths + \n    PROX_CBD + PROX_ELDERLYCARE + PROX_HAWKER + PROX_MRT + PROX_PARK + \n    PROX_MALL + PROX_SUPERMARKET + WITHIN_350M_KINDERGARTEN + \n    WITHIN_350M_CHILDCARE + WITHIN_350M_BUS + WITHIN_1KM_PRISCH, \n    data = train_data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-205193  -39120   -1930   36545  472355 \n\nCoefficients:\n                           Estimate Std. Error t value Pr(>|t|)    \n(Intercept)              107601.073  10601.261  10.150  < 2e-16 ***\nfloor_area_sqm             2780.698     90.579  30.699  < 2e-16 ***\nstorey_order              14299.298    339.115  42.167  < 2e-16 ***\nremaining_lease_mths        344.490      4.592  75.027  < 2e-16 ***\nPROX_CBD                 -16930.196    201.254 -84.124  < 2e-16 ***\nPROX_ELDERLYCARE         -14441.025    994.867 -14.516  < 2e-16 ***\nPROX_HAWKER              -19265.648   1273.597 -15.127  < 2e-16 ***\nPROX_MRT                 -32564.272   1744.232 -18.670  < 2e-16 ***\nPROX_PARK                 -5712.625   1483.885  -3.850 0.000119 ***\nPROX_MALL                -14717.388   2007.818  -7.330 2.47e-13 ***\nPROX_SUPERMARKET         -26881.938   4189.624  -6.416 1.46e-10 ***\nWITHIN_350M_KINDERGARTEN   8520.472    632.812  13.464  < 2e-16 ***\nWITHIN_350M_CHILDCARE     -4510.650    354.015 -12.741  < 2e-16 ***\nWITHIN_350M_BUS             813.493    222.574   3.655 0.000259 ***\nWITHIN_1KM_PRISCH         -8010.834    491.512 -16.298  < 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 61650 on 10320 degrees of freedom\nMultiple R-squared:  0.7373,    Adjusted R-squared:  0.737 \nF-statistic:  2069 on 14 and 10320 DF,  p-value: < 2.2e-16\n\n\n\nwrite_rds(price_mlr, \"data/model/price_mlr.rds\")\n\n\n\n\n\n\nConvert training data from sf to spatialpointdataframe in order to be used\n\nNote: Its already projected, thus we do not need to change the CRS value\n\n\ntrain_data_sp <- as_Spatial(train_data)\ntrain_data_sp\n\nclass       : SpatialPointsDataFrame \nfeatures    : 10335 \nextent      : 11597.31, 42623.63, 28217.39, 48741.06  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \nvariables   : 17\nnames       : resale_price, floor_area_sqm, storey_order, remaining_lease_mths,          PROX_CBD,     PROX_ELDERLYCARE,        PROX_HAWKER,           PROX_MRT,          PROX_PARK,   PROX_GOOD_PRISCH,        PROX_MALL,            PROX_CHAS,     PROX_SUPERMARKET, WITHIN_350M_KINDERGARTEN, WITHIN_350M_CHILDCARE, ... \nmin values  :       218000,             74,            1,                  555, 0.999393538715878, 1.98943787433087e-08, 0.0333358643817954, 0.0220407324774434, 0.0441643212802781, 0.0652540365486641,                0, 6.20621206270077e-09, 1.21715176356525e-07,                        0,                     0, ... \nmax values  :      1186888,            133,           17,                 1164,  19.6500691667807,     3.30163731686804,   2.86763031236184,   2.13060636038504,   2.41313695915468,   10.6223726149914, 2.27100643784442,    0.808332738794272,     1.57131703651196,                        7,                    20, ... \n\n\n\n\n\n\n\n\nExtract the x,y coordinates of the full, training and test data sets (Drop all data excepts for coordinates)\nRequired to do so if not ranger will not be able to generate the algo.\n\ncoords <-st_coordinates(mdata)\ncoords_train <- st_coordinates(train_data)\ncoords_test <- st_coordinates(test_data)\n\nBefore continuing, we write all the output into rds for future use\n\ncoords_train <-write_rds(coords_train, \"data/model/coords_train.rds\")\ncoords_test <- write_rds(coords_test, \"data/model/coords_test.rds\")\n\n\n\n\n\ntrain_data <- train_data %>%\n  st_drop_geometry()\n\n\n\n\n\nPerforming random forest calibration by using ranger package\n\nset.seed(1234)\nrf <- ranger(resale_price ~ floor_area_sqm +\n                  storey_order + remaining_lease_mths +\n                  PROX_CBD + PROX_ELDERLYCARE + PROX_HAWKER +\n                  PROX_MRT + PROX_PARK + PROX_MALL +\n                  PROX_SUPERMARKET + WITHIN_350M_KINDERGARTEN +\n                  WITHIN_350M_CHILDCARE + WITHIN_350M_BUS +\n                  WITHIN_1KM_PRISCH,\n                data = train_data)\n\n\nprint(rf)\n\nRanger result\n\nCall:\n ranger(resale_price ~ floor_area_sqm + storey_order + remaining_lease_mths +      PROX_CBD + PROX_ELDERLYCARE + PROX_HAWKER + PROX_MRT + PROX_PARK +      PROX_MALL + PROX_SUPERMARKET + WITHIN_350M_KINDERGARTEN +      WITHIN_350M_CHILDCARE + WITHIN_350M_BUS + WITHIN_1KM_PRISCH,      data = train_data) \n\nType:                             Regression \nNumber of trees:                  500 \nSample size:                      10335 \nNumber of independent variables:  14 \nMtry:                             3 \nTarget node size:                 5 \nVariable importance mode:         none \nSplitrule:                        variance \nOOB prediction error (MSE):       728602496 \nR squared (OOB):                  0.9495728 \n\n\n\nset.seed(1234)\ngwRF_adaptive <- grf(formula = resale_price ~ floor_area_sqm +\n                  storey_order + remaining_lease_mths +\n                  PROX_CBD + PROX_ELDERLYCARE + PROX_HAWKER +\n                  PROX_MRT + PROX_PARK + PROX_MALL +\n                  PROX_SUPERMARKET + WITHIN_350M_KINDERGARTEN +\n                  WITHIN_350M_CHILDCARE + WITHIN_350M_BUS +\n                  WITHIN_1KM_PRISCH,\n                dframe = train_data,\n                bw=55,\n                kernel=\"adaptive\",\n                coords=coords_train)\n\nRanger result\n\nCall:\n ranger(resale_price ~ floor_area_sqm + storey_order + remaining_lease_mths +      PROX_CBD + PROX_ELDERLYCARE + PROX_HAWKER + PROX_MRT + PROX_PARK +      PROX_MALL + PROX_SUPERMARKET + WITHIN_350M_KINDERGARTEN +      WITHIN_350M_CHILDCARE + WITHIN_350M_BUS + WITHIN_1KM_PRISCH,      data = train_data, num.trees = 500, mtry = 4, importance = \"impurity\",      num.threads = NULL) \n\nType:                             Regression \nNumber of trees:                  500 \nSample size:                      10335 \nNumber of independent variables:  14 \nMtry:                             4 \nTarget node size:                 5 \nVariable importance mode:         impurity \nSplitrule:                        variance \nOOB prediction error (MSE):       700081018 \nR squared (OOB):                  0.9515468 \n          floor_area_sqm             storey_order     remaining_lease_mths \n            7.376510e+12             1.413229e+13             2.991844e+13 \n                PROX_CBD         PROX_ELDERLYCARE              PROX_HAWKER \n            5.312697e+13             7.017513e+12             5.506719e+12 \n                PROX_MRT                PROX_PARK                PROX_MALL \n            7.446857e+12             4.825986e+12             4.173165e+12 \n        PROX_SUPERMARKET WITHIN_350M_KINDERGARTEN    WITHIN_350M_CHILDCARE \n            2.879598e+12             1.028775e+12             1.701318e+12 \n         WITHIN_350M_BUS        WITHIN_1KM_PRISCH \n            1.564038e+12             7.214027e+12 \n     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. \n-236112.0  -13033.7     444.4     593.8   14831.5  358041.7 \n     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. \n-79279.83  -3510.70     54.56     50.98   3909.85  83074.08 \n                               Min          Max        Mean         StD\nfloor_area_sqm                   0 401562922035 18210850992 41426270899\nstorey_order             302736445 243728744368 16368419468 23620589843\nremaining_lease_mths     696564138 546463600727 34119912443 70328183398\nPROX_CBD                  55173040 382484896335 12154563393 29293290548\nPROX_ELDERLYCARE          45182031 344081962746 10597657883 24546405941\nPROX_HAWKER               43516026 342597797419 10551807020 23408387903\nPROX_MRT                  54234551 299075025906  9873129985 21055852211\nPROX_PARK                 49919822 322633843469  9353956995 19517077658\nPROX_MALL                 43296133 433263607933 11247374493 27537334970\nPROX_SUPERMARKET          52665827 417310417234 10802122271 26572460731\nWITHIN_350M_KINDERGARTEN         0 186468064682  2848177740 12928886968\nWITHIN_350M_CHILDCARE            0 255236737234  5526292324 18109971102\nWITHIN_350M_BUS                  0 193828795378  4747552546 11886064288\nWITHIN_1KM_PRISCH                0 178360608427  1778262602  7163381668\n\n\n\n\n\n\n\n\nNote\n\n\n\nUse grf.bw to derive the bandwidth number\n\n\n\ngwRF_adaptive <- write_rds(gwRF_adaptive, \"data/model/gwRF_adaptive.rds\")\n\n\n\n\n\nNeed to combine test data with coordinates data\n\ntest_data <- cbind(test_data, coords_test) %>%\n  st_drop_geometry()\n\n\n\n\n\n\n\nNote\n\n\n\nNotice that the data variables change to 19 from 17.\n\n\n\n\n\n\ngwRF_pred <- predict.grf(gwRF_adaptive,\n                         test_data,\n                         x.var.name=\"X\",\n                         y.var.name=\"Y\",\n                         local.w=1,\n                         global.w=0)"
  },
  {
    "objectID": "In-Class_Ex/In-Class_Ex09/data/geospatial/MPSZ-2019.html",
    "href": "In-Class_Ex/In-Class_Ex09/data/geospatial/MPSZ-2019.html",
    "title": "IS415-GAA",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>     dataset\n\n\n        0 0     false"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html",
    "href": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html",
    "title": "Hands On Exercise 10",
    "section": "",
    "text": "By the end of this hands-on exercise, you will be able:\n\nto import GIS polygon data into R and save them as simple feature data frame by using appropriate functions of sf package of R;\nto import aspatial data into R and save them as simple feature data frame by using appropriate functions of sf package of R;\nto computer accessibility measure by using Hansen’s potential model and Spatial Accessibility Measure (SAM); and\nto visualise the accessibility measures by using tmap and ggplot2 packages."
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#importing-geospatial-data",
    "href": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#importing-geospatial-data",
    "title": "Hands On Exercise 10",
    "section": "Importing Geospatial Data",
    "text": "Importing Geospatial Data\n\nmpsz <- st_read(dsn = \"data/geospatial\", layer = \"MP14_SUBZONE_NO_SEA_PL\")\n\nReading layer `MP14_SUBZONE_NO_SEA_PL' from data source \n  `/Users/danielchng/Desktop/Github/SMU-IS415/IS415-GAA/Hands-On_Ex/Hands-On_Ex10/data/geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n\n\n\nhexagons <- st_read(dsn = \"data/geospatial\", layer = \"hexagons\") \n\nReading layer `hexagons' from data source \n  `/Users/danielchng/Desktop/Github/SMU-IS415/IS415-GAA/Hands-On_Ex/Hands-On_Ex10/data/geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 3125 features and 6 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 21506.33 xmax: 50010.26 ymax: 50256.33\nProjected CRS: SVY21 / Singapore TM\n\n\n\neldercare <- st_read(dsn = \"data/geospatial\", layer = \"ELDERCARE\") \n\nReading layer `ELDERCARE' from data source \n  `/Users/danielchng/Desktop/Github/SMU-IS415/IS415-GAA/Hands-On_Ex/Hands-On_Ex10/data/geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 120 features and 19 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 14481.92 ymin: 28218.43 xmax: 41665.14 ymax: 46804.9\nProjected CRS: SVY21 / Singapore TM\n\n\nThe report above shows that the R object used to contain the imported MP14_SUBZONE_WEB_PL shapefile is called mpsz and it is a simple feature object. The geometry type is multipolygon. it is also important to note that mpsz simple feature object does not have EPSG information."
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#import-distance-matrix",
    "href": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#import-distance-matrix",
    "title": "Hands On Exercise 10",
    "section": "Import Distance Matrix",
    "text": "Import Distance Matrix\n\nODMatrix <- read_csv(\"data/aspatial/OD_Matrix.csv\", skip = 0)"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#tidying-distance-matrix",
    "href": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#tidying-distance-matrix",
    "title": "Hands On Exercise 10",
    "section": "Tidying distance matrix",
    "text": "Tidying distance matrix\nODMatrix organised distance matrix column wise, but most modelling packages in R is expecting a matrix that looks different\n\ndistmat <- ODMatrix %>%\n  select(origin_id, destination_id, total_cost) %>%\n  spread(destination_id, total_cost)%>%\n  select(c(-c('origin_id')))\n\nChanging SBY21 projected distance from metre to kilometre\n\ndistmat_km <- as.matrix(distmat/1000)"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#computing-hansens-accessibility",
    "href": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#computing-hansens-accessibility",
    "title": "Hands On Exercise 10",
    "section": "Computing Hansen’s accessibility",
    "text": "Computing Hansen’s accessibility\nNow, we ready to compute Hansen’s accessibility by using ac() of SpatialAcc package. Before getting started, you are encourage to read the arguments of the function at least once in order to ensure that the required inputs are available.\nThe code chunk below calculates Hansen’s accessibility using ac() of SpatialAcc and data.frame() is used to save the output in a data frame called acc_Handsen.\n\nacc_Hansen <- data.frame(ac(hexagons$demand,\n                            eldercare$capacity,\n                            distmat_km, \n                            #d0 = 50,\n                            power = 2, \n                            family = \"Hansen\"))\n\nThe default field name is very messy, we will rename it to accHansen by using the code chunk below.\n\ncolnames(acc_Hansen) <- \"accHansen\"\n\nNext, we will convert the data table into tibble format by using the code chunk below.\n\nacc_Hansen <- tbl_df(acc_Hansen)\n\nLastly, bind_cols() of dplyr will be used to join the acc_Hansen tibble data frame with the hexagons simple feature data frame. The output is called hexagon_Hansen.\n\nhexagon_Hansen <- bind_cols(hexagons, acc_Hansen)\n\nNotice that hexagon_Hansen is a simple feature data frame and not a typical tibble data frame. Now we will change the format\n\nacc_Hansen <- data.frame(ac(hexagons$demand,\n                            eldercare$capacity,\n                            distmat_km, \n                            #d0 = 50,\n                            power = 0.5, \n                            family = \"Hansen\"))\n\ncolnames(acc_Hansen) <- \"accHansen\"\nacc_Hansen <- tbl_df(acc_Hansen)\nhexagon_Hansen <- bind_cols(hexagons, acc_Hansen)"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#visualising-hansens-accessibility",
    "href": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#visualising-hansens-accessibility",
    "title": "Hands On Exercise 10",
    "section": "Visualising Hansen’s Accessibility",
    "text": "Visualising Hansen’s Accessibility\n\nExtracting map extend\n\nmapex <- st_bbox(hexagons)\n\nThe code chunk below uses a collection of mapping fucntions of tmap package to create a high cartographic quality accessibility to eldercare centre in Singapore.\n\ntmap_mode(\"plot\")\ntm_shape(hexagon_Hansen,\n         bbox = mapex) + \n  tm_fill(col = \"accHansen\",\n          n = 10,\n          style = \"quantile\",\n          border.col = \"black\",\n          border.lwd = 1) +\ntm_shape(eldercare) +\n  tm_symbols(size = 0.1) +\n  tm_layout(main.title = \"Accessibility to eldercare: Hansen method\",\n            main.title.position = \"center\",\n            main.title.size = 2,\n            legend.outside = FALSE,\n            legend.height = 0.45, \n            legend.width = 3.0,\n            legend.format = list(digits = 6),\n            legend.position = c(\"right\", \"top\"),\n            frame = TRUE) +\n  tm_compass(type=\"8star\", size = 2) +\n  tm_scale_bar(width = 0.15) +\n  tm_grid(lwd = 0.1, alpha = 0.5)\n\n\n\n\n\n\nStatistical graphic visualisation\nFirstly, we need to add the planning region field into haxegon_Hansen simple feature data frame by using the code chunk below.\n\nhexagon_Hansen <- st_join(hexagon_Hansen, mpsz, \n                          join = st_intersects)\n\nNext, ggplot() will be used to plot the distribution by using boxplot graphical method.\n\nggplot(data=hexagon_Hansen, \n       aes(y = log(accHansen), \n           x= REGION_N)) +\n  geom_boxplot() +\n  geom_point(stat=\"summary\", \n             fun.y=\"mean\", \n             colour =\"red\", \n             size=2)"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#computing-kd2sfcas-accessibility",
    "href": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#computing-kd2sfcas-accessibility",
    "title": "Hands On Exercise 10",
    "section": "Computing KD2SFCA’s accessibility",
    "text": "Computing KD2SFCA’s accessibility\nIn this section, you are going to repeat most of the steps you had learned in previous section to perform the analysis. However, some of the codes will be combined into one code chunk.\nThe code chunk below calculates Hansen’s accessibility using ac() of SpatialAcc and data.frame() is used to save the output in a data frame called acc_KD2SFCA. Notice that KD2SFCA is used for family argument.\n\nacc_KD2SFCA <- data.frame(ac(hexagons$demand,\n                            eldercare$capacity,\n                            distmat_km, \n                            d0 = 50,\n                            power = 2, \n                            family = \"KD2SFCA\"))\n\ncolnames(acc_KD2SFCA) <- \"accKD2SFCA\"\nacc_KD2SFCA <- tbl_df(acc_KD2SFCA)\nhexagon_KD2SFCA <- bind_cols(hexagons, acc_KD2SFCA)"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#visualising-kd2sfcas-accessibility",
    "href": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#visualising-kd2sfcas-accessibility",
    "title": "Hands On Exercise 10",
    "section": "Visualising KD2SFCA’s accessibility",
    "text": "Visualising KD2SFCA’s accessibility\n\ntmap_mode(\"plot\")\ntm_shape(hexagon_KD2SFCA,\n         bbox = mapex) + \n  tm_fill(col = \"accKD2SFCA\",\n          n = 10,\n          style = \"quantile\",\n          border.col = \"black\",\n          border.lwd = 1) +\ntm_shape(eldercare) +\n  tm_symbols(size = 0.1) +\n  tm_layout(main.title = \"Accessibility to eldercare: KD2SFCA method\",\n            main.title.position = \"center\",\n            main.title.size = 2,\n            legend.outside = FALSE,\n            legend.height = 0.45, \n            legend.width = 3.0,\n            legend.format = list(digits = 6),\n            legend.position = c(\"right\", \"top\"),\n            frame = TRUE) +\n  tm_compass(type=\"8star\", size = 2) +\n  tm_scale_bar(width = 0.15) +\n  tm_grid(lwd = 0.1, alpha = 0.5)"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#statistical-graphic-visualisation-1",
    "href": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#statistical-graphic-visualisation-1",
    "title": "Hands On Exercise 10",
    "section": "Statistical graphic visualisation",
    "text": "Statistical graphic visualisation\nNow, we are going to compare the distribution of KD2CFA accessibility values by URA Planning Region.\nFirstly, we need to add the planning region field into hexagon_KD2SFCA simple feature data frame by using the code chunk below.\n\nhexagon_KD2SFCA <- st_join(hexagon_KD2SFCA, mpsz, \n                          join = st_intersects)\n\nNext, ggplot() will be used to plot the distribution by using boxplot graphical method.\n\nggplot(data=hexagon_KD2SFCA, \n       aes(y = accKD2SFCA, \n           x= REGION_N)) +\n  geom_boxplot() +\n  geom_point(stat=\"summary\", \n             fun.y=\"mean\", \n             colour =\"red\", \n             size=2)"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#computing-sam-accessibility",
    "href": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#computing-sam-accessibility",
    "title": "Hands On Exercise 10",
    "section": "Computing SAM accessibility",
    "text": "Computing SAM accessibility\nIn this section, you are going to repeat most of the steps you had learned in previous section to perform the analysis. However, some of the codes will be combined into one code chunk.\nThe code chunk below calculates Hansen’s accessibility using ac() of SpatialAcc and data.frame() is used to save the output in a data frame called acc_SAM. Notice that SAM is used for family argument.\n\nacc_SAM <- data.frame(ac(hexagons$demand,\n                         eldercare$capacity,\n                         distmat_km, \n                         d0 = 50,\n                         power = 2, \n                         family = \"SAM\"))\n\ncolnames(acc_SAM) <- \"accSAM\"\nacc_SAM <- tbl_df(acc_SAM)\nhexagon_SAM <- bind_cols(hexagons, acc_SAM)"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#visualising-sams-accessibility",
    "href": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#visualising-sams-accessibility",
    "title": "Hands On Exercise 10",
    "section": "Visualising SAM’s accessibility",
    "text": "Visualising SAM’s accessibility\nThe code chunk below uses a collection of mapping fucntions of tmap package to create a high cartographic quality accessibility to eldercare centre in Singapore. Notice that mapex is reused for bbox argument.\n\ntmap_mode(\"plot\")\ntm_shape(hexagon_SAM,\n         bbox = mapex) + \n  tm_fill(col = \"accSAM\",\n          n = 10,\n          style = \"quantile\",\n          border.col = \"black\",\n          border.lwd = 1) +\ntm_shape(eldercare) +\n  tm_symbols(size = 0.1) +\n  tm_layout(main.title = \"Accessibility to eldercare: SAM method\",\n            main.title.position = \"center\",\n            main.title.size = 2,\n            legend.outside = FALSE,\n            legend.height = 0.45, \n            legend.width = 3.0,\n            legend.format = list(digits = 3),\n            legend.position = c(\"right\", \"top\"),\n            frame = TRUE) +\n  tm_compass(type=\"8star\", size = 2) +\n  tm_scale_bar(width = 0.15) +\n  tm_grid(lwd = 0.1, alpha = 0.5)"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#statistical-graphic-visualisation-2",
    "href": "Hands-On_Ex/Hands-On_Ex10/Hands-On_Ex10.html#statistical-graphic-visualisation-2",
    "title": "Hands On Exercise 10",
    "section": "Statistical graphic visualisation",
    "text": "Statistical graphic visualisation\nNow, we are going to compare the distribution of SAM accessibility values by URA Planning Region.\nFirstly, we need to add the planning region field into hexagon_SAM simple feature data frame by using the code chunk below.\n\nhexagon_SAM <- st_join(hexagon_SAM, mpsz, \n                       join = st_intersects)\n\nNext, ggplot() will be used to plot the distribution by using boxplot graphical method.\n\nggplot(data=hexagon_SAM, \n       aes(y = accSAM, \n           x= REGION_N)) +\n  geom_boxplot() +\n  geom_point(stat=\"summary\", \n             fun.y=\"mean\", \n             colour =\"red\", \n             size=2)"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/data/geospatial/ELDERCARE.html",
    "href": "Hands-On_Ex/Hands-On_Ex10/data/geospatial/ELDERCARE.html",
    "title": "IS415-GAA",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>  ELDERCARE  ENG dataset\n\nELDERCARE\n\n                 0 0     false"
  },
  {
    "objectID": "Hands-On_Ex/Hands-On_Ex10/data/geospatial/hexagons.html",
    "href": "Hands-On_Ex/Hands-On_Ex10/data/geospatial/hexagons.html",
    "title": "IS415-GAA",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>     dataset\n\n\n                 0 0     false"
  },
  {
    "objectID": "In-Class_Ex/In-Class_Ex10/In-Class_Ex10.html",
    "href": "In-Class_Ex/In-Class_Ex10/In-Class_Ex10.html",
    "title": "In Class Exercise 10",
    "section": "",
    "text": "pacman::p_load(tmap, SpatialAcc, sf, \n               ggstatsplot, reshape2, fca,\n               tidyverse)"
  },
  {
    "objectID": "In-Class_Ex/In-Class_Ex10/data/geospatial/ELDERCARE.html",
    "href": "In-Class_Ex/In-Class_Ex10/data/geospatial/ELDERCARE.html",
    "title": "IS415-GAA",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>  ELDERCARE  ENG dataset\n\nELDERCARE\n\n                 0 0     false"
  },
  {
    "objectID": "In-Class_Ex/In-Class_Ex10/data/geospatial/hexagons.html",
    "href": "In-Class_Ex/In-Class_Ex10/data/geospatial/hexagons.html",
    "title": "IS415-GAA",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>     dataset\n\n\n                 0 0     false"
  },
  {
    "objectID": "In-Class_Ex/In-Class_Ex10/In-Class_Ex10.html#tidy-up-distance-matrix",
    "href": "In-Class_Ex/In-Class_Ex10/In-Class_Ex10.html#tidy-up-distance-matrix",
    "title": "In Class Exercise 10",
    "section": "Tidy up distance matrix",
    "text": "Tidy up distance matrix\n\ndistmat <- ODMatrix %>%\n  select(origin_id, destination_id, total_cost) %>%\n  spread(destination_id, total_cost)%>%\n  select(c(-c('origin_id')))"
  },
  {
    "objectID": "In-Class_Ex/In-Class_Ex10/In-Class_Ex10.html#change-distance-matrix-to-km",
    "href": "In-Class_Ex/In-Class_Ex10/In-Class_Ex10.html#change-distance-matrix-to-km",
    "title": "In Class Exercise 10",
    "section": "Change distance matrix to km",
    "text": "Change distance matrix to km\n\ndistmat_km <- as.matrix(distmat/1000)"
  },
  {
    "objectID": "In-Class_Ex/In-Class_Ex10/In-Class_Ex10.html#computing-distance-matrix-optional",
    "href": "In-Class_Ex/In-Class_Ex10/In-Class_Ex10.html#computing-distance-matrix-optional",
    "title": "In Class Exercise 10",
    "section": "Computing Distance matrix (Optional)",
    "text": "Computing Distance matrix (Optional)\n\neldercare_coord <- st_coordinates(eldercare)\nhexagon_coord <- st_coordinates(hexagons)\n\n\nEucMatrix <- SpatialAcc:: distance(hexagon_coord, eldercare_coord, type = \"euclidean\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html",
    "title": "Take Home Exercise 3",
    "section": "",
    "text": "Assignment Doc: Here"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#task",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#task",
    "title": "Take Home Exercise 3",
    "section": "1.1 Task",
    "text": "1.1 Task\nIn this take-home exercise, you are tasked to predict HDB resale prices at the sub-market level (i.e. HDB 3-room, HDB 4-room and HDB 5-room) for the month of January and February 2023 in Singapore. The predictive models must be built by using by using conventional OLS method and GWR methods. You are also required to compare the performance of the conventional OLS method versus the geographical weighted methods."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#data",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#data",
    "title": "Take Home Exercise 3",
    "section": "1.2 Data",
    "text": "1.2 Data\nFor the purpose of this take-home exercise, HDB Resale Flat Prices provided by Data.gov.sg should be used as the core data set. The study should focus on either three-room, four-room or five-room flat and transaction period should be from 1st January 2021 to 31st December 2022. The test data should be January and February 2023 resale prices.\nBelow is a list of recommended predictors to consider. However, students are free to include other appropriate independent variables.\n\nStructural factors\n\nArea of the unit\nFloor level\nRemaining lease\nAge of the unit\nMain Upgrading Program (MUP) completed (optional)\n\nLocational factors\n\nProxomity to CBD\nProximity to eldercare\nProximity to foodcourt/hawker centres\nProximity to MRT\nProximity to park\nProximity to good primary school\nProximity to shopping mall\nProximity to supermarket\nNumbers of kindergartens within 350m\nNumbers of childcare centres within 350m\nNumbers of bus stop within 350m\nNumbers of primary school within 1km"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#our-data",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#our-data",
    "title": "Take Home Exercise 3",
    "section": "1.3 Our Data",
    "text": "1.3 Our Data\n\n1.3.1 Aspatial Data\nHDB Resale Data - Here\n\n\n1.3.2 Geospatial Data\nMaster Plan 2019 Sub Zone Boundary - From Prof Kam\nShopping Malls - Referenced from Github and crossed checked with Wikipedia\nMRT Stations and Bus Stops - Here\nOther locations - Here"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#references",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#references",
    "title": "Take Home Exercise 3",
    "section": "1.4 References",
    "text": "1.4 References\nProf Kam - Here and Here\nSenior Megan’s - Here"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#importing-of-packages",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#importing-of-packages",
    "title": "Take Home Exercise 3",
    "section": "2.1 Importing of Packages",
    "text": "2.1 Importing of Packages\n\npackages <- c('sf', 'tidyverse', 'tmap', 'httr', 'jsonlite', 'rvest', 'sp', 'ggpubr', 'corrplot', 'broom',  'olsrr', 'spdep', 'GWmodel', 'devtools', 'rgeos', 'lwgeom', 'maptools', 'matrixStats', 'units', 'gtsummary', 'Metrics', 'rsample', 'SpatialML')\n\nfor(p in packages){\n  if(!require(p, character.only = T)){\n    install.packages(p, repos = \"http://cran.us.r-project.org\")\n  }\n  library(p, character.only = T)\n}"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#importing-of-aspatial-data",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#importing-of-aspatial-data",
    "title": "Take Home Exercise 3",
    "section": "2.2 Importing of Aspatial Data",
    "text": "2.2 Importing of Aspatial Data\n\nresale <- read_csv(\"data/aspatial/resale-flat-prices-based-on-registration-date-from-jan-2017-onwards.csv\")\n\nLooking at the first few values of the dataset\n\nhead(resale)\n\n# A tibble: 6 × 11\n  month   town     flat_…¹ block stree…² store…³ floor…⁴ flat_…⁵ lease…⁶ remai…⁷\n  <chr>   <chr>    <chr>   <chr> <chr>   <chr>     <dbl> <chr>     <dbl> <chr>  \n1 2017-01 ANG MO … 2 ROOM  406   ANG MO… 10 TO …      44 Improv…    1979 61 yea…\n2 2017-01 ANG MO … 3 ROOM  108   ANG MO… 01 TO …      67 New Ge…    1978 60 yea…\n3 2017-01 ANG MO … 3 ROOM  602   ANG MO… 01 TO …      67 New Ge…    1980 62 yea…\n4 2017-01 ANG MO … 3 ROOM  465   ANG MO… 04 TO …      68 New Ge…    1980 62 yea…\n5 2017-01 ANG MO … 3 ROOM  601   ANG MO… 01 TO …      67 New Ge…    1980 62 yea…\n6 2017-01 ANG MO … 3 ROOM  150   ANG MO… 01 TO …      68 New Ge…    1981 63 yea…\n# … with 1 more variable: resale_price <dbl>, and abbreviated variable names\n#   ¹​flat_type, ²​street_name, ³​storey_range, ⁴​floor_area_sqm, ⁵​flat_model,\n#   ⁶​lease_commence_date, ⁷​remaining_lease\n\n\n\n2.2.1 Filtering Resale Data\nFiltering Resales data to only include data of 4 room and months between Jan 2021 and Feb 2023\n\nresale_filtered <- filter(resale, flat_type == \"4 ROOM\") %>%\n  filter(month >= \"2021-01\" & month <= \"2023-02\")\n\nDouble Checking the Time Period\n\nunique(resale_filtered$month)\n\n [1] \"2021-01\" \"2021-02\" \"2021-03\" \"2021-04\" \"2021-05\" \"2021-06\" \"2021-07\"\n [8] \"2021-08\" \"2021-09\" \"2021-10\" \"2021-11\" \"2021-12\" \"2022-01\" \"2022-02\"\n[15] \"2022-03\" \"2022-04\" \"2022-05\" \"2022-06\" \"2022-07\" \"2022-08\" \"2022-09\"\n[22] \"2022-10\" \"2022-11\" \"2022-12\" \"2023-01\" \"2023-02\"\n\n\nDouble Checking Flat Type\n\nunique(resale_filtered$flat_type)\n\n[1] \"4 ROOM\"\n\n\nTaking a look at the filtered results\n\nglimpse(resale_filtered)\n\nRows: 25,502\nColumns: 11\n$ month               <chr> \"2021-01\", \"2021-01\", \"2021-01\", \"2021-01\", \"2021-…\n$ town                <chr> \"ANG MO KIO\", \"ANG MO KIO\", \"ANG MO KIO\", \"ANG MO …\n$ flat_type           <chr> \"4 ROOM\", \"4 ROOM\", \"4 ROOM\", \"4 ROOM\", \"4 ROOM\", …\n$ block               <chr> \"547\", \"414\", \"509\", \"467\", \"571\", \"134\", \"204\", \"…\n$ street_name         <chr> \"ANG MO KIO AVE 10\", \"ANG MO KIO AVE 10\", \"ANG MO …\n$ storey_range        <chr> \"04 TO 06\", \"01 TO 03\", \"01 TO 03\", \"07 TO 09\", \"0…\n$ floor_area_sqm      <dbl> 92, 92, 91, 92, 92, 98, 92, 92, 92, 92, 92, 109, 9…\n$ flat_model          <chr> \"New Generation\", \"New Generation\", \"New Generatio…\n$ lease_commence_date <dbl> 1981, 1979, 1980, 1979, 1979, 1978, 1977, 1978, 19…\n$ remaining_lease     <chr> \"59 years\", \"57 years 09 months\", \"58 years 06 mon…\n$ resale_price        <dbl> 370000, 375000, 380000, 385000, 410000, 410000, 41…\n\n\n\n\n2.2.2 Adding More Data to Resale Data\n\n2.2.2.1 Adding New Data to Dataset\n\nAddress\nRemaining Lease year and months\n\n\nresale_transformed <- resale_filtered %>%\n  mutate(resale_filtered, address = paste(block,street_name)) %>%\n  mutate(resale_filtered, remaining_lease_yr = as.integer(str_sub(remaining_lease, 0, 2))) %>%\n  mutate(resale_filtered, remaining_lease_mth = as.integer(str_sub(remaining_lease, 9, 11)))\n\nReplacing NA values to 0\n\nresale_transformed$remaining_lease_mth[is.na(resale_transformed$remaining_lease_mth)] <- 0\n\nConverting lease years to months for easier calculation later\n\nresale_transformed$remaining_lease_yr <- resale_transformed$remaining_lease_yr * 12\nresale_transformed <- resale_transformed %>%\n  mutate(resale_transformed, remaining_lease_mths = rowSums(resale_transformed[, c(\"remaining_lease_yr\", \"remaining_lease_mth\")])) %>%\n  select(month, town, address, block, street_name, flat_type, storey_range, floor_area_sqm, flat_model, lease_commence_date, remaining_lease_mths, resale_price)\n\n\n\n2.2.2.2 Getting of LAT & LONG from OneMap.sg API\nFor us to visualize the data on the map, we will have to first get the LAT & LONG data from the address. Its a good thing that OneMap.sg has an API for us to easily grab the LAT & LONG based off the address.\nMore details on how to use OneMap.sg API here\nFirst we create a variable of all unique address\n\naddress <- sort(unique(resale_transformed$address))\n\nViewing the first few addresses\n\nhead(address)\n\n[1] \"1 CHAI CHEE RD\"    \"1 PINE CL\"         \"1 ST. GEORGE'S RD\"\n[4] \"1 TECK WHYE AVE\"   \"1 TOH YI DR\"       \"10 CHAI CHEE RD\"  \n\n\nWe will then use a function to loop through and retrieve the LAT and LONG\n\nget_coords <- function(add_list){\n  \n  # Create a data frame to store all retrieved coordinates\n  postal_coords <- data.frame()\n    \n  for (i in add_list){\n    #print(i)\n\n    r <- GET('https://developers.onemap.sg/commonapi/search?',\n           query=list(searchVal=i,\n                     returnGeom='Y',\n                     getAddrDetails='Y'))\n    data <- fromJSON(rawToChar(r$content))\n    found <- data$found\n    res <- data$results\n    \n    # Create a new data frame for each address\n    new_row <- data.frame()\n    \n    # If single result, append \n    if (found == 1){\n      postal <- res$POSTAL \n      lat <- res$LATITUDE\n      lng <- res$LONGITUDE\n      new_row <- data.frame(address= i, postal = postal, latitude = lat, longitude = lng)\n    }\n    \n    # If multiple results, drop NIL and append top 1\n    else if (found > 1){\n      # Remove those with NIL as postal\n      res_sub <- res[res$POSTAL != \"NIL\", ]\n      \n      # Set as NA first if no Postal\n      if (nrow(res_sub) == 0) {\n          new_row <- data.frame(address= i, postal = NA, latitude = NA, longitude = NA)\n      }\n      \n      else{\n        top1 <- head(res_sub, n = 1)\n        postal <- top1$POSTAL \n        lat <- top1$LATITUDE\n        lng <- top1$LONGITUDE\n        new_row <- data.frame(address= i, postal = postal, latitude = lat, longitude = lng)\n      }\n    }\n\n    else {\n      new_row <- data.frame(address= i, postal = NA, latitude = NA, longitude = NA)\n    }\n    \n    # Add the row\n    postal_coords <- rbind(postal_coords, new_row)\n  }\n  return(postal_coords)\n}\n\nRunning the Function\n\nlatlong <- get_coords(address)\n\nChecking if there is any missing values\n\nlatlong[(is.na(latlong))]\n\ncharacter(0)\n\n\n\n\n2.2.2.3 Combining the Data back\n\nresale_latlong <- left_join(resale_transformed, latlong, by = c('address' = 'address'))\n\nViewing the results\n\nhead(resale_latlong)\n\n# A tibble: 6 × 15\n  month   town     address block stree…¹ flat_…² store…³ floor…⁴ flat_…⁵ lease…⁶\n  <chr>   <chr>    <chr>   <chr> <chr>   <chr>   <chr>     <dbl> <chr>     <dbl>\n1 2021-01 ANG MO … 547 AN… 547   ANG MO… 4 ROOM  04 TO …      92 New Ge…    1981\n2 2021-01 ANG MO … 414 AN… 414   ANG MO… 4 ROOM  01 TO …      92 New Ge…    1979\n3 2021-01 ANG MO … 509 AN… 509   ANG MO… 4 ROOM  01 TO …      91 New Ge…    1980\n4 2021-01 ANG MO … 467 AN… 467   ANG MO… 4 ROOM  07 TO …      92 New Ge…    1979\n5 2021-01 ANG MO … 571 AN… 571   ANG MO… 4 ROOM  07 TO …      92 New Ge…    1979\n6 2021-01 ANG MO … 134 AN… 134   ANG MO… 4 ROOM  07 TO …      98 New Ge…    1978\n# … with 5 more variables: remaining_lease_mths <dbl>, resale_price <dbl>,\n#   postal <chr>, latitude <chr>, longitude <chr>, and abbreviated variable\n#   names ¹​street_name, ²​flat_type, ³​storey_range, ⁴​floor_area_sqm,\n#   ⁵​flat_model, ⁶​lease_commence_date\n\n\nChecking if there is any missing values\n\nresale_latlong[(is.na(resale_latlong))]\n\n<unspecified> [0]\n\n\n\n\n2.2.2.4 Saving the result into a file\nRunning this allows us to save the file for us to save time and from re-running the steps to retrieve the same resale file with LAT and LONG values.\n\nresale_latlong.rds <- write_rds(resale_latlong, \"data/model/resale_latlong.rds\")\n\n\n\n\n2.2.3 Reading of Resale file with LAT and LONG\nStart from this step if you already have your own resale file with the LAT and LONG data.\nRemember to either change the file name to match the code or code to match the file.\n\nresale_main <- read_rds(\"data/model/resale_latlong.rds\")\n\nPreviewing the content\n\nhead(resale_main)\n\n# A tibble: 6 × 15\n  month   town     address block stree…¹ flat_…² store…³ floor…⁴ flat_…⁵ lease…⁶\n  <chr>   <chr>    <chr>   <chr> <chr>   <chr>   <chr>     <dbl> <chr>     <dbl>\n1 2021-01 ANG MO … 547 AN… 547   ANG MO… 4 ROOM  04 TO …      92 New Ge…    1981\n2 2021-01 ANG MO … 414 AN… 414   ANG MO… 4 ROOM  01 TO …      92 New Ge…    1979\n3 2021-01 ANG MO … 509 AN… 509   ANG MO… 4 ROOM  01 TO …      91 New Ge…    1980\n4 2021-01 ANG MO … 467 AN… 467   ANG MO… 4 ROOM  07 TO …      92 New Ge…    1979\n5 2021-01 ANG MO … 571 AN… 571   ANG MO… 4 ROOM  07 TO …      92 New Ge…    1979\n6 2021-01 ANG MO … 134 AN… 134   ANG MO… 4 ROOM  07 TO …      98 New Ge…    1978\n# … with 5 more variables: remaining_lease_mths <dbl>, resale_price <dbl>,\n#   postal <chr>, latitude <chr>, longitude <chr>, and abbreviated variable\n#   names ¹​street_name, ²​flat_type, ³​storey_range, ⁴​floor_area_sqm,\n#   ⁵​flat_model, ⁶​lease_commence_date\n\n\n\n\n2.2.4 Transforming to sf and assigning CRS\n\nresale_main_sf <- st_as_sf(resale_main,\n                           coords = c(\"longitude\", \"latitude\"),\n                           crs=4326) %>%\n  st_transform(crs = 3414)\n\nLet’s check if the coordinate value is correct\n\nst_crs(resale_main_sf)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]\n\n\nLastly, we will check if there is any invalid Geometries\n\nlength(which(st_is_valid(resale_main_sf) == FALSE))\n\n[1] 0"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#importing-geospatial-data",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#importing-geospatial-data",
    "title": "Take Home Exercise 3",
    "section": "2.3 Importing Geospatial Data",
    "text": "2.3 Importing Geospatial Data\n\nmpsz <- st_read(dsn = \"data/geospatial\", layer = \"MPSZ-2019\")\n\nReading layer `MPSZ-2019' from data source \n  `C:\\Users\\Daniel\\Desktop\\Github\\IS419\\IS415-GAA\\Take-Home_Ex\\Take-Home_Ex03\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 332 features and 6 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 103.6057 ymin: 1.158699 xmax: 104.0885 ymax: 1.470775\nGeodetic CRS:  WGS 84\n\n\nChecking if there is any invalid Geometries\n\nlength(which(st_is_valid(mpsz) == FALSE))\n\n[1] 6\n\n\nSince there is invalid Geometries, we will make it valid\nHoles in polygons are okay, but they can cause problems if they go the wrong way round or if the hole is caused by the polygon looping itself.\n\nmpsz <- st_make_valid(mpsz)\nlength(which(st_is_valid(mpsz) == FALSE))\n\n[1] 0\n\n\nLastly, like the previous resale LATLONG data, we will change the CRS code\n\nmpsz <- st_transform(mpsz, 3414)\nst_crs(mpsz)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]\n\n\n\n2.3.1 Import Geospatial Data without LATLONG in data\nCBD Area\nFor CBD data, we can easily find the location of CBD area according to here\nFrom the LATLONG of 1°17′30″N 103°51′00″E according to the Wiki source, we can get the number coordinates from Google Map by placing the coordinate above, then right-clicking on the pin to get the values of 1.291667, 103.850000. It seems like the location pointed to is 3 Coleman St, Singapore 179804.\n\nname <- c('CBD')\nlatitude = c(1.291667)\nlongitude = c(103.850000)\ncbd <- data.frame(name, latitude, longitude)\n\nAs usual, we will need to change the CRS value to match.\n\ncbd_sf <- st_as_sf(cbd,\n                   coords = c(\"longitude\",\n                              \"latitude\"),\n                   crs = 4326) %>%\n  st_transform(crs = 3414)\n\nst_crs(cbd_sf)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]\n\n\nPrimary Schools\nAs the data given for the primary schools do not have LATLONG details, we will need to use the function created above to give us the LATLONG values again.\n\nprimary_raw <- read.csv(\"data/geospatial/general-information-of-schools.csv\")\n\nprimary_data <- primary_raw %>%\n  filter(mainlevel_code == \"PRIMARY\") %>%\n  select(school_name, address, postal_code, mainlevel_code)\n\nglimpse(primary_data)\n\nRows: 183\nColumns: 4\n$ school_name    <chr> \"ADMIRALTY PRIMARY SCHOOL\", \"AHMAD IBRAHIM PRIMARY SCHO…\n$ address        <chr> \"11   WOODLANDS CIRCLE\", \"10   YISHUN STREET 11\", \"100 …\n$ postal_code    <int> 738907, 768643, 579646, 159016, 544969, 569785, 569920,…\n$ mainlevel_code <chr> \"PRIMARY\", \"PRIMARY\", \"PRIMARY\", \"PRIMARY\", \"PRIMARY\", …\n\n\nCalling the LATLONG conversion steps and function similar to above\n\nprimary_postal <- unique(primary_data$postal_code)\nprimary_latlong <- get_coords(primary_postal)\n\nChecking for NAs\n\nprimary_latlong[(is.na(primary_latlong))]\n\n[1] NA NA NA NA NA NA NA NA NA\n\n\nAfter looking at the issue, we can see that the issue is due to postal that starts with 0, thus we will remove the 0\n\nprimary_data$postal_code[primary_data$postal_code == '88256'] <- '088256'\nprimary_data$postal_code[primary_data$postal_code == '99757'] <- '099757'\nprimary_data$postal_code[primary_data$postal_code == '99840'] <- '099840'\n\nRe-running the functions\n\nprimary_postal <- unique(primary_data$postal_code)\nprimary_latlong <- get_coords(primary_postal)\n\nprimary_latlong[(is.na(primary_latlong))]\n\ncharacter(0)\n\n\nNow we will combine the data and convert the CRS value\n\nprimary_school <- left_join(primary_data, primary_latlong, by = c('postal_code' = 'postal'))\n\nprimary_school_sf <- st_as_sf(primary_school,\n                              coords = c(\"longitude\",\n                                         \"latitude\"),\n                              crs = 4326) %>%\n  st_transform(crs = 3414)\n\nGood Primary Schools\nTo define good primary schools, we get the data from here. However your preferences and sources might vary, so do change as you wish\n\ngood_primary_school <- primary_school %>%\n  filter(school_name %in%\n           c(\"PEI HWA PRESBYTERIAN PRIMARY SCHOOL\",\n             \"GONGSHANG PRIMARY SCHOOL\",\n             \"RIVERSIDE PRIMARY SCHOOL\",\n             \"RED SWASTIKA SCHOOL\",\n             \"PUNGGOL GREEN PRIMARY SCHOOL\",\n             \"PRINCESS ELIZABETH PRIMARY SCHOOL\",\n             \"WESTWOOD PRIMARY SCHOOL\",\n             \"AI TONG SCHOOL\",\n             \"FRONTIER PRIMARY SCHOOL\",\n             \"OASIS PRIMARY SCHOOL\"))\n\nAs usual, converting CRS value\n\ngood_primary_school_sf <- st_as_sf(good_primary_school,\n                                   coords = c(\"longitude\",\n                                              \"latitude\"),\n                                   crs = 4326) %>%\n  st_transform(crs = 3414)\n\nShopping Malls\nAs there is source of shopping mall data from gov.sg, the source was taken from Wiki and from a person who created a scrapper to get the data with LATLONG.\n\nshopping <- read.csv(\"data/geospatial/mall_coordinates.csv\")\n\nshopping <- shopping %>%\n  select(name, latitude, longitude)\n\nglimpse(shopping)\n\nRows: 199\nColumns: 3\n$ name      <chr> \"100 AM\", \"i12 Katong\", \"313@SOMERSET\", \"321 CLEMENTI\", \"600…\n$ latitude  <dbl> 1.274588, 1.305087, 1.301385, 1.312025, 1.334042, 1.437131, …\n$ longitude <dbl> 103.8435, 103.9051, 103.8377, 103.7650, 103.8510, 103.7953, …\n\n\nConverting CRS\n\nshopping_sf <- st_as_sf(shopping,\n                        coords = c(\"longitude\",\n                                   \"latitude\"),\n                        crs = 4326) %>%\n  st_transform(crs = 3414)\n\n\n\n2.3.2 Importing Geospatial Data with LATLONG in data\nSince all the other data sets already have LATLONG included, we will import them and ensure the CRS code is correct\nElderly Care\n\nelder_sf <- st_read(dsn = \"data/geospatial\", layer = \"ELDERCARE\")\n\nReading layer `ELDERCARE' from data source \n  `C:\\Users\\Daniel\\Desktop\\Github\\IS419\\IS415-GAA\\Take-Home_Ex\\Take-Home_Ex03\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 133 features and 18 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 14481.92 ymin: 28218.43 xmax: 41665.14 ymax: 46804.9\nProjected CRS: SVY21\n\nelder_sf <- st_transform(elder_sf, 3414)\n\nHawker Centre\n\nhawker_sf <- st_read(dsn = \"data/geospatial\", layer = \"HAWKERCENTRE\")\n\nReading layer `HAWKERCENTRE' from data source \n  `C:\\Users\\Daniel\\Desktop\\Github\\IS419\\IS415-GAA\\Take-Home_Ex\\Take-Home_Ex03\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 125 features and 21 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 12874.19 ymin: 28355.97 xmax: 45241.4 ymax: 47872.53\nProjected CRS: SVY21\n\nhawker_sf <- st_transform(hawker_sf, 3414)\n\nMRT Stations\n\nmrt <- read.csv(\"data/geospatial/mrtsg.csv\")\n\nmrt_sf <- st_as_sf(mrt,\n                   coords = c(\"Longitude\",\n                              \"Latitude\"),\n                              crs = 4326) %>%\n  st_transform(crs = 3414)\n\nParks\n\nparks_sf <- st_read(dsn = \"data/geospatial\", layer = \"NATIONALPARKS\")\n\nReading layer `NATIONALPARKS' from data source \n  `C:\\Users\\Daniel\\Desktop\\Github\\IS419\\IS415-GAA\\Take-Home_Ex\\Take-Home_Ex03\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 352 features and 15 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 12373.11 ymin: 21869.93 xmax: 46735.95 ymax: 49231.09\nProjected CRS: SVY21\n\nparks_sf <- st_transform(parks_sf, 3414)\n\nSupermarkets\n\nsupermarket_sf <- st_read(dsn = \"data/geospatial\", layer = \"SUPERMARKETS\")\n\nReading layer `SUPERMARKETS' from data source \n  `C:\\Users\\Daniel\\Desktop\\Github\\IS419\\IS415-GAA\\Take-Home_Ex\\Take-Home_Ex03\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 526 features and 8 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 4901.188 ymin: 25529.08 xmax: 46948.22 ymax: 49233.6\nProjected CRS: SVY21\n\nsupermarket_sf <- st_transform(supermarket_sf, 3414)\n\nKindergartens\n\nkindergarten_sf <- st_read(dsn = \"data/geospatial\", layer = \"KINDERGARTENS\")\n\nReading layer `KINDERGARTENS' from data source \n  `C:\\Users\\Daniel\\Desktop\\Github\\IS419\\IS415-GAA\\Take-Home_Ex\\Take-Home_Ex03\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 448 features and 15 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 11909.7 ymin: 25596.33 xmax: 43395.47 ymax: 48562.06\nProjected CRS: SVY21\n\nkindergarten_sf <- st_transform(kindergarten_sf, 3414)\n\nChildcare\n\nchildcare_sf <- st_read(dsn = \"data/geospatial\", layer = \"CHILDCARE\")\n\nReading layer `CHILDCARE' from data source \n  `C:\\Users\\Daniel\\Desktop\\Github\\IS419\\IS415-GAA\\Take-Home_Ex\\Take-Home_Ex03\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 1545 features and 15 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 11203.01 ymin: 25667.6 xmax: 45404.24 ymax: 49300.88\nProjected CRS: WGS_1984_Transverse_Mercator\n\n# Assign EPSG Code\nchildcare_sf <- st_transform(childcare_sf, 3414)\n\nBus Stops\n\nBusStop_sf <- st_read(dsn = \"data/geospatial\", layer = \"BusStop\")\n\nReading layer `BusStop' from data source \n  `C:\\Users\\Daniel\\Desktop\\Github\\IS419\\IS415-GAA\\Take-Home_Ex\\Take-Home_Ex03\\data\\geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 5159 features and 3 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 3970.122 ymin: 26482.1 xmax: 48284.56 ymax: 52983.82\nProjected CRS: SVY21\n\nBusStop_sf <- st_transform(BusStop_sf, 3414)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#function-for-calculation",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#function-for-calculation",
    "title": "Take Home Exercise 3",
    "section": "3.1 Function for calculation",
    "text": "3.1 Function for calculation\n\n3.1.1 Normal Calculation\nCurrently, the distance is measured in metre because SVY21 projected coordinate system is used. The code chunk below will be used to convert the unit f measurement from metre to km.\n\nprox_cal <- function(df1, df2, col_name) {\n  dist_matrix <- st_distance(df1, df2)\n  df1[,col_name] <- rowMins(dist_matrix) / 1000\n  return(df1)\n}\n\n\n\n3.1.2 With Radius Calculation\n\nprox_cal_radius <- function(df1, df2, col_name, radius) {\n  dist_matrix <- st_distance(df1, df2) %>%\n    drop_units() %>%\n    as.data.frame()\n  df1[,col_name] <- rowSums(dist_matrix <= radius)\n  return(df1)\n}"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#calculating-location-factors",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#calculating-location-factors",
    "title": "Take Home Exercise 3",
    "section": "3.2 Calculating Location Factors",
    "text": "3.2 Calculating Location Factors\nNormal\n\nresale_main_sf <- prox_cal(resale_main_sf, cbd_sf, \"PROX_CBD\")\nresale_main_sf <- prox_cal(resale_main_sf, elder_sf, \"PROX_ELDERCARE\")\nresale_main_sf <- prox_cal(resale_main_sf, hawker_sf, \"PROX_HAWKER\")\nresale_main_sf <- prox_cal(resale_main_sf, mrt_sf, \"PROX_MRT\")\nresale_main_sf <- prox_cal(resale_main_sf, parks_sf, \"PROX_PARK\")\nresale_main_sf <- prox_cal(resale_main_sf, good_primary_school_sf, \"PROX_GOODPRIMARY\")\nresale_main_sf <- prox_cal(resale_main_sf, shopping_sf, \"PROX_SHOPPING\")\nresale_main_sf <- prox_cal(resale_main_sf, BusStop_sf, \"PROX_BUS\")\nresale_main_sf <- prox_cal(resale_main_sf, childcare_sf, \"PROX_CHILDCARE\")\nresale_main_sf <- prox_cal(resale_main_sf, supermarket_sf, \"PROX_SUPERMARKET\")\n\nRadius\n\nresale_main_sf <- prox_cal_radius(resale_main_sf, kindergarten_sf, \"WITHIN_350M_KINDERGARTEN\", 350)\nresale_main_sf <- prox_cal_radius(resale_main_sf, childcare_sf, \"WITHIN_350M_CHILDCARE\", 350)\nresale_main_sf <- prox_cal_radius(resale_main_sf, BusStop_sf, \"WITHIN_350M_BUS\", 350)\nresale_main_sf <- prox_cal_radius(resale_main_sf, primary_school_sf, \"WITHIN_1KM_PRIMARY\", 1000)"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#saving-of-dataset",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#saving-of-dataset",
    "title": "Take Home Exercise 3",
    "section": "3.3 Saving of dataset",
    "text": "3.3 Saving of dataset\n\nresale_main_sf <- resale_main_sf %>%\n  mutate() %>%\n  rename(\"AREA_SQM\" = \"floor_area_sqm\",\n         \"LEASE_MTHS\" = \"remaining_lease_mths\",\n         \"PRICE\" = \"resale_price\",\n         \"STOREY\" = \"storey_range\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#statistical-graphs",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#statistical-graphs",
    "title": "Take Home Exercise 3",
    "section": "4.1 Statistical Graphs",
    "text": "4.1 Statistical Graphs\n\n4.1.1 Distribution of 4-Room Resale Flat Prices\n\nggplot(data = resale_main_sf, aes(x = `PRICE`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\") +\n  labs(title = \"Distribution of 4-Room Resale Prices\",\n       x = \"Resale Prices\",\n       y = \"Frequency\")\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nFrom the histogram, we can see that it is skewed towards the right. This means that the transacted price were at a relative lower price.\n\n\n\nresale_main_sf <- resale_main_sf %>%\n  mutate(`LOG_SELLING_PRICE` = log(PRICE))\n\n\nggplot(data=resale_main_sf, aes(x=`LOG_SELLING_PRICE`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nWe can see that after we log the values, it becomes slightly less skewed.\n\n\n\n\n4.1.2 Viewing other category\n\nAREA_SQM <- ggplot(data = resale_main_sf, aes(x = `AREA_SQM`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nLEASE_MTHS <- ggplot(data = resale_main_sf, aes(x = `LEASE_MTHS`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nPROX_CBD <- ggplot(data = resale_main_sf, aes(x = `PROX_CBD`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nPROX_BUS <- ggplot(data = resale_main_sf, aes(x = `PROX_BUS`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nPROX_CHILDCARE <- ggplot(data = resale_main_sf, aes(x = `PROX_CHILDCARE`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nPROX_ELDERCARE <- ggplot(data = resale_main_sf, aes(x = `PROX_ELDERCARE`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nPROX_HAWKER <- ggplot(data = resale_main_sf, aes(x = `PROX_HAWKER`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nPROX_GOODPRIMARY <- ggplot(data = resale_main_sf, aes(x = `PROX_GOODPRIMARY`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nPROX_PARK <- ggplot(data = resale_main_sf, aes(x = `PROX_PARK`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nPROX_SUPERMARKET <- ggplot(data = resale_main_sf, aes(x = `PROX_SUPERMARKET`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nPROX_SHOPPING <- ggplot(data = resale_main_sf, aes(x = `PROX_SHOPPING`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nPROX_MRT <- ggplot(data = resale_main_sf, aes(x = `PROX_MRT`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nWITHIN_350M_KINDERGARTEN <- ggplot(data = resale_main_sf, aes(x = `WITHIN_350M_KINDERGARTEN`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nWITHIN_350M_CHILDCARE <- ggplot(data = resale_main_sf, aes(x = `WITHIN_350M_CHILDCARE`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nWITHIN_350M_BUS <- ggplot(data = resale_main_sf, aes(x = `WITHIN_350M_BUS`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nWITHIN_1KM_PRIMARY <- ggplot(data = resale_main_sf, aes(x = `WITHIN_1KM_PRIMARY`)) +\n  geom_histogram(bins = 20, color = \"black\", fill = \"light blue\")\n\nggarrange(AREA_SQM, LEASE_MTHS, PROX_CBD, PROX_BUS, PROX_CHILDCARE, PROX_ELDERCARE, PROX_HAWKER, PROX_GOODPRIMARY, PROX_PARK, PROX_SUPERMARKET, PROX_SHOPPING, PROX_MRT, WITHIN_350M_KINDERGARTEN, WITHIN_350M_CHILDCARE, WITHIN_350M_BUS, WITHIN_1KM_PRIMARY, ncol = 3, nrow = 6)\n\n\n\n\n\n\n4.1.3 Viewing the Distribution using Boxplot\n\nggplot(data = resale_main_sf, aes(x = '', y = PRICE)) +\n  geom_boxplot() +\n  labs(x = '', y = 'Resale Prices')\n\n\n\n\n\nsummary(resale_main_sf$PRICE)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n 250000  445000  495000  529142  570000 1370000 \n\n\n\n\n\n\n\n\nNote\n\n\n\nWe can see that there are quite a few outliers like the min and max selling at extremes. But mainly the price ranges from 554k to 570k\n\n\n\n\n4.1.4 Point Map\n\ntmap_mode(\"view\")\ntmap_options(check.and.fix = TRUE)\ntm_shape(resale_main_sf)+\n  tm_dots(col = \"PRICE\",\n          alpha = 0.6,\n          style = \"quantile\",\n          popup.vars=c(\"block\"=\"block\", \"street_name\"=\"street_name\", \"flat_model\" = \"flat_model\", \"town\" = \"town\", \"PRICE\" = \"PRICE\", \"LEASE_MTHS\", \"LEASE_MTHS\")) +\n  tm_view(set.zoom.limits = c(11, 14))\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nWe can see that the higher resales prices are generally located at the bottom right and bottom half of Singapore.\n\n\n\ntown_mean <- aggregate(resale_main_sf[, \"PRICE\"], list(resale_main_sf$town), mean)\ntown_top10 = top_n(town_mean, 10, `PRICE`) %>%\n  arrange(desc(`PRICE`))\ntown_top10\n\nSimple feature collection with 10 features and 2 fields\nGeometry type: MULTIPOINT\nDimension:     XY\nBounding box:  xmin: 19536.43 ymin: 28217.39 xmax: 35958.92 ymax: 41493.47\nProjected CRS: SVY21 / Singapore TM\n           Group.1    PRICE                       geometry\n1     CENTRAL AREA 857591.2 MULTIPOINT ((28640.73 29932...\n2       QUEENSTOWN 783287.3 MULTIPOINT ((22133.07 32910...\n3      BUKIT MERAH 717229.0 MULTIPOINT ((25024.14 28462...\n4  KALLANG/WHAMPOA 703112.0 MULTIPOINT ((19536.43 41493...\n5        TOA PAYOH 655306.9 MULTIPOINT ((29021.66 34720...\n6         CLEMENTI 646121.4 MULTIPOINT ((19863.73 32474...\n7      BUKIT TIMAH 638823.0 MULTIPOINT ((21224.71 35657...\n8           BISHAN 609267.0 MULTIPOINT ((27638.13 37842...\n9          GEYLANG 590617.2 MULTIPOINT ((32749.43 33252...\n10      ANG MO KIO 558339.2 MULTIPOINT ((28070.74 38987...\n\n\n\n\n\n\n\n\nImportant\n\n\n\nFrom the map data above, we can infer based off referring to the map. But with the result above, it shows that the places with higher resales prices were the Central Area with Queenstown not far behind."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#simple-linear-regression-method",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#simple-linear-regression-method",
    "title": "Take Home Exercise 3",
    "section": "5.1 Simple Linear Regression Method",
    "text": "5.1 Simple Linear Regression Method\n\nresales_slr <- lm(formula=PRICE ~ AREA_SQM, data = resale_main_sf)\n\n\nsummary(resales_slr)\n\n\nCall:\nlm(formula = PRICE ~ AREA_SQM, data = resale_main_sf)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-286935  -83442  -32277   42723  838888 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept) 639415.3    11240.0  56.888   <2e-16 ***\nAREA_SQM     -1164.5      118.4  -9.837   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 129800 on 25500 degrees of freedom\nMultiple R-squared:  0.00378,   Adjusted R-squared:  0.003741 \nF-statistic: 96.76 on 1 and 25500 DF,  p-value: < 2.2e-16\n\n\n\n\n\n\n\n\nNote\n\n\n\nSince p-value is much smaller than 0.0001, we will reject the null hypothesis that mean is a good estimator of SELLING_PRICE. This will allow us to infer that simple linear regression model above is a good estimator of SELLING_PRICE.\n\n\n\nggplot(data=resale_main_sf,  \n       aes(x=`AREA_SQM`, y=`PRICE`)) +\n  geom_point() +\n  geom_smooth(method = lm)\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nSeems like the variability of AREA_SQ can’t really fit the straight line. So after plotting the best fit curve, we can see that AREA_SQM is not a good indicator of predicting the PRICE."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#multiple-linear-regression-method",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#multiple-linear-regression-method",
    "title": "Take Home Exercise 3",
    "section": "5.2 Multiple Linear Regression Method",
    "text": "5.2 Multiple Linear Regression Method\n\nresale_main_nogeo <- resale_main_sf %>%\n  st_drop_geometry() %>%\n  dplyr::select(c(7, 8, 11, 12, 14:27)) %>%\n  mutate(STOREY = as.character(STOREY))\n\nChecking dataset\n\nglimpse(resale_main_nogeo)\n\nRows: 25,502\nColumns: 18\n$ STOREY                   <chr> \"04 TO 06\", \"01 TO 03\", \"01 TO 03\", \"07 TO 09…\n$ AREA_SQM                 <dbl> 92, 92, 91, 92, 92, 98, 92, 92, 92, 92, 92, 1…\n$ LEASE_MTHS               <dbl> 708, 693, 702, 695, 689, 681, 661, 682, 692, …\n$ PRICE                    <dbl> 370000, 375000, 380000, 385000, 410000, 41000…\n$ PROX_CBD                 <dbl> 9.564575, 8.401690, 9.516492, 8.580908, 9.084…\n$ PROX_BUS                 <dbl> 0.16157609, 0.16740841, 0.07424143, 0.0887911…\n$ PROX_CHILDCARE           <dbl> 2.493662e-01, 6.715056e-02, 1.385583e-01, 1.4…\n$ PROX_ELDERCARE           <dbl> 1.08567795, 0.15039052, 0.72242472, 0.0981628…\n$ PROX_HAWKER              <dbl> 0.4442515, 0.2050009, 0.4495734, 0.3190679, 0…\n$ PROX_GOODPRIMARY         <dbl> 3.182527, 2.354024, 2.414729, 2.699653, 2.648…\n$ PROX_PARK                <dbl> 0.8291527, 0.7847864, 0.3796058, 0.9242129, 0…\n$ PROX_SUPERMARKET         <dbl> 0.4184204, 0.1946009, 0.4435109, 0.4269715, 0…\n$ PROX_SHOPPING            <dbl> 1.1817959, 0.8444986, 0.2966736, 0.9304149, 0…\n$ PROX_MRT                 <dbl> 1.0731215, 0.8245176, 0.4544926, 0.9503956, 0…\n$ WITHIN_350M_KINDERGARTEN <dbl> 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, …\n$ WITHIN_350M_CHILDCARE    <dbl> 2, 3, 3, 3, 3, 2, 6, 3, 3, 3, 3, 3, 5, 2, 3, …\n$ WITHIN_350M_BUS          <dbl> 4, 7, 10, 4, 8, 2, 8, 7, 6, 7, 7, 7, 8, 8, 11…\n$ WITHIN_1KM_PRIMARY       <dbl> 1, 3, 2, 3, 2, 2, 3, 2, 3, 3, 1, 2, 3, 2, 2, …\n\n\n\ncorrplot(cor(resale_main_nogeo[, 2:18]), diag = FALSE, order = \"AOE\",\n         t1.pos = \"td\",\n         t1.cex = 0.5,\n         method = \"number\",\n         type = \"upper\")\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nWe can see that there are only a few correlated variables and they are within the acceptable range. So, can can accept all the variables in the regression.\n\n\n\n5.2.1 Building Hedonic pricing model using multiple linear regression method\n\nresale_mlr <- lm(formula = PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD +\n                   PROX_CHILDCARE + PROX_ELDERCARE + PROX_GOODPRIMARY +\n                   PROX_HAWKER + PROX_MRT + PROX_PARK + PROX_SHOPPING +\n                   PROX_SUPERMARKET + WITHIN_1KM_PRIMARY + WITHIN_350M_BUS +\n                   WITHIN_350M_CHILDCARE + WITHIN_350M_KINDERGARTEN + LEASE_MTHS,\n                 data = resale_main_nogeo)\nsummary(resale_mlr)\n\n\nCall:\nlm(formula = PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD + \n    PROX_CHILDCARE + PROX_ELDERCARE + PROX_GOODPRIMARY + PROX_HAWKER + \n    PROX_MRT + PROX_PARK + PROX_SHOPPING + PROX_SUPERMARKET + \n    WITHIN_1KM_PRIMARY + WITHIN_350M_BUS + WITHIN_350M_CHILDCARE + \n    WITHIN_350M_KINDERGARTEN + LEASE_MTHS, data = resale_main_nogeo)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-366081  -45763   -1688   44765  366746 \n\nCoefficients:\n                           Estimate Std. Error  t value Pr(>|t|)    \n(Intercept)              120014.669   8258.128   14.533  < 2e-16 ***\nSTOREY04 TO 06            18174.045   1415.338   12.841  < 2e-16 ***\nSTOREY07 TO 09            33293.452   1433.951   23.218  < 2e-16 ***\nSTOREY10 TO 12            42205.423   1465.693   28.796  < 2e-16 ***\nSTOREY13 TO 15            46506.923   1732.282   26.847  < 2e-16 ***\nSTOREY16 TO 18            57642.699   2237.856   25.758  < 2e-16 ***\nSTOREY19 TO 21            81000.888   3229.399   25.082  < 2e-16 ***\nSTOREY22 TO 24            93152.163   3729.839   24.975  < 2e-16 ***\nSTOREY25 TO 27           129017.648   4162.388   30.996  < 2e-16 ***\nSTOREY28 TO 30           191972.634   5073.291   37.840  < 2e-16 ***\nSTOREY31 TO 33           200784.072   6147.604   32.661  < 2e-16 ***\nSTOREY34 TO 36           229694.831   6128.617   37.479  < 2e-16 ***\nSTOREY37 TO 39           237916.273   7247.254   32.828  < 2e-16 ***\nSTOREY40 TO 42           254342.952  10061.970   25.278  < 2e-16 ***\nSTOREY43 TO 45           306318.117  13356.989   22.933  < 2e-16 ***\nSTOREY46 TO 48           363573.767  22972.861   15.826  < 2e-16 ***\nSTOREY49 TO 51           486732.032  39689.742   12.263  < 2e-16 ***\nAREA_SQM                   3337.357     66.666   50.061  < 2e-16 ***\nPROX_BUS                    560.743   8367.314    0.067   0.9466    \nPROX_CBD                 -16334.883    157.010 -104.037  < 2e-16 ***\nPROX_CHILDCARE           -28447.588   5842.370   -4.869 1.13e-06 ***\nPROX_ELDERCARE            -7618.521    766.757   -9.936  < 2e-16 ***\nPROX_GOODPRIMARY          -1106.698    276.047   -4.009 6.11e-05 ***\nPROX_HAWKER              -22254.694    912.079  -24.400  < 2e-16 ***\nPROX_MRT                 -23445.396   1273.357  -18.412  < 2e-16 ***\nPROX_PARK                  2133.165   1051.654    2.028   0.0425 *  \nPROX_SHOPPING            -24191.278   1462.249  -16.544  < 2e-16 ***\nPROX_SUPERMARKET           8280.425   2994.998    2.765   0.0057 ** \nWITHIN_1KM_PRIMARY        -9076.876    341.628  -26.569  < 2e-16 ***\nWITHIN_350M_BUS            1086.401    169.483    6.410 1.48e-10 ***\nWITHIN_350M_CHILDCARE     -3914.981    256.907  -15.239  < 2e-16 ***\nWITHIN_350M_KINDERGARTEN   6513.794    468.411   13.906  < 2e-16 ***\nLEASE_MTHS                  359.103      3.123  114.989  < 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 68620 on 25469 degrees of freedom\nMultiple R-squared:  0.722, Adjusted R-squared:  0.7216 \nF-statistic:  2067 on 32 and 25469 DF,  p-value: < 2.2e-16\n\n\n\n\n5.2.2 Preparing Publication Quality Table: olsrr method\n\nresale_mlr <- lm(formula = PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD +\n                   PROX_CHILDCARE + PROX_ELDERCARE + PROX_GOODPRIMARY +\n                   PROX_HAWKER + PROX_MRT + PROX_PARK + PROX_SHOPPING +\n                   PROX_SUPERMARKET + WITHIN_1KM_PRIMARY + WITHIN_350M_BUS +\n                   WITHIN_350M_CHILDCARE + WITHIN_350M_KINDERGARTEN + LEASE_MTHS,\n                 data = resale_main_nogeo)\nols_regress(resale_mlr)\n\n                            Model Summary                              \n----------------------------------------------------------------------\nR                       0.850       RMSE                    68623.970 \nR-Squared               0.722       Coef. Var                  12.969 \nAdj. R-Squared          0.722       MSE                4709249303.857 \nPred R-Squared          0.721       MAE                     53943.596 \n----------------------------------------------------------------------\n RMSE: Root Mean Square Error \n MSE: Mean Square Error \n MAE: Mean Absolute Error \n\n                                     ANOVA                                       \n--------------------------------------------------------------------------------\n                    Sum of                                                      \n                   Squares           DF       Mean Square       F          Sig. \n--------------------------------------------------------------------------------\nRegression    3.114971e+14           32      9.734283e+12    2067.056    0.0000 \nResidual      1.199399e+14        25469    4709249303.857                       \nTotal         4.314369e+14        25501                                         \n--------------------------------------------------------------------------------\n\n                                                Parameter Estimates                                                 \n-------------------------------------------------------------------------------------------------------------------\n                   model          Beta    Std. Error    Std. Beta       t         Sig          lower         upper \n-------------------------------------------------------------------------------------------------------------------\n             (Intercept)    120014.669      8258.128                   14.533    0.000    103828.267    136201.072 \n          STOREY04 TO 06     18174.045      1415.338        0.057      12.841    0.000     15399.902     20948.188 \n          STOREY07 TO 09     33293.452      1433.951        0.103      23.218    0.000     30482.826     36104.078 \n          STOREY10 TO 12     42205.423      1465.693        0.126      28.796    0.000     39332.581     45078.266 \n          STOREY13 TO 15     46506.923      1732.282        0.111      26.847    0.000     43111.552     49902.294 \n          STOREY16 TO 18     57642.699      2237.856        0.098      25.758    0.000     53256.374     62029.024 \n          STOREY19 TO 21     81000.888      3229.399        0.089      25.082    0.000     74671.081     87330.694 \n          STOREY22 TO 24     93152.163      3729.839        0.088      24.975    0.000     85841.465    100462.861 \n          STOREY25 TO 27    129017.648      4162.388        0.108      30.996    0.000    120859.129    137176.166 \n          STOREY28 TO 30    191972.634      5073.291        0.130      37.840    0.000    182028.693    201916.575 \n          STOREY31 TO 33    200784.072      6147.604        0.111      32.661    0.000    188734.416    212833.727 \n          STOREY34 TO 36    229694.831      6128.617        0.128      37.479    0.000    217682.391    241707.271 \n          STOREY37 TO 39    237916.273      7247.254        0.111      32.828    0.000    223711.240    252121.305 \n          STOREY40 TO 42    254342.952     10061.970        0.085      25.278    0.000    234620.916    274064.988 \n          STOREY43 TO 45    306318.117     13356.989        0.077      22.933    0.000    280137.656    332498.579 \n          STOREY46 TO 48    363573.767     22972.861        0.053      15.826    0.000    318545.648    408601.887 \n          STOREY49 TO 51    486732.032     39689.742        0.041      12.263    0.000    408937.869    564526.194 \n                AREA_SQM      3337.357        66.666        0.176      50.061    0.000      3206.688      3468.027 \n                PROX_BUS       560.743      8367.314        0.000       0.067    0.947    -15839.670     16961.157 \n                PROX_CBD    -16334.883       157.010       -0.528    -104.037    0.000    -16642.633    -16027.134 \n          PROX_CHILDCARE    -28447.588      5842.370       -0.017      -4.869    0.000    -39898.967    -16996.208 \n          PROX_ELDERCARE     -7618.521       766.757       -0.036      -9.936    0.000     -9121.409     -6115.634 \n        PROX_GOODPRIMARY     -1106.698       276.047       -0.017      -4.009    0.000     -1647.766      -565.631 \n             PROX_HAWKER    -22254.694       912.079       -0.090     -24.400    0.000    -24042.421    -20466.967 \n                PROX_MRT    -23445.396      1273.357       -0.068     -18.412    0.000    -25941.248    -20949.544 \n               PROX_PARK      2133.165      1051.654        0.007       2.028    0.043        71.864      4194.466 \n           PROX_SHOPPING    -24191.278      1462.249       -0.066     -16.544    0.000    -27057.370    -21325.187 \n        PROX_SUPERMARKET      8280.425      2994.998        0.010       2.765    0.006      2410.059     14150.791 \n      WITHIN_1KM_PRIMARY     -9076.876       341.628       -0.111     -26.569    0.000     -9746.487     -8407.265 \n         WITHIN_350M_BUS      1086.401       169.483        0.024       6.410    0.000       754.205      1418.598 \n   WITHIN_350M_CHILDCARE     -3914.981       256.907       -0.060     -15.239    0.000     -4418.533     -3411.428 \nWITHIN_350M_KINDERGARTEN      6513.794       468.411        0.049      13.906    0.000      5595.682      7431.906 \n              LEASE_MTHS       359.103         3.123        0.455     114.989    0.000       352.982       365.224 \n-------------------------------------------------------------------------------------------------------------------\n\n\n\n\n5.2.3 Preparing Publication Quality Table: gtsummary method\n\ntbl_regression(resale_mlr, intercept = TRUE)\n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Beta\n      95% CI1\n      p-value\n    \n  \n  \n    (Intercept)\n120,015\n103,828, 136,201\n<0.001\n    STOREY\n\n\n\n        01 TO 03\n—\n—\n\n        04 TO 06\n18,174\n15,400, 20,948\n<0.001\n        07 TO 09\n33,293\n30,483, 36,104\n<0.001\n        10 TO 12\n42,205\n39,333, 45,078\n<0.001\n        13 TO 15\n46,507\n43,112, 49,902\n<0.001\n        16 TO 18\n57,643\n53,256, 62,029\n<0.001\n        19 TO 21\n81,001\n74,671, 87,331\n<0.001\n        22 TO 24\n93,152\n85,841, 100,463\n<0.001\n        25 TO 27\n129,018\n120,859, 137,176\n<0.001\n        28 TO 30\n191,973\n182,029, 201,917\n<0.001\n        31 TO 33\n200,784\n188,734, 212,834\n<0.001\n        34 TO 36\n229,695\n217,682, 241,707\n<0.001\n        37 TO 39\n237,916\n223,711, 252,121\n<0.001\n        40 TO 42\n254,343\n234,621, 274,065\n<0.001\n        43 TO 45\n306,318\n280,138, 332,499\n<0.001\n        46 TO 48\n363,574\n318,546, 408,602\n<0.001\n        49 TO 51\n486,732\n408,938, 564,526\n<0.001\n    AREA_SQM\n3,337\n3,207, 3,468\n<0.001\n    PROX_BUS\n561\n-15,840, 16,961\n>0.9\n    PROX_CBD\n-16,335\n-16,643, -16,027\n<0.001\n    PROX_CHILDCARE\n-28,448\n-39,899, -16,996\n<0.001\n    PROX_ELDERCARE\n-7,619\n-9,121, -6,116\n<0.001\n    PROX_GOODPRIMARY\n-1,107\n-1,648, -566\n<0.001\n    PROX_HAWKER\n-22,255\n-24,042, -20,467\n<0.001\n    PROX_MRT\n-23,445\n-25,941, -20,950\n<0.001\n    PROX_PARK\n2,133\n72, 4,194\n0.043\n    PROX_SHOPPING\n-24,191\n-27,057, -21,325\n<0.001\n    PROX_SUPERMARKET\n8,280\n2,410, 14,151\n0.006\n    WITHIN_1KM_PRIMARY\n-9,077\n-9,746, -8,407\n<0.001\n    WITHIN_350M_BUS\n1,086\n754, 1,419\n<0.001\n    WITHIN_350M_CHILDCARE\n-3,915\n-4,419, -3,411\n<0.001\n    WITHIN_350M_KINDERGARTEN\n6,514\n5,596, 7,432\n<0.001\n    LEASE_MTHS\n359\n353, 365\n<0.001\n  \n  \n  \n    \n      1 CI = Confidence Interval\n    \n  \n\n\n\n\n\n\n5.2.4 Checking for Multicolinearity\n\nols_vif_tol(resale_mlr)\n\n                  Variables Tolerance      VIF\n1            STOREY04 TO 06 0.5453259 1.833766\n2            STOREY07 TO 09 0.5526886 1.809337\n3            STOREY10 TO 12 0.5661245 1.766396\n4            STOREY13 TO 15 0.6433468 1.554372\n5            STOREY16 TO 18 0.7594335 1.316771\n6            STOREY19 TO 21 0.8589673 1.164189\n7            STOREY22 TO 24 0.8859272 1.128761\n8            STOREY25 TO 27 0.9019700 1.108684\n9            STOREY28 TO 30 0.9220648 1.084522\n10           STOREY31 TO 33 0.9418010 1.061795\n11           STOREY34 TO 36 0.9406107 1.063139\n12           STOREY37 TO 39 0.9573717 1.044526\n13           STOREY40 TO 42 0.9708734 1.030000\n14           STOREY43 TO 45 0.9786577 1.021808\n15           STOREY46 TO 48 0.9918187 1.008249\n16           STOREY49 TO 51 0.9966094 1.003402\n17                 AREA_SQM 0.8811246 1.134913\n18                 PROX_BUS 0.8620575 1.160015\n19                 PROX_CBD 0.4244658 2.355902\n20           PROX_CHILDCARE 0.8721396 1.146605\n21           PROX_ELDERCARE 0.8365748 1.195350\n22         PROX_GOODPRIMARY 0.5928120 1.686875\n23              PROX_HAWKER 0.8029681 1.245380\n24                 PROX_MRT 0.8000420 1.249934\n25                PROX_PARK 0.8580656 1.165412\n26            PROX_SHOPPING 0.6879710 1.453550\n27         PROX_SUPERMARKET 0.8865753 1.127936\n28       WITHIN_1KM_PRIMARY 0.6199215 1.613107\n29          WITHIN_350M_BUS 0.7671970 1.303446\n30    WITHIN_350M_CHILDCARE 0.7114620 1.405556\n31 WITHIN_350M_KINDERGARTEN 0.8882120 1.125857\n32               LEASE_MTHS 0.6974027 1.433892\n\n\n\n\n\n\n\n\nNote\n\n\n\nSince the VIF of the independent variables is less than 10, we can conclude that there are no signs of multicollinearity among independent variables.\n\n\n\n\n5.2.5 Testing for Non-Linearity\n\nols_plot_resid_fit(resale_mlr)\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nWe can see that most of the data points are around the 0 line with a few outliers. But it is still within the range of tolerance and can conclude that the relationship between dependent and independent variables are linear.\n\n\n\n\n5.2.6 Testing for Normality Assumption\n\nols_plot_resid_hist(resale_mlr)\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nWe can see that this graph above shows that the residual of the multiple linear regression model is normally distributed.\n\n\n\n\n5.2.7 Testing for Spatial Autocorrelation\nExporting of data and save it as data frame\n\nmlr_output <- as.data.frame(resale_mlr$residuals)\n\nJoin newly created data frame with resale_main_sf\n\nresale_res_sf <- cbind(resale_main_sf,\n                       resale_mlr$residuals) %>%\n  rename(`MLR_RES` = resale_mlr.residuals)\n\nConverting from simple feature into SpatialPointDataFrame\n\nresale_sp <- as_Spatial(resale_res_sf)\nresale_sp\n\nclass       : SpatialPointsDataFrame \nfeatures    : 25502 \nextent      : 11519.79, 42645.18, 28217.39, 48741.06  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \nvariables   : 29\nnames       :   month,       town,          address, block,   street_name, flat_type,   STOREY, AREA_SQM,    flat_model, lease_commence_date, LEASE_MTHS,   PRICE, postal,          PROX_CBD,           PROX_BUS, ... \nmin values  : 2021-01, ANG MO KIO,   1 CHAI CHEE RD,     1,  ADMIRALTY DR,    4 ROOM, 01 TO 03,       70, Adjoined flat,                1967,        517,  250000, 052335, 0.999393538715878, 0.0158480216214286, ... \nmax values  : 2023-02,     YISHUN, 9B BOON TIONG RD,    9B, YUNG SHENG RD,    4 ROOM, 49 TO 51,      145,       Type S1,                2019,       1168, 1370000,    NIL,  19.6500691667807,  0.391470769487539, ... \n\n\n\n\n5.2.8 Visualising Distribution of Residuals\n\ntm_shape(mpsz)+\n  tmap_options(check.and.fix = TRUE) +\n  tm_polygons(alpha = 0.4) +\ntm_shape(resale_res_sf) +  \n  tm_dots(col = \"MLR_RES\",\n          alpha = 0.6,\n          style=\"quantile\") +\n  tm_view(set.zoom.limits = c(11,14))\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nFrom the visualisation, we can see that there are signs of spatial autocorrelation. We will use Moran’s I test to test it.\n\n\n\n\n5.2.9 Moren’s I Test\n\nnb <- dnearneigh(coordinates(resale_sp), 0, 1500, longlat = FALSE)\nsummary(nb)\n\nNeighbour list object:\nNumber of regions: 25502 \nNumber of nonzero links: 26961048 \nPercentage nonzero weights: 4.145609 \nAverage number of links: 1057.213 \nLink number distribution:\n\n   5   28   33   40   85   88   91   93  111  112  135  150  153  155  156  162 \n   6   29   25    9    3   84   11    5    1    3    3  129   19    3    1    1 \n 164  167  168  172  179  181  184  185  193  195  197  198  199  200  201  203 \n   1    2    5    3    5    5    1    1   10    3   10    6   20    2   48    5 \n 204  205  206  208  210  211  212  214  215  217  218  219  220  221  222  223 \n   5   91   15   21    1    3    1   13   13    8    5    2   29    8    3   14 \n 224  226  227  228  230  232  234  235  236  238  239  240  241  242  243  244 \n   6    5   41   15    2   18   19    1   17    6    6    6   17   18    8    4 \n 245  246  247  248  249  250  251  252  254  256  257  258  259  260  262  263 \n  39   10   26   35    7    2    9   14   26    7   25    3    2    2   28   24 \n 264  265  266  267  268  269  270  271  272  273  274  275  276  277  278  279 \n  36   13   16   10   17   22    2   12   21   17    9    5   22   14    9   24 \n 280  281  282  283  284  285  286  287  289  290  291  292  293  294  295  296 \n  17    6   36   13   50    3   31   21   16   10    9   33   11   11    8   12 \n 297  298  299  300  301  302  306  307  308  310  311  312  313  314  315  316 \n  40   57   29    6   26   11   14    5   18    4    9    9    8    7   32   10 \n 317  318  319  320  321  322  323  324  325  326  327  328  329  330  331  332 \n  46   14    6   15   13    9   15   19   13    7   12   50    5    6   32    7 \n 333  334  335  336  337  338  339  340  341  342  343  344  345  346  347  348 \n   8   43    7   15    7   14    6   12   11   20   15    6    5   25   13    9 \n 349  350  351  352  353  354  355  356  357  358  359  360  361  362  363  364 \n  13   14   16    3   19    8    6   16    6   14    7   17    7   27    9    2 \n 365  366  367  368  369  370  371  372  373  374  375  376  377  378  379  380 \n   2   18   31   13    9   39   23   13    8   23   26   10   16    5    6   16 \n 382  383  384  385  386  387  388  389  390  391  392  393  394  395  396  397 \n   8    9    2   13   14   11   18   32   32    7   18   12    8   17   33    4 \n 398  399  400  401  402  403  404  405  406  407  408  409  410  411  412  413 \n  16   12    4   39   19    6   25   11   19   33   19   58   16   27    4    7 \n 414  415  416  417  418  419  420  421  422  423  424  425  426  427  428  429 \n   4    5   30   19   34   13   10    9   29   16   14   10   13   23    6   30 \n 430  431  432  433  434  435  436  437  438  439  440  441  442  443  444  445 \n  18   18   20    9   13   15   18   10   31    8    9    6   16   25   17   29 \n 446  447  448  449  450  451  452  453  454  455  456  457  458  459  460  461 \n  20   17   28   16    7   28    9   43   20   40   27   20   22    7   45   24 \n 462  463  464  465  466  467  468  469  470  471  472  473  474  475  476  477 \n  27   20   51   13   19    3    8   16   10   16   11   17   52   20   65   14 \n 478  479  480  481  482  483  484  485  486  487  488  489  490  491  492  493 \n  14   17   20   21   70   31  107   22   24   15   30   14   11   16   30    9 \n 494  495  496  497  498  499  500  501  502  503  504  505  506  507  508  509 \n  27   12    4   20   24   18   18   23   19   22   10   15   16    3    9   15 \n 510  511  512  513  514  515  516  517  518  519  520  521  522  523  524  525 \n   3   10   15   29    8    6   26   12    6    7   54   21   15    7   16   16 \n 526  527  528  529  530  531  532  533  534  535  536  537  538  539  540  541 \n  10    9   23   39   15   29   47    8   14   20   16   22    9   19   35   48 \n 542  543  544  545  546  547  548  549  550  551  552  553  554  555  556  557 \n  45   27    6   21   14   32   24   15   15    8   80   13    8   40   13    8 \n 558  559  560  561  562  563  564  565  566  567  568  569  570  571  572  573 \n  32   27   24   18   16    5   25   54   11   27    8   48    6   34   18   10 \n 574  575  576  577  578  579  580  581  582  583  584  585  586  587  588  589 \n  36   14   31   10   16   40   22   14   48   39   67   20   24   24   25   18 \n 590  591  592  593  594  595  596  597  598  599  600  601  602  603  604  605 \n  29   22   22   18   23    5   32   13   18   22   27   21    7   38   12   22 \n 606  607  608  609  610  611  612  613  614  615  616  617  618  619  620  621 \n  22   23   49   35   27   10   13   22   41    7   20   18   12   18   31   80 \n 622  623  624  625  626  627  628  629  630  631  632  633  634  635  636  637 \n  53   27   67    7   47   18   22    1   22   27   15    8   25   47   47   13 \n 638  639  640  641  642  643  644  645  646  647  648  649  650  651  652  653 \n  36   18   25   11   14   22   40   25   35   35   66   88    2   73   19   14 \n 654  655  656  657  658  659  660  661  662  663  664  665  666  667  668  669 \n   6   16   30   22   20   22    5   17   13   43   16   10   17   25   20   33 \n 670  671  672  673  674  675  676  677  678  679  680  681  682  683  684  685 \n  62   19    9   30   31   13   17    8   19   28   17   10   43   17   13   15 \n 686  687  688  689  690  691  692  693  694  695  696  697  698  699  700  701 \n   7    8   24   18   19   25   40   59   42   30   13   31   25    7   18   20 \n 702  703  704  705  706  707  708  709  710  711  712  713  714  715  716  717 \n  56   34   39   32   64   31   19   23   33   19   35   42   12   15   21    7 \n 718  719  720  721  722  723  724  725  726  727  728  729  730  731  732  733 \n  11   11    5   16   11    9    7   29   32   35    8   30    4   10   18    1 \n 734  735  736  737  738  739  740  741  742  743  744  745  746  747  748  749 \n   5   17   17    8   22   39   15    5   12   28   44    8   21   43    7   17 \n 750  751  752  753  754  755  756  757  758  759  760  761  762  763  764  765 \n   5   24   46   42   10   47    6   19   41   10    8    7   14   21   27    7 \n 766  767  768  769  770  771  772  773  774  775  776  777  779  780  781  782 \n  14    4    6   33    6    4   27   15   23   26   23   22   34    6   10    5 \n 783  784  785  786  787  788  789  790  791  792  793  794  795  796  797  798 \n   6    7   22   41   15   27   34   15    2    2    9   20   41   20    7   20 \n 799  800  801  802  803  804  805  806  807  808  809  810  812  813  814  815 \n  10   12    6   43    7   17   12   11    9   13   22    4    8   14   11   16 \n 816  817  818  820  821  822  823  824  825  826  827  829  830  831  832  833 \n   8   24    5    2    3    8    4    2    3   35   18   14   12    8    5    1 \n 834  835  836  837  839  840  841  842  843  844  845  846  847  848  849  850 \n  24    8   49    6   20    2   15    9   16   13    3   12   17    4   12    8 \n 851  852  854  855  857  858  859  860  861  863  864  865  866  868  869  870 \n   5   21    8    7    4    2    8   10   14   22    9    9   15   21    7   13 \n 872  873  874  875  876  877  878  879  880  881  882  883  884  885  886  887 \n   6   12    1   10    4   24   14   31   51   21    8   51   15    1    3   12 \n 888  889  890  891  892  893  894  895  896  898  899  900  901  902  903  904 \n  14    4   21   33   14    6   32    4   22    7   20   29    7    7   33   12 \n 905  907  908  909  910  911  912  913  914  915  916  917  918  919  920  921 \n  13   10    3    3   15   14    8   10    7   28    2    6   14    5   29   29 \n 922  923  924  925  926  927  928  929  930  931  932  933  934  935  936  937 \n  16   29    2    3   22   15    3    3    7   24    9   19   26   13   12   17 \n 938  939  940  941  942  943  944  945  946  947  948  949  950  951  952  953 \n  12    6   37   39   10   10   10   13   21   15   21   10   23   27    6   21 \n 955  956  958  959  960  961  962  963  964  965  966  967  968  969  970  971 \n   5   16   28   59   15    5   23   26    7   18    4    2    8    1   24   23 \n 972  973  974  975  976  977  978  979  980  981  982  983  984  985  986  987 \n   8   21   21    8   18   13   28   10   14    8    9    9    2   18    2    7 \n 988  989  990  991  992  993  994  995  996  997  999 1000 1001 1002 1004 1005 \n  10   15   11   12    2   11   79    8    6    6    9    1   36    7   15    6 \n1006 1007 1008 1009 1010 1011 1012 1013 1014 1015 1016 1017 1018 1019 1020 1021 \n  13    3   15    6   33   16   14   17   16    9   15   17   16    1   10    1 \n1022 1023 1024 1025 1026 1027 1028 1030 1031 1032 1033 1034 1035 1036 1037 1038 \n  19   54   17    7   13    4   23   16   25   18   15   26    1   18   19   19 \n1039 1040 1041 1042 1043 1044 1045 1048 1051 1052 1053 1054 1055 1056 1057 1058 \n  23    7    4    4   15    9   14   10   14   19   14    5   34   11    5   15 \n1059 1060 1061 1062 1063 1064 1065 1066 1067 1068 1069 1070 1071 1072 1073 1074 \n  18   10   12    8    9    6    7   24   10   19   16    6   10    8   11    3 \n1075 1076 1077 1078 1079 1080 1081 1082 1083 1084 1085 1086 1087 1088 1089 1090 \n  21    8   20    9   12   17    5   12   27   13   12   15   12   19   18    7 \n1091 1092 1094 1095 1096 1097 1098 1099 1100 1101 1102 1104 1105 1106 1107 1108 \n  45    6   11   18   38    2   10   10   13    7    8   12   17    6   16    9 \n1110 1111 1112 1113 1114 1115 1116 1117 1118 1119 1120 1121 1123 1124 1125 1126 \n   2    8   26   21   19   14   12   33    2   32    9   26    1   15    8   13 \n1127 1128 1129 1130 1131 1132 1133 1134 1135 1136 1137 1138 1139 1140 1141 1143 \n  27   33   19   10   16   29   16   19   26   19   35   22    2    1   12    9 \n1144 1145 1146 1147 1148 1149 1150 1151 1152 1153 1154 1155 1156 1157 1158 1159 \n   5    2   11   28   15   12    9   18    6   34    6   13   21   13    7    5 \n1160 1161 1162 1163 1164 1165 1166 1167 1168 1169 1170 1171 1172 1173 1174 1175 \n   7   14    9   23   17   21    9   19   11   19   24    1   25   37    7   14 \n1176 1177 1178 1179 1180 1181 1182 1183 1184 1185 1186 1187 1188 1189 1190 1191 \n   7   10   11    8    8   11    1   24    9    7   30   20   11    1    3   15 \n1192 1193 1194 1195 1196 1197 1198 1199 1200 1201 1202 1203 1204 1205 1206 1207 \n  29   28    2   23   10    7   15   11    8    4   14    5    3   21    3    7 \n1208 1209 1210 1211 1212 1213 1214 1215 1216 1217 1218 1219 1221 1222 1223 1224 \n  14    5    3    7   10    2   13    7    6   30   18   14   28   24   10    7 \n1225 1226 1227 1228 1229 1230 1231 1232 1233 1234 1235 1236 1238 1239 1240 1241 \n  19    2   34    3   14    9   12   11   10   24    2   24    3   15   20    6 \n1242 1243 1244 1245 1246 1247 1248 1249 1251 1252 1253 1254 1255 1256 1257 1258 \n  15   14    7    9    2    8   10    9   16    5   16   22   15   30   25   19 \n1259 1260 1261 1262 1263 1264 1265 1266 1267 1269 1270 1271 1273 1274 1275 1276 \n   3   17   16   29    6   12   17    1   25   35   12    1    8   19    2   10 \n1277 1279 1280 1281 1282 1283 1284 1285 1286 1287 1288 1289 1290 1291 1292 1293 \n  38    5    4   37    3   16    2   15   16   10   25    4   20   11   11    1 \n1295 1296 1297 1298 1299 1300 1302 1303 1304 1306 1307 1308 1309 1310 1311 1313 \n  17   56    5   16    5    9    4   14   22    3   29   22    7   11   12    8 \n1314 1315 1316 1317 1318 1319 1320 1321 1323 1324 1325 1326 1327 1328 1329 1330 \n  77   24    3   31   10   12   27    8   29   16    2   12    8   16   22    8 \n1332 1333 1334 1336 1337 1338 1339 1340 1342 1343 1344 1345 1346 1347 1348 1349 \n   9    1    6   28    7   40    1    6   14    7   31    9    2   56   30   24 \n1350 1351 1352 1353 1354 1355 1356 1358 1359 1360 1361 1362 1363 1364 1365 1368 \n   7    5   15   10    1    5   18    7   19   26   12   48   38   26   13   10 \n1369 1370 1371 1372 1373 1374 1375 1376 1377 1378 1379 1381 1382 1383 1385 1386 \n  13    9   35    4    4    9   15    9   13   14   11   13    1   16   20   13 \n1387 1388 1389 1391 1392 1395 1396 1397 1398 1400 1401 1402 1403 1404 1405 1406 \n   9    5    4   17    9   19   20    1    4   16    4    1    1   21   22   15 \n1407 1408 1409 1410 1411 1412 1413 1416 1417 1418 1421 1424 1425 1426 1427 1428 \n  17   14    3   14    1    3   10    7    9    3    5    3    2   13    8   21 \n1429 1430 1431 1433 1434 1435 1436 1437 1438 1439 1441 1443 1444 1445 1446 1447 \n  13   23    4    6    4    2   11    2    3    1    5    1    2    2   12    4 \n1448 1450 1451 1452 1453 1454 1455 1456 1458 1459 1460 1462 1463 1465 1466 1467 \n   8    4    2    4   11   13    3    2    6    5    2    1   10   17   15   24 \n1468 1469 1470 1471 1473 1474 1475 1477 1478 1479 1480 1481 1482 1483 1484 1485 \n   3    5    2    7    1   10   14    3    6    2    6    8    1    2    2    2 \n1487 1489 1490 1492 1493 1494 1495 1496 1497 1499 1501 1502 1504 1505 1507 1510 \n   4   18    1    2    7    1    4    1    9   14   12    1    7    7   23    4 \n1513 1514 1515 1516 1517 1518 1523 1524 1525 1526 1528 1531 1532 1535 1536 1538 \n  11   13    8    5   14    2    1    3    1   13    4    9   18    1    3    1 \n1539 1540 1543 1544 1545 1548 1549 1551 1552 1554 1555 1556 1558 1559 1560 1565 \n   3   19    2    3    9    7    6   16    7   15   24   28    3    1   14    3 \n1566 1567 1568 1571 1576 1580 1582 1583 1585 1586 1587 1589 1590 1591 1593 1595 \n  10    6    3    7    5    5   13    4    9    1    5    3    5   12    9    2 \n1597 1599 1600 1602 1603 1604 1605 1606 1607 1608 1609 1610 1612 1615 1617 1618 \n   6    3    3    6    3   13    4   11    3    3   11   14   21   13   15    2 \n1619 1620 1624 1626 1630 1632 1634 1636 1637 1643 1647 1648 1649 1650 1652 1656 \n   2   20    8   11   16    3   18   20   20    1   13    4   10    8    5    8 \n1658 1659 1660 1662 1663 1667 1673 1674 1675 1677 1681 1684 1686 1687 1690 1697 \n   1   12    1    2    8   18    4    1    1    5    4   10    1    2    8    4 \n1702 1703 1705 1706 1707 1710 1715 1717 1718 1720 1721 1722 1723 1725 1727 1728 \n  13    6   27    8    1   11    4    6    9    8    1    2   10    2    2    5 \n1729 1731 1732 1734 1735 1737 1743 1744 1745 1746 1747 1748 1751 1754 1757 1758 \n   4    2    1    3    1    4    4    6   13    1    2    3    7    8    3   10 \n1759 1761 1762 1763 1764 1765 1766 1767 1768 1769 1771 1772 1773 1778 1779 1781 \n   9    5    1   11    8   21    2    3    6    3    9    2    6   24    1   11 \n1786 1787 1788 1789 1790 1791 1792 1793 1794 1795 1796 1799 1800 1801 1803 1804 \n   3    5    6    7    4    4    1    3   16    1   10    4    8    7    2    3 \n1805 1809 1811 1812 1817 1819 1820 1824 1826 1827 1829 1830 1831 1834 1836 1838 \n   5    2   16    3    1    8   11    4    1    1   10   18    1   15    9    3 \n1839 1840 1841 1842 1843 1845 1846 1847 1848 1849 1850 1851 1855 1856 1857 1858 \n   9    5    3    6    9    6   13    8   15    1    5   11    6    9    2   11 \n1859 1860 1862 1863 1864 1865 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 \n   2    8   28   17    2    5    3    6    5    5    4    3    3    3    4    5 \n1878 1881 1887 1889 1890 1892 1894 1896 1897 1899 1900 1905 1907 1908 1911 1912 \n  23   10    4    1   18    1    4    7   22    3    4   19    1   10    7    6 \n1913 1914 1915 1916 1917 1919 1922 1923 1924 1926 1929 1930 1932 1934 1935 1936 \n  12    7   14    1    2   10   13    7    7    2    2    9    2   10   66    9 \n1940 1941 1945 1953 1955 1958 1959 1960 1962 1963 1965 1972 1973 1976 1979 1980 \n   6   12   11    4   18    4    5    5    7   12    6   11   18    7    5    6 \n1982 1984 1986 1988 1989 1994 1995 2002 2003 2006 2007 2017 2025 2026 2029 2031 \n  13    7    6    6    2   11    2    3   37   11    8   17    2    6   20   10 \n2032 2033 2034 2035 2037 2039 2040 2042 2044 2045 2046 2047 2048 2049 2051 2054 \n   3   11    5    6    4   14   26    1    2    4    3   17   12    1    7    1 \n2055 2057 2063 2065 2066 2067 2068 2070 2071 2074 2075 2076 2077 2078 2080 2083 \n   2   14    5   14    4    6   38   11    9    4    4   13    1   20    4   23 \n2084 2085 2088 2089 2091 2092 2093 2094 2098 2100 2102 2103 2106 2108 2109 2110 \n  11   34    2   13    6   17    8   10    4    7    6   19    3    1    7   18 \n2111 2112 2115 2116 2118 2120 2121 2122 2123 2125 2126 2128 2131 2132 2133 2135 \n   1    9   11   44    8   14   28   27    3   17   11   21   12    3   11    5 \n2137 2139 2140 2141 2145 2146 2147 2148 2149 2150 2152 2153 2155 2157 2158 2160 \n  19   14    3   19   17    1    1   21    3    3    8    8    7   36    4   15 \n2162 2163 2164 2165 2167 2171 2172 2175 2176 2179 2180 2181 2186 2189 2191 2193 \n  17    4    8    4   14    9   12   18    6    7    2    3   14    3    6   10 \n2194 2195 2197 2198 2199 2203 2205 2206 2209 2212 2213 2215 2217 2220 2222 2224 \n  48   18    6    1    3    5    6    8   28   11    8    5   17    6    2    3 \n2227 2228 2229 2230 2234 2238 2242 2247 2249 2251 2252 2253 2254 2256 2258 2262 \n   7    4   12   11    3    6    3    2   21    3    1   13    2   28    5    2 \n2264 2266 2267 2271 2272 2273 2275 2276 2277 2279 2283 2287 2292 2298 2299 2301 \n   2    9    1    3    3    6    2    4   16    2    6   16    2    1   50    2 \n2302 2303 2305 2306 2307 2310 2315 2317 2318 2324 2328 2330 2332 2335 2337 2338 \n   8    5    6    6    4    3    3    1    2    6    1    3    3    3   11    2 \n2346 2349 2350 2351 2352 2354 2355 2362 2363 2366 2369 2370 2373 2374 2379 2381 \n  10    4    5    4    7   11   10    2   10   22    3    1    2    7    2    2 \n2385 2389 2391 2393 2395 2396 2406 2416 2417 2421 2422 2423 2424 2426 2427 2429 \n   1   20    6    8   11    7    3    1   11    2    1   11    6    5    2    1 \n2430 2434 2436 2438 2440 2444 2446 2447 2455 2456 2458 2460 2462 2463 2468 2473 \n   3   10    3   16    5    8    3    2    6    5   14    4   28    2    4    8 \n2474 2483 2491 2495 2496 2501 2510 2515 2521 2526 2531 2534 2538 2542 2547 2548 \n  13   14    8    3    4   20    7    5   15    3    1    1    9   10    2    4 \n2552 2561 2562 2567 2569 2576 2585 2587 2593 2597 2598 2601 2606 2609 2611 2612 \n   8    2    1   15    7    7    1    9    1    9   20    7    5   11   12    6 \n2617 2632 2647 2651 2653 2654 2655 2659 2665 2672 2674 2675 2678 2682 2688 2689 \n  26    5    2    3    4    1    7   11    8   18    2    7    2   15   15    3 \n2694 2700 2703 2710 2717 2722 2727 2730 2733 2734 2739 2744 2750 2751 2754 2755 \n  16   20    4   13    6   25    3    3    2   20    2    8   14    4    6    9 \n2762 2764 2765 2774 2782 2783 2788 2789 2790 2791 2792 2793 2800 2801 2803 2804 \n   4    1   14   10   15    5    8   14    9   13   13    2    4    8   10    3 \n2805 2811 2822 2827 2829 2830 2833 2834 2840 2841 2842 2845 2847 2852 2856 2859 \n  11    4    9   10   10    4    3    1    4   10    3    1    4   18   10    5 \n2864 2866 2870 2872 2877 2881 2886 2898 2900 2914 2918 2925 2926 2927 2930 2932 \n   5    2   13    2    6   19    6    7    7    1    6   12    3   13    2    5 \n2936 2942 2943 2950 2953 2955 2959 2967 2968 2974 2975 2976 2982 2986 2987 2994 \n   5   24    1    4    2    8    9    5    5    5    6    2    3   17    4   10 \n2996 3002 3007 3008 3012 3017 3026 3031 3037 3040 3054 3058 3067 3068 3069 3071 \n   2   18   15    8    2    3    7    4    2    2    4    3    4    5    5    3 \n3074 3076 3086 3095 3105 3111 3115 3135 3138 3139 3142 3144 3146 3155 3156 3168 \n   3    2    2    5    3    9    1    3    7    2    8    6    4    2    2    6 \n3175 3176 3178 3182 3185 3187 3189 3194 3196 3203 3212 3221 3229 3241 3244 3245 \n   3    2    1    8    2    3    9    4    3    3    1    4   10    4   12    3 \n3252 3255 3264 3265 3267 3278 3285 3291 3307 3310 3313 3317 3322 3328 3331 3333 \n   3   10   10   13    4    3    6    2    4    7    2    6    1    2    1    2 \n3338 3343 3357 3405 3424 3441 3452 3473 3486 \n   6    2    1    1    6    4    2    1    1 \n6 least connected regions:\n5233 5270 5273 14652 22145 22146 with 5 links\n1 most connected region:\n6060 with 3486 links\n\n\nConverting Output neighbour list into Spatial Weights\n\nnb_lw <- nb2listw(nb, style = 'W', zero.policy = TRUE)\nsummary(nb_lw)\n\nCharacteristics of weights list object:\nNeighbour list object:\nNumber of regions: 25502 \nNumber of nonzero links: 26961048 \nPercentage nonzero weights: 4.145609 \nAverage number of links: 1057.213 \nLink number distribution:\n\n   5   28   33   40   85   88   91   93  111  112  135  150  153  155  156  162 \n   6   29   25    9    3   84   11    5    1    3    3  129   19    3    1    1 \n 164  167  168  172  179  181  184  185  193  195  197  198  199  200  201  203 \n   1    2    5    3    5    5    1    1   10    3   10    6   20    2   48    5 \n 204  205  206  208  210  211  212  214  215  217  218  219  220  221  222  223 \n   5   91   15   21    1    3    1   13   13    8    5    2   29    8    3   14 \n 224  226  227  228  230  232  234  235  236  238  239  240  241  242  243  244 \n   6    5   41   15    2   18   19    1   17    6    6    6   17   18    8    4 \n 245  246  247  248  249  250  251  252  254  256  257  258  259  260  262  263 \n  39   10   26   35    7    2    9   14   26    7   25    3    2    2   28   24 \n 264  265  266  267  268  269  270  271  272  273  274  275  276  277  278  279 \n  36   13   16   10   17   22    2   12   21   17    9    5   22   14    9   24 \n 280  281  282  283  284  285  286  287  289  290  291  292  293  294  295  296 \n  17    6   36   13   50    3   31   21   16   10    9   33   11   11    8   12 \n 297  298  299  300  301  302  306  307  308  310  311  312  313  314  315  316 \n  40   57   29    6   26   11   14    5   18    4    9    9    8    7   32   10 \n 317  318  319  320  321  322  323  324  325  326  327  328  329  330  331  332 \n  46   14    6   15   13    9   15   19   13    7   12   50    5    6   32    7 \n 333  334  335  336  337  338  339  340  341  342  343  344  345  346  347  348 \n   8   43    7   15    7   14    6   12   11   20   15    6    5   25   13    9 \n 349  350  351  352  353  354  355  356  357  358  359  360  361  362  363  364 \n  13   14   16    3   19    8    6   16    6   14    7   17    7   27    9    2 \n 365  366  367  368  369  370  371  372  373  374  375  376  377  378  379  380 \n   2   18   31   13    9   39   23   13    8   23   26   10   16    5    6   16 \n 382  383  384  385  386  387  388  389  390  391  392  393  394  395  396  397 \n   8    9    2   13   14   11   18   32   32    7   18   12    8   17   33    4 \n 398  399  400  401  402  403  404  405  406  407  408  409  410  411  412  413 \n  16   12    4   39   19    6   25   11   19   33   19   58   16   27    4    7 \n 414  415  416  417  418  419  420  421  422  423  424  425  426  427  428  429 \n   4    5   30   19   34   13   10    9   29   16   14   10   13   23    6   30 \n 430  431  432  433  434  435  436  437  438  439  440  441  442  443  444  445 \n  18   18   20    9   13   15   18   10   31    8    9    6   16   25   17   29 \n 446  447  448  449  450  451  452  453  454  455  456  457  458  459  460  461 \n  20   17   28   16    7   28    9   43   20   40   27   20   22    7   45   24 \n 462  463  464  465  466  467  468  469  470  471  472  473  474  475  476  477 \n  27   20   51   13   19    3    8   16   10   16   11   17   52   20   65   14 \n 478  479  480  481  482  483  484  485  486  487  488  489  490  491  492  493 \n  14   17   20   21   70   31  107   22   24   15   30   14   11   16   30    9 \n 494  495  496  497  498  499  500  501  502  503  504  505  506  507  508  509 \n  27   12    4   20   24   18   18   23   19   22   10   15   16    3    9   15 \n 510  511  512  513  514  515  516  517  518  519  520  521  522  523  524  525 \n   3   10   15   29    8    6   26   12    6    7   54   21   15    7   16   16 \n 526  527  528  529  530  531  532  533  534  535  536  537  538  539  540  541 \n  10    9   23   39   15   29   47    8   14   20   16   22    9   19   35   48 \n 542  543  544  545  546  547  548  549  550  551  552  553  554  555  556  557 \n  45   27    6   21   14   32   24   15   15    8   80   13    8   40   13    8 \n 558  559  560  561  562  563  564  565  566  567  568  569  570  571  572  573 \n  32   27   24   18   16    5   25   54   11   27    8   48    6   34   18   10 \n 574  575  576  577  578  579  580  581  582  583  584  585  586  587  588  589 \n  36   14   31   10   16   40   22   14   48   39   67   20   24   24   25   18 \n 590  591  592  593  594  595  596  597  598  599  600  601  602  603  604  605 \n  29   22   22   18   23    5   32   13   18   22   27   21    7   38   12   22 \n 606  607  608  609  610  611  612  613  614  615  616  617  618  619  620  621 \n  22   23   49   35   27   10   13   22   41    7   20   18   12   18   31   80 \n 622  623  624  625  626  627  628  629  630  631  632  633  634  635  636  637 \n  53   27   67    7   47   18   22    1   22   27   15    8   25   47   47   13 \n 638  639  640  641  642  643  644  645  646  647  648  649  650  651  652  653 \n  36   18   25   11   14   22   40   25   35   35   66   88    2   73   19   14 \n 654  655  656  657  658  659  660  661  662  663  664  665  666  667  668  669 \n   6   16   30   22   20   22    5   17   13   43   16   10   17   25   20   33 \n 670  671  672  673  674  675  676  677  678  679  680  681  682  683  684  685 \n  62   19    9   30   31   13   17    8   19   28   17   10   43   17   13   15 \n 686  687  688  689  690  691  692  693  694  695  696  697  698  699  700  701 \n   7    8   24   18   19   25   40   59   42   30   13   31   25    7   18   20 \n 702  703  704  705  706  707  708  709  710  711  712  713  714  715  716  717 \n  56   34   39   32   64   31   19   23   33   19   35   42   12   15   21    7 \n 718  719  720  721  722  723  724  725  726  727  728  729  730  731  732  733 \n  11   11    5   16   11    9    7   29   32   35    8   30    4   10   18    1 \n 734  735  736  737  738  739  740  741  742  743  744  745  746  747  748  749 \n   5   17   17    8   22   39   15    5   12   28   44    8   21   43    7   17 \n 750  751  752  753  754  755  756  757  758  759  760  761  762  763  764  765 \n   5   24   46   42   10   47    6   19   41   10    8    7   14   21   27    7 \n 766  767  768  769  770  771  772  773  774  775  776  777  779  780  781  782 \n  14    4    6   33    6    4   27   15   23   26   23   22   34    6   10    5 \n 783  784  785  786  787  788  789  790  791  792  793  794  795  796  797  798 \n   6    7   22   41   15   27   34   15    2    2    9   20   41   20    7   20 \n 799  800  801  802  803  804  805  806  807  808  809  810  812  813  814  815 \n  10   12    6   43    7   17   12   11    9   13   22    4    8   14   11   16 \n 816  817  818  820  821  822  823  824  825  826  827  829  830  831  832  833 \n   8   24    5    2    3    8    4    2    3   35   18   14   12    8    5    1 \n 834  835  836  837  839  840  841  842  843  844  845  846  847  848  849  850 \n  24    8   49    6   20    2   15    9   16   13    3   12   17    4   12    8 \n 851  852  854  855  857  858  859  860  861  863  864  865  866  868  869  870 \n   5   21    8    7    4    2    8   10   14   22    9    9   15   21    7   13 \n 872  873  874  875  876  877  878  879  880  881  882  883  884  885  886  887 \n   6   12    1   10    4   24   14   31   51   21    8   51   15    1    3   12 \n 888  889  890  891  892  893  894  895  896  898  899  900  901  902  903  904 \n  14    4   21   33   14    6   32    4   22    7   20   29    7    7   33   12 \n 905  907  908  909  910  911  912  913  914  915  916  917  918  919  920  921 \n  13   10    3    3   15   14    8   10    7   28    2    6   14    5   29   29 \n 922  923  924  925  926  927  928  929  930  931  932  933  934  935  936  937 \n  16   29    2    3   22   15    3    3    7   24    9   19   26   13   12   17 \n 938  939  940  941  942  943  944  945  946  947  948  949  950  951  952  953 \n  12    6   37   39   10   10   10   13   21   15   21   10   23   27    6   21 \n 955  956  958  959  960  961  962  963  964  965  966  967  968  969  970  971 \n   5   16   28   59   15    5   23   26    7   18    4    2    8    1   24   23 \n 972  973  974  975  976  977  978  979  980  981  982  983  984  985  986  987 \n   8   21   21    8   18   13   28   10   14    8    9    9    2   18    2    7 \n 988  989  990  991  992  993  994  995  996  997  999 1000 1001 1002 1004 1005 \n  10   15   11   12    2   11   79    8    6    6    9    1   36    7   15    6 \n1006 1007 1008 1009 1010 1011 1012 1013 1014 1015 1016 1017 1018 1019 1020 1021 \n  13    3   15    6   33   16   14   17   16    9   15   17   16    1   10    1 \n1022 1023 1024 1025 1026 1027 1028 1030 1031 1032 1033 1034 1035 1036 1037 1038 \n  19   54   17    7   13    4   23   16   25   18   15   26    1   18   19   19 \n1039 1040 1041 1042 1043 1044 1045 1048 1051 1052 1053 1054 1055 1056 1057 1058 \n  23    7    4    4   15    9   14   10   14   19   14    5   34   11    5   15 \n1059 1060 1061 1062 1063 1064 1065 1066 1067 1068 1069 1070 1071 1072 1073 1074 \n  18   10   12    8    9    6    7   24   10   19   16    6   10    8   11    3 \n1075 1076 1077 1078 1079 1080 1081 1082 1083 1084 1085 1086 1087 1088 1089 1090 \n  21    8   20    9   12   17    5   12   27   13   12   15   12   19   18    7 \n1091 1092 1094 1095 1096 1097 1098 1099 1100 1101 1102 1104 1105 1106 1107 1108 \n  45    6   11   18   38    2   10   10   13    7    8   12   17    6   16    9 \n1110 1111 1112 1113 1114 1115 1116 1117 1118 1119 1120 1121 1123 1124 1125 1126 \n   2    8   26   21   19   14   12   33    2   32    9   26    1   15    8   13 \n1127 1128 1129 1130 1131 1132 1133 1134 1135 1136 1137 1138 1139 1140 1141 1143 \n  27   33   19   10   16   29   16   19   26   19   35   22    2    1   12    9 \n1144 1145 1146 1147 1148 1149 1150 1151 1152 1153 1154 1155 1156 1157 1158 1159 \n   5    2   11   28   15   12    9   18    6   34    6   13   21   13    7    5 \n1160 1161 1162 1163 1164 1165 1166 1167 1168 1169 1170 1171 1172 1173 1174 1175 \n   7   14    9   23   17   21    9   19   11   19   24    1   25   37    7   14 \n1176 1177 1178 1179 1180 1181 1182 1183 1184 1185 1186 1187 1188 1189 1190 1191 \n   7   10   11    8    8   11    1   24    9    7   30   20   11    1    3   15 \n1192 1193 1194 1195 1196 1197 1198 1199 1200 1201 1202 1203 1204 1205 1206 1207 \n  29   28    2   23   10    7   15   11    8    4   14    5    3   21    3    7 \n1208 1209 1210 1211 1212 1213 1214 1215 1216 1217 1218 1219 1221 1222 1223 1224 \n  14    5    3    7   10    2   13    7    6   30   18   14   28   24   10    7 \n1225 1226 1227 1228 1229 1230 1231 1232 1233 1234 1235 1236 1238 1239 1240 1241 \n  19    2   34    3   14    9   12   11   10   24    2   24    3   15   20    6 \n1242 1243 1244 1245 1246 1247 1248 1249 1251 1252 1253 1254 1255 1256 1257 1258 \n  15   14    7    9    2    8   10    9   16    5   16   22   15   30   25   19 \n1259 1260 1261 1262 1263 1264 1265 1266 1267 1269 1270 1271 1273 1274 1275 1276 \n   3   17   16   29    6   12   17    1   25   35   12    1    8   19    2   10 \n1277 1279 1280 1281 1282 1283 1284 1285 1286 1287 1288 1289 1290 1291 1292 1293 \n  38    5    4   37    3   16    2   15   16   10   25    4   20   11   11    1 \n1295 1296 1297 1298 1299 1300 1302 1303 1304 1306 1307 1308 1309 1310 1311 1313 \n  17   56    5   16    5    9    4   14   22    3   29   22    7   11   12    8 \n1314 1315 1316 1317 1318 1319 1320 1321 1323 1324 1325 1326 1327 1328 1329 1330 \n  77   24    3   31   10   12   27    8   29   16    2   12    8   16   22    8 \n1332 1333 1334 1336 1337 1338 1339 1340 1342 1343 1344 1345 1346 1347 1348 1349 \n   9    1    6   28    7   40    1    6   14    7   31    9    2   56   30   24 \n1350 1351 1352 1353 1354 1355 1356 1358 1359 1360 1361 1362 1363 1364 1365 1368 \n   7    5   15   10    1    5   18    7   19   26   12   48   38   26   13   10 \n1369 1370 1371 1372 1373 1374 1375 1376 1377 1378 1379 1381 1382 1383 1385 1386 \n  13    9   35    4    4    9   15    9   13   14   11   13    1   16   20   13 \n1387 1388 1389 1391 1392 1395 1396 1397 1398 1400 1401 1402 1403 1404 1405 1406 \n   9    5    4   17    9   19   20    1    4   16    4    1    1   21   22   15 \n1407 1408 1409 1410 1411 1412 1413 1416 1417 1418 1421 1424 1425 1426 1427 1428 \n  17   14    3   14    1    3   10    7    9    3    5    3    2   13    8   21 \n1429 1430 1431 1433 1434 1435 1436 1437 1438 1439 1441 1443 1444 1445 1446 1447 \n  13   23    4    6    4    2   11    2    3    1    5    1    2    2   12    4 \n1448 1450 1451 1452 1453 1454 1455 1456 1458 1459 1460 1462 1463 1465 1466 1467 \n   8    4    2    4   11   13    3    2    6    5    2    1   10   17   15   24 \n1468 1469 1470 1471 1473 1474 1475 1477 1478 1479 1480 1481 1482 1483 1484 1485 \n   3    5    2    7    1   10   14    3    6    2    6    8    1    2    2    2 \n1487 1489 1490 1492 1493 1494 1495 1496 1497 1499 1501 1502 1504 1505 1507 1510 \n   4   18    1    2    7    1    4    1    9   14   12    1    7    7   23    4 \n1513 1514 1515 1516 1517 1518 1523 1524 1525 1526 1528 1531 1532 1535 1536 1538 \n  11   13    8    5   14    2    1    3    1   13    4    9   18    1    3    1 \n1539 1540 1543 1544 1545 1548 1549 1551 1552 1554 1555 1556 1558 1559 1560 1565 \n   3   19    2    3    9    7    6   16    7   15   24   28    3    1   14    3 \n1566 1567 1568 1571 1576 1580 1582 1583 1585 1586 1587 1589 1590 1591 1593 1595 \n  10    6    3    7    5    5   13    4    9    1    5    3    5   12    9    2 \n1597 1599 1600 1602 1603 1604 1605 1606 1607 1608 1609 1610 1612 1615 1617 1618 \n   6    3    3    6    3   13    4   11    3    3   11   14   21   13   15    2 \n1619 1620 1624 1626 1630 1632 1634 1636 1637 1643 1647 1648 1649 1650 1652 1656 \n   2   20    8   11   16    3   18   20   20    1   13    4   10    8    5    8 \n1658 1659 1660 1662 1663 1667 1673 1674 1675 1677 1681 1684 1686 1687 1690 1697 \n   1   12    1    2    8   18    4    1    1    5    4   10    1    2    8    4 \n1702 1703 1705 1706 1707 1710 1715 1717 1718 1720 1721 1722 1723 1725 1727 1728 \n  13    6   27    8    1   11    4    6    9    8    1    2   10    2    2    5 \n1729 1731 1732 1734 1735 1737 1743 1744 1745 1746 1747 1748 1751 1754 1757 1758 \n   4    2    1    3    1    4    4    6   13    1    2    3    7    8    3   10 \n1759 1761 1762 1763 1764 1765 1766 1767 1768 1769 1771 1772 1773 1778 1779 1781 \n   9    5    1   11    8   21    2    3    6    3    9    2    6   24    1   11 \n1786 1787 1788 1789 1790 1791 1792 1793 1794 1795 1796 1799 1800 1801 1803 1804 \n   3    5    6    7    4    4    1    3   16    1   10    4    8    7    2    3 \n1805 1809 1811 1812 1817 1819 1820 1824 1826 1827 1829 1830 1831 1834 1836 1838 \n   5    2   16    3    1    8   11    4    1    1   10   18    1   15    9    3 \n1839 1840 1841 1842 1843 1845 1846 1847 1848 1849 1850 1851 1855 1856 1857 1858 \n   9    5    3    6    9    6   13    8   15    1    5   11    6    9    2   11 \n1859 1860 1862 1863 1864 1865 1867 1868 1869 1870 1871 1872 1873 1874 1875 1876 \n   2    8   28   17    2    5    3    6    5    5    4    3    3    3    4    5 \n1878 1881 1887 1889 1890 1892 1894 1896 1897 1899 1900 1905 1907 1908 1911 1912 \n  23   10    4    1   18    1    4    7   22    3    4   19    1   10    7    6 \n1913 1914 1915 1916 1917 1919 1922 1923 1924 1926 1929 1930 1932 1934 1935 1936 \n  12    7   14    1    2   10   13    7    7    2    2    9    2   10   66    9 \n1940 1941 1945 1953 1955 1958 1959 1960 1962 1963 1965 1972 1973 1976 1979 1980 \n   6   12   11    4   18    4    5    5    7   12    6   11   18    7    5    6 \n1982 1984 1986 1988 1989 1994 1995 2002 2003 2006 2007 2017 2025 2026 2029 2031 \n  13    7    6    6    2   11    2    3   37   11    8   17    2    6   20   10 \n2032 2033 2034 2035 2037 2039 2040 2042 2044 2045 2046 2047 2048 2049 2051 2054 \n   3   11    5    6    4   14   26    1    2    4    3   17   12    1    7    1 \n2055 2057 2063 2065 2066 2067 2068 2070 2071 2074 2075 2076 2077 2078 2080 2083 \n   2   14    5   14    4    6   38   11    9    4    4   13    1   20    4   23 \n2084 2085 2088 2089 2091 2092 2093 2094 2098 2100 2102 2103 2106 2108 2109 2110 \n  11   34    2   13    6   17    8   10    4    7    6   19    3    1    7   18 \n2111 2112 2115 2116 2118 2120 2121 2122 2123 2125 2126 2128 2131 2132 2133 2135 \n   1    9   11   44    8   14   28   27    3   17   11   21   12    3   11    5 \n2137 2139 2140 2141 2145 2146 2147 2148 2149 2150 2152 2153 2155 2157 2158 2160 \n  19   14    3   19   17    1    1   21    3    3    8    8    7   36    4   15 \n2162 2163 2164 2165 2167 2171 2172 2175 2176 2179 2180 2181 2186 2189 2191 2193 \n  17    4    8    4   14    9   12   18    6    7    2    3   14    3    6   10 \n2194 2195 2197 2198 2199 2203 2205 2206 2209 2212 2213 2215 2217 2220 2222 2224 \n  48   18    6    1    3    5    6    8   28   11    8    5   17    6    2    3 \n2227 2228 2229 2230 2234 2238 2242 2247 2249 2251 2252 2253 2254 2256 2258 2262 \n   7    4   12   11    3    6    3    2   21    3    1   13    2   28    5    2 \n2264 2266 2267 2271 2272 2273 2275 2276 2277 2279 2283 2287 2292 2298 2299 2301 \n   2    9    1    3    3    6    2    4   16    2    6   16    2    1   50    2 \n2302 2303 2305 2306 2307 2310 2315 2317 2318 2324 2328 2330 2332 2335 2337 2338 \n   8    5    6    6    4    3    3    1    2    6    1    3    3    3   11    2 \n2346 2349 2350 2351 2352 2354 2355 2362 2363 2366 2369 2370 2373 2374 2379 2381 \n  10    4    5    4    7   11   10    2   10   22    3    1    2    7    2    2 \n2385 2389 2391 2393 2395 2396 2406 2416 2417 2421 2422 2423 2424 2426 2427 2429 \n   1   20    6    8   11    7    3    1   11    2    1   11    6    5    2    1 \n2430 2434 2436 2438 2440 2444 2446 2447 2455 2456 2458 2460 2462 2463 2468 2473 \n   3   10    3   16    5    8    3    2    6    5   14    4   28    2    4    8 \n2474 2483 2491 2495 2496 2501 2510 2515 2521 2526 2531 2534 2538 2542 2547 2548 \n  13   14    8    3    4   20    7    5   15    3    1    1    9   10    2    4 \n2552 2561 2562 2567 2569 2576 2585 2587 2593 2597 2598 2601 2606 2609 2611 2612 \n   8    2    1   15    7    7    1    9    1    9   20    7    5   11   12    6 \n2617 2632 2647 2651 2653 2654 2655 2659 2665 2672 2674 2675 2678 2682 2688 2689 \n  26    5    2    3    4    1    7   11    8   18    2    7    2   15   15    3 \n2694 2700 2703 2710 2717 2722 2727 2730 2733 2734 2739 2744 2750 2751 2754 2755 \n  16   20    4   13    6   25    3    3    2   20    2    8   14    4    6    9 \n2762 2764 2765 2774 2782 2783 2788 2789 2790 2791 2792 2793 2800 2801 2803 2804 \n   4    1   14   10   15    5    8   14    9   13   13    2    4    8   10    3 \n2805 2811 2822 2827 2829 2830 2833 2834 2840 2841 2842 2845 2847 2852 2856 2859 \n  11    4    9   10   10    4    3    1    4   10    3    1    4   18   10    5 \n2864 2866 2870 2872 2877 2881 2886 2898 2900 2914 2918 2925 2926 2927 2930 2932 \n   5    2   13    2    6   19    6    7    7    1    6   12    3   13    2    5 \n2936 2942 2943 2950 2953 2955 2959 2967 2968 2974 2975 2976 2982 2986 2987 2994 \n   5   24    1    4    2    8    9    5    5    5    6    2    3   17    4   10 \n2996 3002 3007 3008 3012 3017 3026 3031 3037 3040 3054 3058 3067 3068 3069 3071 \n   2   18   15    8    2    3    7    4    2    2    4    3    4    5    5    3 \n3074 3076 3086 3095 3105 3111 3115 3135 3138 3139 3142 3144 3146 3155 3156 3168 \n   3    2    2    5    3    9    1    3    7    2    8    6    4    2    2    6 \n3175 3176 3178 3182 3185 3187 3189 3194 3196 3203 3212 3221 3229 3241 3244 3245 \n   3    2    1    8    2    3    9    4    3    3    1    4   10    4   12    3 \n3252 3255 3264 3265 3267 3278 3285 3291 3307 3310 3313 3317 3322 3328 3331 3333 \n   3   10   10   13    4    3    6    2    4    7    2    6    1    2    1    2 \n3338 3343 3357 3405 3424 3441 3452 3473 3486 \n   6    2    1    1    6    4    2    1    1 \n6 least connected regions:\n5233 5270 5273 14652 22145 22146 with 5 links\n1 most connected region:\n6060 with 3486 links\n\nWeights style: W \nWeights constants summary:\n      n        nn    S0       S1       S2\nW 25502 650352004 25502 79.06603 102796.2\n\n\nPerform Moran’s I test for residual spatial autocorrelation\n\nlm.morantest(resale_mlr, nb_lw)\n\n\n    Global Moran I for regression residuals\n\ndata:  \nmodel: lm(formula = PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD +\nPROX_CHILDCARE + PROX_ELDERCARE + PROX_GOODPRIMARY + PROX_HAWKER +\nPROX_MRT + PROX_PARK + PROX_SHOPPING + PROX_SUPERMARKET +\nWITHIN_1KM_PRIMARY + WITHIN_350M_BUS + WITHIN_350M_CHILDCARE +\nWITHIN_350M_KINDERGARTEN + LEASE_MTHS, data = resale_main_nogeo)\nweights: nb_lw\n\nMoran I statistic standard deviate = 895.35, p-value < 2.2e-16\nalternative hypothesis: greater\nsample estimates:\nObserved Moran I      Expectation         Variance \n    2.778070e-01    -2.755883e-04     9.646277e-08 \n\n\n\n\n\n\n\n\nNote\n\n\n\nSince the P value is less than the Alpha value of 0.05, we reject the null hypothesis that residuals are randomly distributed.\nAlso, since the Observed Moran I is greater than 0, we can infer that the residuals are more of a cluster distribution."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#data-prep",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#data-prep",
    "title": "Take Home Exercise 3",
    "section": "6.1 Data Prep",
    "text": "6.1 Data Prep\n\nmdata <- read_rds(\"data/model/resale_main.rds\")\n\nViewing the data\n\nglimpse(mdata)\n\nRows: 25,502\nColumns: 28\n$ month                    <chr> \"2021-01\", \"2021-01\", \"2021-01\", \"2021-01\", \"…\n$ town                     <chr> \"ANG MO KIO\", \"ANG MO KIO\", \"ANG MO KIO\", \"AN…\n$ address                  <chr> \"547 ANG MO KIO AVE 10\", \"414 ANG MO KIO AVE …\n$ block                    <chr> \"547\", \"414\", \"509\", \"467\", \"571\", \"134\", \"20…\n$ street_name              <chr> \"ANG MO KIO AVE 10\", \"ANG MO KIO AVE 10\", \"AN…\n$ flat_type                <chr> \"4 ROOM\", \"4 ROOM\", \"4 ROOM\", \"4 ROOM\", \"4 RO…\n$ STOREY                   <chr> \"04 TO 06\", \"01 TO 03\", \"01 TO 03\", \"07 TO 09…\n$ AREA_SQM                 <dbl> 92, 92, 91, 92, 92, 98, 92, 92, 92, 92, 92, 1…\n$ flat_model               <chr> \"New Generation\", \"New Generation\", \"New Gene…\n$ lease_commence_date      <dbl> 1981, 1979, 1980, 1979, 1979, 1978, 1977, 197…\n$ LEASE_MTHS               <dbl> 708, 693, 702, 695, 689, 681, 661, 682, 692, …\n$ PRICE                    <dbl> 370000, 375000, 380000, 385000, 410000, 41000…\n$ postal                   <chr> \"560547\", \"560414\", \"560509\", \"560467\", \"5605…\n$ geometry                 <POINT [m]> POINT (30770.07 39578.64), POINT (30292…\n$ PROX_CBD                 <dbl> 9.564575, 8.401690, 9.516492, 8.580908, 9.084…\n$ PROX_BUS                 <dbl> 0.16157609, 0.16740841, 0.07424143, 0.0887911…\n$ PROX_CHILDCARE           <dbl> 2.493662e-01, 6.715056e-02, 1.385583e-01, 1.4…\n$ PROX_ELDERCARE           <dbl> 1.08567795, 0.15039052, 0.72242472, 0.0981628…\n$ PROX_HAWKER              <dbl> 0.4442515, 0.2050009, 0.4495734, 0.3190679, 0…\n$ PROX_GOODPRIMARY         <dbl> 3.182527, 2.354024, 2.414729, 2.699653, 2.648…\n$ PROX_PARK                <dbl> 0.8291527, 0.7847864, 0.3796058, 0.9242129, 0…\n$ PROX_SUPERMARKET         <dbl> 0.4184204, 0.1946009, 0.4435109, 0.4269715, 0…\n$ PROX_SHOPPING            <dbl> 1.1817959, 0.8444986, 0.2966736, 0.9304149, 0…\n$ PROX_MRT                 <dbl> 1.0731215, 0.8245176, 0.4544926, 0.9503956, 0…\n$ WITHIN_350M_KINDERGARTEN <dbl> 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, …\n$ WITHIN_350M_CHILDCARE    <dbl> 2, 3, 3, 3, 3, 2, 6, 3, 3, 3, 3, 3, 5, 2, 3, …\n$ WITHIN_350M_BUS          <dbl> 4, 7, 10, 4, 8, 2, 8, 7, 6, 7, 7, 7, 8, 8, 11…\n$ WITHIN_1KM_PRIMARY       <dbl> 1, 3, 2, 3, 2, 2, 3, 2, 3, 3, 1, 2, 3, 2, 2, …\n\n\n\n6.1.1 Filtering Test and Training Data\n\ntest_data <- filter(mdata) %>%\n  filter(month >= \"2023-01\" & month <= \"2023-02\")\n\ntrain_data <- filter(mdata) %>%\n  filter(month >= \"2021-01\" & month <= \"2022-12\")\n\nChecking if Time Period is right\n\nunique(test_data$month)\n\n[1] \"2023-01\" \"2023-02\"\n\n\n\nunique(train_data$month)\n\n [1] \"2021-01\" \"2021-02\" \"2021-03\" \"2021-04\" \"2021-05\" \"2021-06\" \"2021-07\"\n [8] \"2021-08\" \"2021-09\" \"2021-10\" \"2021-11\" \"2021-12\" \"2022-01\" \"2022-02\"\n[15] \"2022-03\" \"2022-04\" \"2022-05\" \"2022-06\" \"2022-07\" \"2022-08\" \"2022-09\"\n[22] \"2022-10\" \"2022-11\" \"2022-12\"\n\n\n\n\n6.1.2 Removing columns that are not required\n\ntest_data <- test_data %>%\n  dplyr::select(c(7, 8, 11, 12, 14:28))\n\ntrain_data <- train_data %>%\n  dplyr::select(c(7, 8, 11, 12, 14:28))\n\nChecking Data\n\nglimpse(test_data)\n\nRows: 1,846\nColumns: 19\n$ STOREY                   <chr> \"07 TO 09\", \"07 TO 09\", \"07 TO 09\", \"10 TO 12…\n$ AREA_SQM                 <dbl> 88, 91, 92, 92, 92, 92, 92, 92, 98, 92, 92, 9…\n$ LEASE_MTHS               <dbl> 1065, 698, 671, 668, 660, 660, 659, 657, 651,…\n$ PRICE                    <dbl> 735000, 480888, 470000, 486500, 505000, 50500…\n$ geometry                 <POINT [m]> POINT (29258.92 38653.1), POINT (30036.…\n$ PROX_CBD                 <dbl> 8.648990, 8.319957, 8.580908, 8.461580, 8.740…\n$ PROX_BUS                 <dbl> 0.06370299, 0.11817809, 0.08879118, 0.1286942…\n$ PROX_CHILDCARE           <dbl> 1.424212e-01, 1.526755e-01, 1.448160e-01, 8.1…\n$ PROX_ELDERCARE           <dbl> 0.21761827, 0.25976843, 0.09816285, 0.0854535…\n$ PROX_HAWKER              <dbl> 0.4465136, 0.3874107, 0.3190679, 0.2666457, 0…\n$ PROX_GOODPRIMARY         <dbl> 1.4167972, 2.0895381, 2.6996535, 2.3359500, 2…\n$ PROX_PARK                <dbl> 0.5681842, 0.5179204, 0.9242129, 0.7734256, 0…\n$ PROX_SUPERMARKET         <dbl> 0.34392765, 0.28490909, 0.42697146, 0.1283025…\n$ PROX_SHOPPING            <dbl> 0.5677569, 0.7529773, 0.9304149, 0.7819466, 0…\n$ PROX_MRT                 <dbl> 0.7106577, 0.7795685, 0.9503956, 0.7586304, 0…\n$ WITHIN_350M_KINDERGARTEN <dbl> 1, 1, 1, 0, 1, 1, 1, 1, 2, 1, 2, 1, 1, 1, 0, …\n$ WITHIN_350M_CHILDCARE    <dbl> 5, 3, 3, 3, 3, 4, 3, 4, 7, 3, 8, 7, 3, 3, 4, …\n$ WITHIN_350M_BUS          <dbl> 4, 7, 4, 7, 6, 6, 6, 6, 6, 6, 6, 6, 10, 7, 9,…\n$ WITHIN_1KM_PRIMARY       <dbl> 2, 3, 3, 3, 3, 3, 3, 2, 3, 3, 3, 3, 2, 2, 2, …\n\n\n\nglimpse(train_data)\n\nRows: 23,656\nColumns: 19\n$ STOREY                   <chr> \"04 TO 06\", \"01 TO 03\", \"01 TO 03\", \"07 TO 09…\n$ AREA_SQM                 <dbl> 92, 92, 91, 92, 92, 98, 92, 92, 92, 92, 92, 1…\n$ LEASE_MTHS               <dbl> 708, 693, 702, 695, 689, 681, 661, 682, 692, …\n$ PRICE                    <dbl> 370000, 375000, 380000, 385000, 410000, 41000…\n$ geometry                 <POINT [m]> POINT (30770.07 39578.64), POINT (30292…\n$ PROX_CBD                 <dbl> 9.564575, 8.401690, 9.516492, 8.580908, 9.084…\n$ PROX_BUS                 <dbl> 0.16157609, 0.16740841, 0.07424143, 0.0887911…\n$ PROX_CHILDCARE           <dbl> 2.493662e-01, 6.715056e-02, 1.385583e-01, 1.4…\n$ PROX_ELDERCARE           <dbl> 1.08567795, 0.15039052, 0.72242472, 0.0981628…\n$ PROX_HAWKER              <dbl> 0.4442515, 0.2050009, 0.4495734, 0.3190679, 0…\n$ PROX_GOODPRIMARY         <dbl> 3.182527, 2.354024, 2.414729, 2.699653, 2.648…\n$ PROX_PARK                <dbl> 0.8291527, 0.7847864, 0.3796058, 0.9242129, 0…\n$ PROX_SUPERMARKET         <dbl> 0.4184204, 0.1946009, 0.4435109, 0.4269715, 0…\n$ PROX_SHOPPING            <dbl> 1.1817959, 0.8444986, 0.2966736, 0.9304149, 0…\n$ PROX_MRT                 <dbl> 1.0731215, 0.8245176, 0.4544926, 0.9503956, 0…\n$ WITHIN_350M_KINDERGARTEN <dbl> 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, …\n$ WITHIN_350M_CHILDCARE    <dbl> 2, 3, 3, 3, 3, 2, 6, 3, 3, 3, 3, 3, 5, 2, 3, …\n$ WITHIN_350M_BUS          <dbl> 4, 7, 10, 4, 8, 2, 8, 7, 6, 7, 7, 7, 8, 8, 11…\n$ WITHIN_1KM_PRIMARY       <dbl> 1, 3, 2, 3, 2, 2, 3, 2, 3, 3, 1, 2, 3, 2, 2, …\n\n\n\n\n6.1.3 Saving of dataset\n\nwrite_rds(test_data, \"data/model/test_data.rds\")\nwrite_rds(train_data, \"data/model/train_data.rds\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#computing-correlation-matrix",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#computing-correlation-matrix",
    "title": "Take Home Exercise 3",
    "section": "6.2 Computing Correlation Matrix",
    "text": "6.2 Computing Correlation Matrix\n\nmdata_nogeo <- mdata %>%\n  dplyr::select(c(7, 8, 11, 12, 14:28)) %>%\n  st_drop_geometry() %>%\n  mutate(STOREY = as.character(STOREY))\n\n\n\n\n\n\n\nNote\n\n\n\nThe correlation matrix above shows that all the correlation values are within the margin of error. Hence, there is no sign of multicolinearity and all variables can be included in the regression"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#retrieving-stored-data",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#retrieving-stored-data",
    "title": "Take Home Exercise 3",
    "section": "6.3 Retrieving Stored Data",
    "text": "6.3 Retrieving Stored Data\n\ntest_data <- read_rds(\"data/model/test_data.rds\")\ntrain_data <- read_rds(\"data/model/train_data.rds\")\n\n\n6.3.1 Building a non-spatial multiple linear regression\n\nprice_mlr <- lm(formula = PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD +\n                   PROX_CHILDCARE + PROX_ELDERCARE + PROX_GOODPRIMARY +\n                   PROX_HAWKER + PROX_MRT + PROX_PARK + PROX_SHOPPING +\n                   PROX_SUPERMARKET + WITHIN_1KM_PRIMARY + WITHIN_350M_BUS +\n                   WITHIN_350M_CHILDCARE + WITHIN_350M_KINDERGARTEN + LEASE_MTHS,\n                 data = train_data)\nsummary(price_mlr)\n\n\nCall:\nlm(formula = PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD + \n    PROX_CHILDCARE + PROX_ELDERCARE + PROX_GOODPRIMARY + PROX_HAWKER + \n    PROX_MRT + PROX_PARK + PROX_SHOPPING + PROX_SUPERMARKET + \n    WITHIN_1KM_PRIMARY + WITHIN_350M_BUS + WITHIN_350M_CHILDCARE + \n    WITHIN_350M_KINDERGARTEN + LEASE_MTHS, data = train_data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-358722  -44740   -1805   43766  367404 \n\nCoefficients:\n                           Estimate Std. Error  t value Pr(>|t|)    \n(Intercept)              117534.323   8447.235   13.914  < 2e-16 ***\nSTOREY04 TO 06            18819.414   1448.679   12.991  < 2e-16 ***\nSTOREY07 TO 09            32913.451   1471.928   22.361  < 2e-16 ***\nSTOREY10 TO 12            42124.788   1503.354   28.021  < 2e-16 ***\nSTOREY13 TO 15            46539.487   1770.176   26.291  < 2e-16 ***\nSTOREY16 TO 18            57792.485   2277.495   25.375  < 2e-16 ***\nSTOREY19 TO 21            83110.456   3285.789   25.294  < 2e-16 ***\nSTOREY22 TO 24            90026.901   3817.710   23.581  < 2e-16 ***\nSTOREY25 TO 27           127578.933   4286.717   29.761  < 2e-16 ***\nSTOREY28 TO 30           190839.103   5211.319   36.620  < 2e-16 ***\nSTOREY31 TO 33           202066.715   6183.606   32.678  < 2e-16 ***\nSTOREY34 TO 36           227966.101   6251.494   36.466  < 2e-16 ***\nSTOREY37 TO 39           236073.194   7303.119   32.325  < 2e-16 ***\nSTOREY40 TO 42           248879.827  10132.768   24.562  < 2e-16 ***\nSTOREY43 TO 45           291774.008  13950.940   20.914  < 2e-16 ***\nSTOREY46 TO 48           372521.834  24006.879   15.517  < 2e-16 ***\nSTOREY49 TO 51           489215.496  39105.531   12.510  < 2e-16 ***\nAREA_SQM                   3321.643     68.241   48.675  < 2e-16 ***\nPROX_BUS                   -151.012   8556.345   -0.018 0.985919    \nPROX_CBD                 -16449.767    160.874 -102.252  < 2e-16 ***\nPROX_CHILDCARE           -30020.250   5966.182   -5.032 4.90e-07 ***\nPROX_ELDERCARE            -7304.721    782.959   -9.330  < 2e-16 ***\nPROX_GOODPRIMARY           -989.700    282.399   -3.505 0.000458 ***\nPROX_HAWKER              -22093.698    933.964  -23.656  < 2e-16 ***\nPROX_MRT                 -23007.446   1299.264  -17.708  < 2e-16 ***\nPROX_PARK                  2929.195   1081.974    2.707 0.006789 ** \nPROX_SHOPPING            -25009.965   1500.391  -16.669  < 2e-16 ***\nPROX_SUPERMARKET          10272.325   3062.601    3.354 0.000797 ***\nWITHIN_1KM_PRIMARY        -9045.547    350.381  -25.816  < 2e-16 ***\nWITHIN_350M_BUS            1100.533    173.527    6.342 2.31e-10 ***\nWITHIN_350M_CHILDCARE     -3951.416    262.563  -15.049  < 2e-16 ***\nWITHIN_350M_KINDERGARTEN   6691.904    478.697   13.979  < 2e-16 ***\nLEASE_MTHS                  358.830      3.201  112.100  < 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 67600 on 23623 degrees of freedom\nMultiple R-squared:  0.7279,    Adjusted R-squared:  0.7275 \nF-statistic:  1974 on 32 and 23623 DF,  p-value: < 2.2e-16\n\n\n\n\n6.3.2 Saving of file\n\nwrite_rds(price_mlr, \"data/model/price_mlr.rds\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#gwr-predictive-method",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#gwr-predictive-method",
    "title": "Take Home Exercise 3",
    "section": "6.4 GWR Predictive method",
    "text": "6.4 GWR Predictive method\n\n6.4.1 Converting sf data.frame to SpatialPointDataFrame\n\ntrain_data_sp <- as_Spatial(train_data)\ntrain_data_sp\n\nclass       : SpatialPointsDataFrame \nfeatures    : 23656 \nextent      : 11519.79, 42645.18, 28217.39, 48741.06  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \nvariables   : 18\nnames       :   STOREY, AREA_SQM, LEASE_MTHS,   PRICE,          PROX_CBD,           PROX_BUS,       PROX_CHILDCARE,       PROX_ELDERCARE,       PROX_HAWKER,   PROX_GOODPRIMARY,          PROX_PARK,     PROX_SUPERMARKET,      PROX_SHOPPING,           PROX_MRT, WITHIN_350M_KINDERGARTEN, ... \nmin values  : 01 TO 03,       70,        534,  250000, 0.999393538715878, 0.0158480216214286, 1.40841148620523e-08, 1.98943787433087e-08, 0.030603180648446, 0.0790226000235527, 0.0441643213745594, 6.15083813444168e-09, 0.0421144997725278, 0.0222985128432497,                        0, ... \nmax values  : 49 TO 51,      145,       1168, 1370000,  19.6500691667807,  0.391470769487539,      0.5864949302319,     3.30163731686804,  2.86763031231414,   9.62214922623055,   2.44018373848866,     1.57131703659268,   2.28478087425324,   2.12939260942018,                        7, ... \n\n\n\n\n6.4.2 Computing Adaptive Bandwidth\n\nbw_adaptive <- bw.gwr(PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD +\n                   PROX_CHILDCARE + PROX_ELDERCARE + PROX_GOODPRIMARY +\n                   PROX_HAWKER + PROX_MRT + PROX_PARK + PROX_SHOPPING +\n                   PROX_SUPERMARKET + WITHIN_1KM_PRIMARY + WITHIN_350M_BUS +\n                   WITHIN_350M_CHILDCARE + WITHIN_350M_KINDERGARTEN + LEASE_MTHS,\n                 data = train_data_sp,\n                 approach = \"CV\",\n                 kernel = \"gaussian\",\n                 adaptive = TRUE,\n                 longlat = FALSE)\n\nTake a cup of tea and have a break, it will take a few minutes.\n          -----A kind suggestion from GWmodel development group\nAdaptive bandwidth: 14627 CV score: 9.931984e+13 \nAdaptive bandwidth: 9048 CV score: 9.230587e+13 \nAdaptive bandwidth: 5598 CV score: 8.283281e+13 \nAdaptive bandwidth: 3468 CV score: 7.375926e+13 \nAdaptive bandwidth: 2149 CV score: 6.276294e+13 \nAdaptive bandwidth: 1336 CV score: 5.426306e+13 \nAdaptive bandwidth: 831 CV score: 4.820518e+13 \nAdaptive bandwidth: 521 CV score: Inf \nAdaptive bandwidth: 1024 CV score: 5.051152e+13 \nAdaptive bandwidth: 713 CV score: 4.663173e+13 \nAdaptive bandwidth: 638 CV score: NaN \nAdaptive bandwidth: 757 CV score: 4.71682e+13 \nAdaptive bandwidth: 683 CV score: 4.622535e+13 \nAdaptive bandwidth: 667 CV score: 4.601451e+13 \nAdaptive bandwidth: 654 CV score: NaN \nAdaptive bandwidth: 671 CV score: 4.60621e+13 \nAdaptive bandwidth: 660 CV score: 4.591026e+13 \nAdaptive bandwidth: 660 CV score: 4.591026e+13 \n\n\n\n\n6.4.3 Saving of file\n\nwrite_rds(bw_adaptive, \"data/model/bw_adaptive.rds\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#constructing-adaptive-bandwidth-gwr-model",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#constructing-adaptive-bandwidth-gwr-model",
    "title": "Take Home Exercise 3",
    "section": "6.5 Constructing Adaptive bandwidth GWR Model",
    "text": "6.5 Constructing Adaptive bandwidth GWR Model\n\nbw_adaptive <- read_rds(\"data/model/bw_adaptive.rds\")\n\nNow, we can go ahead to calibrate the gwr-based hedonic pricing model by using adaptive bandwidth and Gaussian kernel\n\ngwr_adaptive <- gwr.basic(PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD +\n                   PROX_CHILDCARE + PROX_ELDERCARE + PROX_GOODPRIMARY +\n                   PROX_HAWKER + PROX_MRT + PROX_PARK + PROX_SHOPPING +\n                   PROX_SUPERMARKET + WITHIN_1KM_PRIMARY + WITHIN_350M_BUS +\n                   WITHIN_350M_CHILDCARE + WITHIN_350M_KINDERGARTEN + LEASE_MTHS,\n                   data = train_data_sp,\n                   bw = bw_adaptive,\n                   kernel = \"gaussian\",\n                   adaptive = TRUE,\n                   longlat = FALSE)\n\n\n6.5.2 Saving for future use\n\nwrite_rds(gwr_adaptive, \"data/model/gwr_adaptive.rds\")\n\n\n\n6.5.3 Displaying Modal Output\n\ngwr_adaptive <- read_rds(\"data/model/gwr_adaptive.rds\")\ngwr_adaptive\n\n   ***********************************************************************\n   *                       Package   GWmodel                             *\n   ***********************************************************************\n   Program starts at: 2023-03-22 07:44:21 \n   Call:\n   gwr.basic(formula = PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD + \n    PROX_CHILDCARE + PROX_ELDERCARE + PROX_GOODPRIMARY + PROX_HAWKER + \n    PROX_MRT + PROX_PARK + PROX_SHOPPING + PROX_SUPERMARKET + \n    WITHIN_1KM_PRIMARY + WITHIN_350M_BUS + WITHIN_350M_CHILDCARE + \n    WITHIN_350M_KINDERGARTEN + LEASE_MTHS, data = train_data_sp, \n    bw = bw_adaptive, kernel = \"gaussian\", adaptive = TRUE, longlat = FALSE)\n\n   Dependent (y) variable:  PRICE\n   Independent variables:  STOREY AREA_SQM PROX_BUS PROX_CBD PROX_CHILDCARE PROX_ELDERCARE PROX_GOODPRIMARY PROX_HAWKER PROX_MRT PROX_PARK PROX_SHOPPING PROX_SUPERMARKET WITHIN_1KM_PRIMARY WITHIN_350M_BUS WITHIN_350M_CHILDCARE WITHIN_350M_KINDERGARTEN LEASE_MTHS\n   Number of data points: 23656\n   ***********************************************************************\n   *                    Results of Global Regression                     *\n   ***********************************************************************\n\n   Call:\n    lm(formula = formula, data = data)\n\n   Residuals:\n    Min      1Q  Median      3Q     Max \n-358722  -44740   -1805   43766  367404 \n\n   Coefficients:\n                              Estimate Std. Error  t value Pr(>|t|)    \n   (Intercept)              117534.323   8447.235   13.914  < 2e-16 ***\n   STOREY04 TO 06            18819.414   1448.679   12.991  < 2e-16 ***\n   STOREY07 TO 09            32913.451   1471.928   22.361  < 2e-16 ***\n   STOREY10 TO 12            42124.788   1503.354   28.021  < 2e-16 ***\n   STOREY13 TO 15            46539.487   1770.176   26.291  < 2e-16 ***\n   STOREY16 TO 18            57792.485   2277.495   25.375  < 2e-16 ***\n   STOREY19 TO 21            83110.456   3285.789   25.294  < 2e-16 ***\n   STOREY22 TO 24            90026.901   3817.710   23.581  < 2e-16 ***\n   STOREY25 TO 27           127578.933   4286.717   29.761  < 2e-16 ***\n   STOREY28 TO 30           190839.103   5211.319   36.620  < 2e-16 ***\n   STOREY31 TO 33           202066.715   6183.606   32.678  < 2e-16 ***\n   STOREY34 TO 36           227966.101   6251.494   36.466  < 2e-16 ***\n   STOREY37 TO 39           236073.194   7303.119   32.325  < 2e-16 ***\n   STOREY40 TO 42           248879.827  10132.768   24.562  < 2e-16 ***\n   STOREY43 TO 45           291774.008  13950.940   20.914  < 2e-16 ***\n   STOREY46 TO 48           372521.834  24006.879   15.517  < 2e-16 ***\n   STOREY49 TO 51           489215.496  39105.531   12.510  < 2e-16 ***\n   AREA_SQM                   3321.643     68.241   48.675  < 2e-16 ***\n   PROX_BUS                   -151.012   8556.345   -0.018 0.985919    \n   PROX_CBD                 -16449.767    160.874 -102.252  < 2e-16 ***\n   PROX_CHILDCARE           -30020.250   5966.182   -5.032 4.90e-07 ***\n   PROX_ELDERCARE            -7304.721    782.959   -9.330  < 2e-16 ***\n   PROX_GOODPRIMARY           -989.700    282.399   -3.505 0.000458 ***\n   PROX_HAWKER              -22093.698    933.964  -23.656  < 2e-16 ***\n   PROX_MRT                 -23007.446   1299.264  -17.708  < 2e-16 ***\n   PROX_PARK                  2929.195   1081.974    2.707 0.006789 ** \n   PROX_SHOPPING            -25009.965   1500.391  -16.669  < 2e-16 ***\n   PROX_SUPERMARKET          10272.325   3062.601    3.354 0.000797 ***\n   WITHIN_1KM_PRIMARY        -9045.547    350.381  -25.816  < 2e-16 ***\n   WITHIN_350M_BUS            1100.533    173.527    6.342 2.31e-10 ***\n   WITHIN_350M_CHILDCARE     -3951.416    262.563  -15.049  < 2e-16 ***\n   WITHIN_350M_KINDERGARTEN   6691.904    478.697   13.979  < 2e-16 ***\n   LEASE_MTHS                  358.830      3.201  112.100  < 2e-16 ***\n\n   ---Significance stars\n   Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n   Residual standard error: 67600 on 23623 degrees of freedom\n   Multiple R-squared: 0.7279\n   Adjusted R-squared: 0.7275 \n   F-statistic:  1974 on 32 and 23623 DF,  p-value: < 2.2e-16 \n   ***Extra Diagnostic information\n   Residual sum of squares: 1.079661e+14\n   Sigma(hat): 67560.28\n   AIC:  593344.9\n   AICc:  593345\n   BIC:  570305.8\n   ***********************************************************************\n   *          Results of Geographically Weighted Regression              *\n   ***********************************************************************\n\n   *********************Model calibration information*********************\n   Kernel function: gaussian \n   Adaptive bandwidth: 660 (number of nearest neighbours)\n   Regression points: the same locations as observations are used.\n   Distance metric: Euclidean distance metric is used.\n\n   ****************Summary of GWR coefficient estimates:******************\n                                   Min.     1st Qu.      Median     3rd Qu.\n   Intercept                -1.1183e+06 -1.6480e+05  9.7373e+04  1.9643e+05\n   STOREY04.TO.06            7.3023e+03  1.3747e+04  1.6285e+04  2.3718e+04\n   STOREY07.TO.09            1.7927e+04  2.5179e+04  3.5446e+04  4.3125e+04\n   STOREY10.TO.12            2.3989e+04  3.3714e+04  4.4800e+04  5.3537e+04\n   STOREY13.TO.15            2.9791e+04  4.3869e+04  5.2539e+04  6.0581e+04\n   STOREY16.TO.18           -1.7291e+05  5.0694e+04  6.0136e+04  7.7027e+04\n   STOREY19.TO.21            7.9094e+03  5.5462e+04  7.8953e+04  1.0348e+05\n   STOREY22.TO.24           -1.1288e+05  3.9263e+04  7.2268e+04  9.8897e+04\n   STOREY25.TO.27           -1.2484e+05  3.6756e+04  8.2800e+04  1.1769e+05\n   STOREY28.TO.30           -1.0258e+04  9.4638e+04  1.5795e+05  2.8606e+05\n   STOREY31.TO.33           -8.0947e+03  1.1493e+05  1.8650e+05  3.0076e+05\n   STOREY34.TO.36            2.8995e+04  1.5065e+05  1.9605e+05  3.4434e+05\n   STOREY37.TO.39           -5.8788e+05  1.5649e+05  2.2636e+05  3.1997e+05\n   STOREY40.TO.42           -3.6570e+05  1.8819e+05  2.5783e+05  4.7685e+05\n   STOREY43.TO.45           -1.3811e+05  2.3936e+05  3.6953e+05  5.2688e+05\n   STOREY46.TO.48           -1.7869e+05  2.1867e+05  3.6884e+05  4.9424e+05\n   STOREY49.TO.51           -6.0484e+04  4.6170e+05  5.3945e+05  7.0890e+05\n   AREA_SQM                  1.0048e+03  1.9578e+03  2.6370e+03  4.4500e+03\n   PROX_BUS                 -1.1409e+05 -3.2160e+04  6.0175e+02  3.7830e+04\n   PROX_CBD                 -1.6789e+05 -2.6338e+04 -1.0992e+04 -1.9277e+03\n   PROX_CHILDCARE           -1.1167e+05 -4.6607e+04 -1.8262e+04  3.2867e+03\n   PROX_ELDERCARE           -6.1617e+04 -1.1421e+04  8.4106e+02  1.4051e+04\n   PROX_GOODPRIMARY         -1.3622e+05 -1.9292e+04 -5.0061e+03  3.4082e+03\n   PROX_HAWKER              -1.1497e+05 -3.0383e+04 -1.5337e+04  5.0468e+03\n   PROX_MRT                 -1.4965e+05 -6.6886e+04 -3.9145e+04 -2.3683e+04\n   PROX_PARK                -8.9552e+04 -2.6112e+04 -1.2344e+04  6.2669e+01\n   PROX_SHOPPING            -7.7650e+04 -2.2379e+04  4.0035e+02  1.7550e+04\n   PROX_SUPERMARKET         -1.1272e+05 -3.2530e+04  6.1451e+03  2.9493e+04\n   WITHIN_1KM_PRIMARY       -2.7753e+04 -5.0426e+03  1.1244e+03  6.0239e+03\n   WITHIN_350M_BUS          -4.6978e+03 -5.3193e+02  2.5353e+02  1.6309e+03\n   WITHIN_350M_CHILDCARE    -8.8468e+03 -2.3716e+03 -4.9878e+02  1.0532e+03\n   WITHIN_350M_KINDERGARTEN -1.2675e+04 -5.9119e+03 -3.2290e+03  1.6067e+03\n   LEASE_MTHS               -2.3604e+02  2.7674e+02  3.7027e+02  4.8226e+02\n                                  Max.\n   Intercept                2062147.72\n   STOREY04.TO.06             45193.24\n   STOREY07.TO.09             70967.81\n   STOREY10.TO.12             73659.14\n   STOREY13.TO.15             94513.29\n   STOREY16.TO.18            195075.84\n   STOREY19.TO.21            295940.48\n   STOREY22.TO.24            297305.08\n   STOREY25.TO.27            336471.72\n   STOREY28.TO.30            827653.60\n   STOREY31.TO.33            925714.20\n   STOREY34.TO.36            988033.81\n   STOREY37.TO.39           1167635.17\n   STOREY40.TO.42           1331308.13\n   STOREY43.TO.45           1324128.63\n   STOREY46.TO.48           1291557.95\n   STOREY49.TO.51           1404189.66\n   AREA_SQM                   13578.44\n   PROX_BUS                  142295.70\n   PROX_CBD                   49461.77\n   PROX_CHILDCARE             79463.63\n   PROX_ELDERCARE             88918.59\n   PROX_GOODPRIMARY           91069.10\n   PROX_HAWKER                68643.23\n   PROX_MRT                   71934.01\n   PROX_PARK                 113089.60\n   PROX_SHOPPING             120670.57\n   PROX_SUPERMARKET          119353.94\n   WITHIN_1KM_PRIMARY         14684.02\n   WITHIN_350M_BUS             8170.27\n   WITHIN_350M_CHILDCARE      11899.36\n   WITHIN_350M_KINDERGARTEN   16371.39\n   LEASE_MTHS                   658.18\n   ************************Diagnostic information*************************\n   Number of data points: 23656 \n   Effective number of parameters (2trace(S) - trace(S'S)): 617.6324 \n   Effective degrees of freedom (n-2trace(S) + trace(S'S)): 23038.37 \n   AICc (GWR book, Fotheringham, et al. 2002, p. 61, eq 2.33): 572931.6 \n   AIC (GWR book, Fotheringham, et al. 2002,GWR p. 96, eq. 4.22): 572432.1 \n   BIC (GWR book, Fotheringham, et al. 2002,GWR p. 61, eq. 2.34): 553109.6 \n   Residual sum of squares: 4.383611e+13 \n   R-square value:  0.8895057 \n   Adjusted R-square value:  0.8865433 \n\n   ***********************************************************************\n   Program stops at: 2023-03-22 08:01:12"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#preparing-coordinates-data",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#preparing-coordinates-data",
    "title": "Take Home Exercise 3",
    "section": "6.6 Preparing Coordinates Data",
    "text": "6.6 Preparing Coordinates Data\n\n6.6.1 Extracting Coordinates Data\n\ncoords <- st_coordinates(mdata)\ncoords_train <- st_coordinates(train_data)\ncoords_test <- st_coordinates(test_data)\n\n\n\n6.6.2 Writing output into RDS\n\ncoords <- write_rds(coords, \"data/model/coords.rds\" )\ncoords_train <- write_rds(coords_train, \"data/model/coords_train.rds\" )\ncoords_test <- write_rds(coords_test, \"data/model/coords_test.rds\" )\n\n\n\n6.6.3 Dropping Geometry Field\n\ntrain_data <- train_data %>%\n  st_drop_geometry()"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#calibrating-random-forest-model",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#calibrating-random-forest-model",
    "title": "Take Home Exercise 3",
    "section": "6.7 Calibrating Random Forest Model",
    "text": "6.7 Calibrating Random Forest Model\nUsing Ranger\n\nset.seed(1234)\n\nrf <- ranger(PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD +\n               PROX_CHILDCARE + PROX_ELDERCARE + PROX_GOODPRIMARY +\n               PROX_HAWKER + PROX_MRT + PROX_PARK + PROX_SHOPPING +\n               PROX_SUPERMARKET + WITHIN_1KM_PRIMARY + WITHIN_350M_BUS +\n               WITHIN_350M_CHILDCARE + WITHIN_350M_KINDERGARTEN + LEASE_MTHS,\n             data = train_data)\n\n\nprint(rf)\n\nRanger result\n\nCall:\n ranger(PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD + PROX_CHILDCARE +      PROX_ELDERCARE + PROX_GOODPRIMARY + PROX_HAWKER + PROX_MRT +      PROX_PARK + PROX_SHOPPING + PROX_SUPERMARKET + WITHIN_1KM_PRIMARY +      WITHIN_350M_BUS + WITHIN_350M_CHILDCARE + WITHIN_350M_KINDERGARTEN +      LEASE_MTHS, data = train_data) \n\nType:                             Regression \nNumber of trees:                  500 \nSample size:                      23656 \nNumber of independent variables:  17 \nMtry:                             4 \nTarget node size:                 5 \nVariable importance mode:         none \nSplitrule:                        variance \nOOB prediction error (MSE):       1077227530 \nR squared (OOB):                  0.9357699"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#calibrating-geographical-random-forest-model",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#calibrating-geographical-random-forest-model",
    "title": "Take Home Exercise 3",
    "section": "6.8 Calibrating Geographical Random Forest Model",
    "text": "6.8 Calibrating Geographical Random Forest Model\n\n6.8.1 Calculating Bandwidth\n\ngwRF_bw <- grf.bw(formula = PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD +\n                   PROX_CHILDCARE + PROX_ELDERCARE + PROX_GOODPRIMARY +\n                   PROX_HAWKER + PROX_MRT + PROX_PARK + PROX_SHOPPING +\n                   PROX_SUPERMARKET + WITHIN_1KM_PRIMARY + WITHIN_350M_BUS +\n                   WITHIN_350M_CHILDCARE + WITHIN_350M_KINDERGARTEN + LEASE_MTHS,\n                 data = train_data,\n                 kernel = \"adaptive\",\n                 coords = coords_train)\n\n\n\n\n\n\n\nNote\n\n\n\nSince this took quite a few hours to run and I did not manage to get a screenshot, I took the value of 1184 as the bw\n\n\n\n\n6.8.2 Calibrating Using Training Data\n\nset.seed(1234)\ngwRF_adaptive <- grf(formula = PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD +\n                       PROX_CHILDCARE + PROX_ELDERCARE + PROX_GOODPRIMARY +\n                       PROX_HAWKER + PROX_MRT + PROX_PARK + PROX_SHOPPING +\n                       PROX_SUPERMARKET + WITHIN_1KM_PRIMARY + WITHIN_350M_BUS +\n                       WITHIN_350M_CHILDCARE + WITHIN_350M_KINDERGARTEN +\n                       LEASE_MTHS,\n                     dframe = train_data,\n                     ntree = 30,\n                     bw = 1184,\n                     kernel = \"adaptive\",\n                     coords = coords_train)\n\nRanger result\n\nCall:\n ranger(PRICE ~ STOREY + AREA_SQM + PROX_BUS + PROX_CBD + PROX_CHILDCARE +      PROX_ELDERCARE + PROX_GOODPRIMARY + PROX_HAWKER + PROX_MRT +      PROX_PARK + PROX_SHOPPING + PROX_SUPERMARKET + WITHIN_1KM_PRIMARY +      WITHIN_350M_BUS + WITHIN_350M_CHILDCARE + WITHIN_350M_KINDERGARTEN +      LEASE_MTHS, data = train_data, num.trees = 30, mtry = 5,      importance = \"impurity\", num.threads = NULL) \n\nType:                             Regression \nNumber of trees:                  30 \nSample size:                      23656 \nNumber of independent variables:  17 \nMtry:                             5 \nTarget node size:                 5 \nVariable importance mode:         impurity \nSplitrule:                        variance \nOOB prediction error (MSE):       1143371358 \nR squared (OOB):                  0.9318261 \n                  STOREY                 AREA_SQM                 PROX_BUS \n            4.882740e+13             1.802607e+13             2.782766e+12 \n                PROX_CBD           PROX_CHILDCARE           PROX_ELDERCARE \n            1.218228e+14             3.609986e+12             1.075990e+13 \n        PROX_GOODPRIMARY              PROX_HAWKER                 PROX_MRT \n            4.035575e+13             9.870892e+12             1.046059e+13 \n               PROX_PARK            PROX_SHOPPING         PROX_SUPERMARKET \n            8.409842e+12             9.944490e+12             6.336210e+12 \n      WITHIN_1KM_PRIMARY          WITHIN_350M_BUS    WITHIN_350M_CHILDCARE \n            8.470948e+12             2.993314e+12             3.766528e+12 \nWITHIN_350M_KINDERGARTEN               LEASE_MTHS \n            2.587680e+12             8.243288e+13 \n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n-486667  -17333    5804    9901   37421  358911 \n     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. \n-150306.7    -333.9   15378.7   24600.3   41276.4  453796.2 \n                                  Min          Max         Mean          StD\nSTOREY                   108287315357 8.995044e+12 1.100987e+12 1.479233e+12\nAREA_SQM                  40222929945 8.594432e+12 8.945332e+11 1.085839e+12\nPROX_BUS                  26251768000 1.853974e+12 1.433912e+11 1.287721e+11\nPROX_CBD                  51534830746 7.961513e+12 6.363806e+11 9.199543e+11\nPROX_CHILDCARE            29235883707 3.491135e+12 2.196936e+11 3.175219e+11\nPROX_ELDERCARE            27500057293 5.139419e+12 3.864121e+11 4.236617e+11\nPROX_GOODPRIMARY          49424745796 4.808371e+12 4.487640e+11 5.211130e+11\nPROX_HAWKER               45378946209 6.812408e+12 4.161554e+11 4.322252e+11\nPROX_MRT                  40158696021 6.297802e+12 5.165779e+11 7.718710e+11\nPROX_PARK                 41060200305 2.087646e+12 3.468526e+11 2.872485e+11\nPROX_SHOPPING             30568298989 8.260459e+12 4.106731e+11 5.593409e+11\nPROX_SUPERMARKET          27745114270 6.467449e+12 3.064361e+11 4.367737e+11\nWITHIN_1KM_PRIMARY         5684248036 5.380428e+12 1.325541e+11 2.202085e+11\nWITHIN_350M_BUS           18308261388 1.817433e+12 1.184396e+11 1.206658e+11\nWITHIN_350M_CHILDCARE      8787221586 7.132997e+12 1.698429e+11 4.151069e+11\nWITHIN_350M_KINDERGARTEN   2638285422 1.168817e+12 6.858959e+10 9.415190e+10\nLEASE_MTHS               361999888182 1.990119e+13 3.786828e+12 4.169286e+12\n\n\n\n\n6.8.3 Saving for future use\n\nwrite_rds(gwRF_adaptive, \"data/model/gwRF_adaptive.rds\")\n\n\ngwRF_adaptive <- read_rds(\"data/model/gwRF_adaptive.rds\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#predicting-using-test-data",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#predicting-using-test-data",
    "title": "Take Home Exercise 3",
    "section": "6.9 Predicting Using Test Data",
    "text": "6.9 Predicting Using Test Data\n\n6.9.1 Preparing test data\n\ntest_data <- cbind(test_data, coords_test) %>%\n  st_drop_geometry()\n\n\n\n6.9.2 Predicting with test data\n\ngwRF_pred <- predict.grf(gwRF_adaptive, \n                         test_data, \n                         x.var.name=\"X\",\n                         y.var.name=\"Y\", \n                         local.w=1,\n                         global.w=0)\n\n\n\n6.9.3 Saving for future use\n\nGRF_pred <- write_rds(gwRF_pred, \"data/model/GRF_pred.rds\")\n\n\n\n6.9.4 Converting Predicting Output into data frame\n\nGRF_pred <- read_rds(\"data/model/GRF_pred.rds\")\nGRF_pred_df <- as.data.frame(GRF_pred)\n\n\n\n6.9.5 Append Predicted Values into test_data\n\ntest_data_p <- cbind(test_data, GRF_pred_df)\n\n\n\n6.9.6 Saving for future use\n\nwrite_rds(test_data_p, \"data/model/test_data_p.rds\")"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#calculate-root-mean-square-error",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#calculate-root-mean-square-error",
    "title": "Take Home Exercise 3",
    "section": "6.10 Calculate Root Mean Square Error",
    "text": "6.10 Calculate Root Mean Square Error\n\nrmse(test_data_p$PRICE, \n     test_data_p$GRF_pred)\n\n[1] 71684.46"
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#visualizing-predicted-values",
    "href": "Take-Home_Ex/Take-Home_Ex03/Take-Home_Ex03.html#visualizing-predicted-values",
    "title": "Take Home Exercise 3",
    "section": "6.11 Visualizing Predicted Values",
    "text": "6.11 Visualizing Predicted Values\n\nggplot(data = test_data_p,\n       aes(x = GRF_pred,\n           y = PRICE)) +\n  geom_point()\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nA better predictive model should have the scatter point close to the diagonal line. The scatter plot can be also used to detect if any outliers in the model."
  },
  {
    "objectID": "Take-Home_Ex/Take-Home_Ex03/data/geospatial/MPSZ-2019.html",
    "href": "Take-Home_Ex/Take-Home_Ex03/data/geospatial/MPSZ-2019.html",
    "title": "IS415-GAA",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>     dataset\n\n\n        0 0     false"
  }
]